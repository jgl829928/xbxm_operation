webpackJsonp([26],{Slb6:function(t,e){},ZtLk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xxa5"),s=n.n(a),i=n("Gu7T"),o=n.n(i),r=n("exGp"),l=n.n(r),c=n("hm3b"),u=n("hVDB"),p={name:"contentManagement",components:{Pagenation:c.a},data:function(){return{dialogVisible:!1,skipContentInfo:"",pageDefault:{totalRecords:0,currentPage:1,pageSize:20},pageParams:{title:"",currentPage:1},tableList:[]}},methods:{getPageList:function(t){var e=this;return l()(s.a.mark(function n(){var a;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.pageParams.currentPage=t||1,e.pageDefault.currentPage=t||1,n.next=4,e.$http.get(u.a.contentList,{params:e.pageParams});case 4:0===(a=n.sent).code&&(e.pageDefault.totalRecords=a.page.totalRecords,e.tableList=[],e.tableList=[].concat(o()(a.data)));case 6:case"end":return n.stop()}},n,e)}))()},deleteContent:function(t){var e=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.delete(u.a.addContent+"/"+t).then(function(t){0===t.code?(e.$message.success(t.msg),e.getPageList()):e.$message.error(t.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},publishContent:function(t,e){var n=this;this.$http.put(u.a.publishContent+"/"+t+"?releaseType="+e).then(function(t){0===t.code?(n.$message.success(t.msg),n.getPageList()):n.$message.error(t.msg)})},skipContent:function(t){var e=this;this.$http.get(u.a.singleContent+"/"+t).then(function(t){0===t.code&&(e.skipContentInfo=t.data.content)}),this.dialogVisible=!0},modifyContent:function(t){this.$router.push({name:"editContent",params:{id:t}})},indexMethod:function(t){return t+20*(this.pageParams.currentPage-1)+1}},beforeMount:function(){this.getPageList()}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contract-receipts content-manage"},[n("el-form",{ref:"pageParams",staticClass:"c-search-form",attrs:{model:t.pageParams,"label-position":"right",inline:!0}},[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"文章标题",prop:"itemCode"}},[n("el-input",{attrs:{clearable:""},model:{value:t.pageParams.title,callback:function(e){t.$set(t.pageParams,"title","string"==typeof e?e.trim():e)},expression:"pageParams.title"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:16}},[n("div",{staticClass:"c-footer-btn"},[n("el-button",{staticClass:"btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.getPageList(1)}}},[t._v("查询")])],1)])],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.getPermission("content_2"),expression:"$store.getters.getPermission('content_2')"}]},[n("router-link",{attrs:{to:{name:"addContent"}}},[n("el-button",{staticClass:"btn-search btn-add",attrs:{type:"primary"}},[t._v("添加内容")])],1)],1),t._v(" "),n("div",{staticClass:"c-table-wrap"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableList,align:"center",stripe:"",height:"500"}},[n("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50",index:t.indexMethod}}),t._v(" "),n("el-table-column",{attrs:{"min-width":"120",align:"center",prop:"title",label:"文章标题"}}),t._v(" "),n("el-table-column",{attrs:{"min-width":"120",align:"center",prop:"subtitle",label:"小标题"}}),t._v(" "),n("el-table-column",{attrs:{"min-width":"110",align:"center",label:"封面图"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{staticStyle:{width:"100px",height:"65px"},attrs:{src:t.row.coverImageUrl,alt:""}})]}}])}),t._v(" "),n("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"author",label:"作者"}}),t._v(" "),n("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"contentAbstract",label:"摘要"}}),t._v(" "),n("el-table-column",{attrs:{align:"center","min-width":"110",label:"正文类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.contentType.desc))]),t._v(" "),1===e.row.contentType.code?n("a",{attrs:{href:e.row.link,target:"_blank"}},[t._v("打开")]):n("span",{staticClass:"skipBtn",on:{click:function(n){t.skipContent(e.row.contentCode)}}},[t._v("预览")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"createTime","min-width":"165",label:"创建时间"}}),t._v(" "),n("el-table-column",{attrs:{align:"center","min-width":"110",label:"发布渠道"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.releaseChannel,function(a,s){return n("span",{key:a.code},[t._v(t._s(a.desc+(s+1!==e.row.releaseChannel.length?"、":"")))])})}}])}),t._v(" "),n("el-table-column",{attrs:{"min-width":"80",align:"center",prop:"publishType.desc",label:"发布状态"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"publishTime","min-width":"165",label:"发布时间"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",width:"300",label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.publishType.code?n("el-button",{staticClass:"btn-handle",attrs:{disabled:!t.$store.getters.getPermission("content_5"),type:"primary"},on:{click:function(n){t.publishContent(e.row.contentCode,1)}}},[t._v("发布")]):n("el-button",{staticClass:"btn-handle",attrs:{disabled:!t.$store.getters.getPermission("content_6"),type:"primary"},on:{click:function(n){t.publishContent(e.row.contentCode,2)}}},[t._v("取消发布")]),t._v(" "),n("el-button",{staticClass:"btn-handle",attrs:{disabled:!(t.$store.getters.getPermission("content_3")&&0===e.row.publishType.code),type:"primary"},on:{click:function(n){t.modifyContent(e.row.contentCode)}}},[t._v("修改")]),t._v(" "),n("el-button",{staticClass:"btn-handle btn-add",attrs:{disabled:!(t.$store.getters.getPermission("content_4")&&0===e.row.publishType.code),type:"primary"},on:{click:function(n){t.deleteContent(e.row.contentCode)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),n("el-dialog",{staticClass:"l-dialog",attrs:{title:"内容预览",visible:t.dialogVisible,center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{domProps:{innerHTML:t._s(t.skipContentInfo)}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"btn-reset",attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),n("Pagenation",{attrs:{pageparams:t.pageDefault,itemList:t.tableList},on:{handlePage:t.getPageList}})],1)},staticRenderFns:[]};var g=n("VU/8")(p,d,!1,function(t){n("yDRC"),n("Slb6")},"data-v-7c4b2446",null);e.default=g.exports},yDRC:function(t,e){}});
//# sourceMappingURL=26.295361dbab04dc7a8bee.js.map