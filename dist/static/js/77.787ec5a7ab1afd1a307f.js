webpackJsonp([77],{Nyce:function(t,e){},zoJ4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("UpQb"),i={name:"boothType",components:{Pagenation:a("hm3b").a},data:function(){return{centerDialogVisible:!1,title:"摊位类型-添加",typeList:[],pageDefault:{totalRecords:0,currentPage:1,pageSize:20},boothTypeCode:"",formType:"add",ruleForm:{boothTypeName:""},rules:{boothTypeName:[{required:!0,message:"请输入类型名称",trigger:"change"}]},page:1}},mounted:function(){this.getPageList()},methods:{rightControl:function(t){return this.$store.getters.getPermission(t)},getPageList:function(t){var e=this;this.pageDefault.currentPage=t||1,this.$http.get(o.a.boothType,{params:this.pageDefault}).then(function(t){0===t.code&&(e.pageDefault.totalRecords=t.page.totalRecords,e.typeList=t.data)})},Dialog:function(t,e){var a=this;this.centerDialogVisible=!0;var i=this;"add"==t?(this.title="摊位类型-添加",this.formType="add",setTimeout(function(){i.$refs.ruleForm.resetFields()},100)):(this.title="摊位类型-修改",this.boothTypeCode=e,this.formType="edit",this.$http.get(o.a.typeCheck,{params:{boothTypeCode:e}}).then(function(t){0===t.code&&(a.ruleForm=t.data)}))},submitForm:function(t){var e=this,a=this;this.$refs[t].validate(function(t){if(t){var i="";"add"==a.formType?(i="添加成功",e.$http({url:o.a.boothType,method:"post",data:a.ruleForm.boothTypeName,delayLoading:!1}).then(function(t){0===t.code&&(e.$message.success(i),a.centerDialogVisible=!1,a.getPageList())})):(i="修改成功",a.ruleForm.boothTypeCode=a.boothTypeCode,e.$http.put(o.a.typeEdit,a.ruleForm).then(function(t){0===t.code&&(e.$message.success(i),a.centerDialogVisible=!1,a.getPageList())}))}})},indexMethod:function(t){return t+20*(this.typeList.length-1)+1}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"booth-type"},[a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.rightControl("boothType_3"),expression:"rightControl('boothType_3')"}],staticClass:"btn-search btn-add",attrs:{type:"primary"},on:{click:function(e){t.Dialog("add")}}},[t._v("添加")])],1),t._v(" "),a("div",{staticClass:"c-table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.typeList,align:"center",height:"500",stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"boothTypeName",label:"摊位类型名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"marketName",label:"所属商场",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"登记时间",width:"165"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createUserName",label:"登记人",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"btn-handle",attrs:{type:"primary",disabled:!t.rightControl("boothType_2")},on:{click:function(a){t.Dialog("edit",e.row.boothTypeCode)}}},[t._v("修改")])]}}])})],1)],1),t._v(" "),a("Pagenation",{attrs:{pageparams:t.pageDefault,itemList:t.typeList},on:{handlePage:t.getPageList}}),t._v(" "),a("el-dialog",{staticClass:"s-dialog",attrs:{title:t.title,visible:t.centerDialogVisible,width:"30%"},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",[a("el-form",{ref:"ruleForm",attrs:{rules:t.rules,model:t.ruleForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"类型名称",prop:"boothTypeName",center:""}},[a("el-input",{attrs:{maxlength:"19"},model:{value:t.ruleForm.boothTypeName,callback:function(e){t.$set(t.ruleForm,"boothTypeName","string"==typeof e?e.trim():e)},expression:"ruleForm.boothTypeName"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-primary btn-save",attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保 存")]),t._v(" "),a("el-button",{staticClass:"btn-primary btn-reset",attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("Nyce")},null,null);e.default=l.exports}});
//# sourceMappingURL=77.787ec5a7ab1afd1a307f.js.map