webpackJsonp([32],{"7x1z":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("lC5x"),r=a.n(l),n=a("4YfN"),i=a.n(n),s=a("3cXf"),o=a.n(s),c=a("J0Oq"),m=a.n(c),p=a("IHPB"),d=a.n(p),u=a("rVsN"),g=a.n(u),b=a("hm3b"),h=a("FTcF"),f=a("hVDB"),v={name:"marketTask",components:{Pagenation:b.a,selectMarket:h.a},data:function(){return{pageDefault:{totalRecords:0,currentPage:1,pageSize:20},pageParams:{areaId:"",marketCode:"",years:"",month:"",currentPage:1},monthList:[{id:1,desc:"1月"},{id:2,desc:"2月"},{id:3,desc:"3月"},{id:4,desc:"4月"},{id:5,desc:"5月"},{id:6,desc:"6月"},{id:7,desc:"7月"},{id:8,desc:"8月"},{id:9,desc:"9月"},{id:10,desc:"10月"},{id:11,desc:"11月"},{id:12,desc:"12月"}],provinceOption:[],storeNameOption:[],tableList:[],centerDialogVisible:!1,monthTaskQuotaId:"",form:{auditStatus:"",comment:""}}},methods:{getOptionData:function(){var t=this,e=this.$http.get(f.a.provinceOption),a=this.$http.get(f.a.allStore);g.a.all([e,a]).then(function(e){0===e[0].code&&(t.provinceOption=[],t.provinceOption=[].concat(d()(e[0].data))),0===e[1].code&&(t.storeNameOption=[],t.storeNameOption=[].concat(d()(e[1].data)))})},getPageList:function(t){var e=this;return m()(r.a.mark(function a(){var l;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.pageParams.currentPage=t||1,e.pageDefault.currentPage=t||1,a.next=4,e.$http.get(f.a.marketMonthList,{params:e.pageParams});case 4:0===(l=a.sent).code&&(e.pageDefault.totalRecords=l.page.totalRecords,e.tableList=[],e.tableList=[].concat(d()(l.data.list)),"{}"!==o()(l.data.summation)&&e.tableList.length>0&&e.tableList.push(i()({},l.data.summation)));case 6:case"end":return a.stop()}},a,e)}))()},indexMethod:function(t){return t+1===this.tableList.length?"合计":t+20*(this.pageParams.currentPage-1)+1},openJudgeData:function(t){this.centerDialogVisible=!0,this.monthTaskQuotaId=t,this.form.auditStatus="",this.form.comment=""},submitJudgeData:function(){var t=this;if(3===this.form.auditStatus&&""===this.form.comment)return this.$message.error("审核不通过，备注必填！");this.form.monthTaskQuotaId=this.monthTaskQuotaId,this.$http.post(f.a.judgeMonthTask,this.form).then(function(e){0===e.code?(t.$message.success(e.msg),t.getPageList(),t.centerDialogVisible=!1):t.$message.error(e.msg)})}},beforeMount:function(){this.getOptionData(),this.getPageList()}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contract-receipts market-task"},[a("el-form",{ref:"pageParams",staticClass:"c-search-form",attrs:{model:t.pageParams,"label-width":"80px",inline:!0,"label-position":"right"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"省",prop:"itemName"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.pageParams.areaId,callback:function(e){t.$set(t.pageParams,"areaId","string"==typeof e?e.trim():e)},expression:"pageParams.areaId"}},t._l(t.provinceOption,function(t,e){return a("el-option",{key:e,attrs:{label:t.areaName,value:t.areaCode}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商场名称",prop:"itemCode"}},[a("selectMarket",{attrs:{reqData:t.pageParams}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"年度",prop:"skuCode"}},[a("el-date-picker",{attrs:{"value-format":"yyyy",type:"year",placeholder:"选择年"},model:{value:t.pageParams.years,callback:function(e){t.$set(t.pageParams,"years","string"==typeof e?e.trim():e)},expression:"pageParams.years"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"月份",prop:"skuCode"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.pageParams.month,callback:function(e){t.$set(t.pageParams,"month","string"==typeof e?e.trim():e)},expression:"pageParams.month"}},t._l(t.monthList,function(t,e){return a("el-option",{key:e,attrs:{label:t.desc,value:t.id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"c-footer-btn"},[a("el-button",{staticClass:"btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.getPageList(1)}}},[t._v("查询")])],1)])],1)],1),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"c-table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableList,align:"center",stripe:"",height:"500"}},[a("el-table-column",{attrs:{align:"center",label:"序号",type:"index","min-width":"50",index:t.indexMethod}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"areaName","min-width":"110",label:"省"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"110",prop:"marketName",label:"商场名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"quotaYear","min-width":"110",label:"年度"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"月份","min-width":"110",prop:"quotaMonth"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"110",label:"楼层经理",prop:"floorManagerName"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"region",label:"区域组名称","min-width":"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"arrear",label:"本年度前期欠款总金额（含以往所有欠款金额）","min-width":"180",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"collectionArrearTask",label:"本月前期欠款收款任务",align:"center","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"monthDue",label:"本月应收款总额","min-width":"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120",prop:"collectionDueTask",label:"本月应收款任务",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120",prop:"contractNumBeyondTimeLimit",label:"逾期未签户数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120",prop:"contractNumRenew",label:"本月应续签户数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"135",prop:"contractNumTask",label:"逾期未签户数任务",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120",prop:"contractNumRenewTask",label:"本月应续签任务",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"monthExpectedAmountReceipts",label:"当期续签预计逾期欠款金额",align:"center","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"monthExpectedAmount",label:"当期续签预计本月应收金额",align:"center","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"expectedOverdueAmountTask",label:"当期续签预计逾期欠款任务",align:"center","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"monthExpectedAmountTask",label:"当期续签预计本月应收任务",align:"center","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"emptyArea",label:"本区空场总面积","min-width":"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"emptyAreaLeaesTask",label:"本月招商任务面积","min-width":"135",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"120",prop:"auditStatus.desc",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"提交时间","min-width":"165",prop:"commitTime"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",fixed:"right","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index+1!==t.tableList.length?a("el-button",{staticClass:"btn-handle",attrs:{type:"primary",disabled:!(e.row.auditStatus&&2===e.row.auditStatus.code&&t.$store.getters.getPermission("marketTask_2"))},on:{click:function(a){t.openJudgeData(e.row.monthTaskQuotaId)}}},[t._v("审核")]):t._e()]}}])})],1)],1),t._v(" "),a("Pagenation",{attrs:{pageparams:t.pageDefault,itemList:t.tableList},on:{handlePage:t.getPageList}}),t._v(" "),a("el-dialog",{staticClass:"s-dialog",attrs:{title:"月度任务-审核",visible:t.centerDialogVisible},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("div",[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"审核"}},[a("el-radio-group",{model:{value:t.form.auditStatus,callback:function(e){t.$set(t.form,"auditStatus","string"==typeof e?e.trim():e)},expression:"form.auditStatus"}},[a("el-radio",{attrs:{label:4}},[t._v("通过")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("不通过")])],1)],1),t._v(" "),a("el-form-item",{staticClass:"otherInfo",attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"注：审核不通过则必填"},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment","string"==typeof e?e.trim():e)},expression:"form.comment"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-save",attrs:{type:"primary"},on:{click:t.submitJudgeData}},[t._v("保 存")]),t._v(" "),a("el-button",{staticClass:"btn-reset",attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"unit-div"},[e("span",[this._v("单位")]),e("span",[this._v("元、平方米、户")])])}]};var k=a("vSla")(v,_,!1,function(t){a("kx6c"),a("oQgt")},"data-v-6498edce",null);e.default=k.exports},kx6c:function(t,e){},oQgt:function(t,e){}});
//# sourceMappingURL=32.bf7a7d7b354929398c02.js.map