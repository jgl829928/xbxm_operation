webpackJsonp([41],{"+WQF":function(a,e){},"D6f/":function(a,e){},mtU4:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=t("Dd8w"),r=t.n(l),s=t("hm3b"),o=t("TIfe"),i=t("2A+d"),n=t("eMGh"),c={name:"mallsMain",data:function(){return{title:"",dialogFormVisibleM:!1,dialogFormVisibleL:!1,pageparams:{},reqData:{areaCode:"",marketName:""},reqDiaData:{address:"",areaCode:"",contactTel:"",landlineTel:"",floors:[],status:!0,marketCode:"",marketName:"",responsibleUserName:""},floorList:[{floorNum:-3,floorName:"-3楼",disabled:!1},{floorNum:-2,floorName:"-2楼",disabled:!1},{floorNum:-1,floorName:"-1楼",disabled:!1},{floorNum:1,floorName:"1楼",disabled:!1},{floorNum:2,floorName:"2楼",disabled:!1},{floorNum:3,floorName:"3楼",disabled:!1},{floorNum:4,floorName:"4楼",disabled:!1},{floorNum:5,floorName:"5楼",disabled:!1},{floorNum:6,floorName:"6楼",disabled:!1},{floorNum:7,floorName:"7楼",disabled:!1},{floorNum:8,floorName:"8楼",disabled:!1}],reqBdata:{address:"",areaCode:"",contactTel:"",landlineTel:"",floors:[],status:!0,marketCode:"",marketName:"",responsibleUserName:""},itemList:[],marketInfo:{},form:{name:""},rules:{marketName:[{required:!0,message:"请输入商场名称",trigger:"blur"},{max:20,message:"请输入限制在20字",trigger:"blur"}],address:[{required:!0,message:"请输入商场地址",trigger:"blur"},{max:20,message:"请输入限制在20字",trigger:"blur"}],contactTel:[{required:!0,message:"请输入负责人电话",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"目前只支持中国大陆的手机号码",trigger:"blur"}],floors:[{required:!0,message:"请选择楼层",trigger:"change"}],areaCode:[{required:!0,message:"请选择城市",trigger:"change"}],responsibleUserName:[{required:!0,message:"请输入负责人姓名",trigger:"blur"},{max:20,message:"请输入限制在20字",trigger:"blur"}],landlineTel:[{required:!0,message:"请输入商场固话",trigger:"blur"},{pattern:/^0\d{2,3}-\d{7,8}$/,message:"请输入正确的商场固话",trigger:"blur"}]},formLabelWidth:"120px",areaList:[],areaListAll:[],checkPost:""}},components:{pagenation:s.a},created:function(){this.getData(),this.getArea(null,"areaList",n.b.areaAll),this.getArea(null,"areaListAll",n.b.getArea)},methods:{rightControl:function(a){return this.$store.getters.getPermission(a)},reset:function(){var a=this;this.dialogFormVisibleL=!1,this.reqDiaData=this.reqBdata,this.floorList.forEach(function(a){a.disabled=!1});var e=window.localStorage.getItem("floorsLen");this.reqDiaData.floors.splice(e),this.floorList.forEach(function(a){a.disabled=!1}),this.$refs.reqDiaData.resetFields(),this.$nextTick(function(){a.$refs.reqDiaData.clearValidate()})},addcontract_type:function(a){var e=this,t=this;this.dialogFormVisibleL=!0,1!=a?(this.checkPost=!1,this.title="商场-修改",this.$nextTick(function(){t.reqDiaData.address=a.address,t.reqDiaData.areaCode=a.areaCode,t.reqDiaData.marketCode=a.marketCode,t.reqDiaData.marketName=a.marketName,t.reqDiaData.contactTel=a.contactTel,t.reqDiaData.status=a.status,t.reqDiaData.responsibleUserName=a.responsibleUserName,t.reqDiaData.landlineTel=a.landlineTel,a.floors&&(window.localStorage.setItem("floors",a.floors.length),e.floorList.forEach(function(e){a.floors.forEach(function(a){e.floorNum==a.floorNum&&(e.disabled=a.disable)})}),e.reqDiaData.floors=a.floors.map(function(a){return a.floorNum}),window.tempFloors=a.floors)})):(this.checkPost=!0,this.title="商场-添加")},handleSave:function(a){var e=this;this.$refs[a].validate(function(a){if(!a)return!1;e.checkPost?e.handleData("post",r()({},e.reqDiaData)):e.handleData("put",r()({},e.reqDiaData))})},handleData:function(a,e){var t=this;this.$http({url:""+i.a.markets,method:a,data:e}).then(function(a){a&&(0==a.code?(t.$message.success(a.msg),t.dialogFormVisibleL=!1,t.getData()):t.$message.error(a.msg))})},search:function(){this.getData()},indexMethod:function(a){return a+20*(this.pageparams.currentPage-1)+1},checkInfo:function(a){if(this.dialogFormVisibleM=!0,this.marketInfo=Object(o.d)(a,!0,["floors"]),a.floors){var e=a.floors.map(function(a){return a.floorNum});this.marketInfo.floors=e.join("、"),console.log(this.marketInfo.floors)}},getData:function(a){a=a||"";var e=r()({},this.reqData,{currentPage:a});Object(o.b)(a,e,i.a.markets,this)},handlePage:function(a){this.getData(a)},getArea:function(a,e,t){var l=this;this.$http({url:t,method:"get",params:{areaCode:a}}).then(function(a){a&&0==a.code&&(l[e]=a.data)})}}},m={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"g-malls-maintenance"},[t("el-form",{ref:"reqData",staticClass:"c-search-form",attrs:{model:a.reqData,"label-width":"102px",inline:!0,"label-position":"right"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"商场名称",prop:"marketName"}},[t("el-input",{attrs:{clearable:""},model:{value:a.reqData.marketName,callback:function(e){a.$set(a.reqData,"marketName","string"==typeof e?e.trim():e)},expression:"reqData.marketName"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{prop:"areaCode",label:"所在省市"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:a.reqData.areaCode,callback:function(e){a.$set(a.reqData,"areaCode",e)},expression:"reqData.areaCode"}},a._l(a.areaList,function(a,e){return t("el-option",{key:e,attrs:{label:a.areaName,value:a.areaCode}})}))],1)],1),a._v(" "),t("el-col",{attrs:{span:8}},[t("el-button",{staticClass:"btn-search",attrs:{type:"primary"},on:{click:a.search}},[a._v("查询")])],1)],1),a._v(" "),t("el-row",[t("el-col",{directives:[{name:"show",rawName:"v-show",value:a.rightControl("mallsMain_add"),expression:"rightControl('mallsMain_add')"}],attrs:{span:8}},[t("el-button",{staticClass:"btn-search btn-add",attrs:{type:"primary"},on:{click:function(e){a.addcontract_type(1)}}},[a._v("添加")])],1)],1)],1),a._v(" "),t("el-dialog",{staticClass:"l-dialog",attrs:{title:a.title,visible:a.dialogFormVisibleL},on:{"update:visible":function(e){a.dialogFormVisibleL=e},close:a.reset}},[t("el-form",{ref:"reqDiaData",staticClass:"c-search-form",attrs:{model:a.reqDiaData,rules:a.rules,"label-width":"110px",inline:!0,"label-position":"right"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"商场名称",prop:"marketName"}},[t("el-input",{attrs:{clearable:""},model:{value:a.reqDiaData.marketName,callback:function(e){a.$set(a.reqDiaData,"marketName","string"==typeof e?e.trim():e)},expression:"reqDiaData.marketName"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"areaCode",label:"所在省市"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择",disabled:!a.checkPost},model:{value:a.reqDiaData.areaCode,callback:function(e){a.$set(a.reqDiaData,"areaCode",e)},expression:"reqDiaData.areaCode"}},a._l(a.areaListAll,function(a,e){return t("el-option",{key:e,attrs:{label:a.areaName,value:a.areaCode}})}))],1)],1)],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"负责人",prop:"responsibleUserName"}},[t("el-input",{attrs:{clearable:""},model:{value:a.reqDiaData.responsibleUserName,callback:function(e){a.$set(a.reqDiaData,"responsibleUserName","string"==typeof e?e.trim():e)},expression:"reqDiaData.responsibleUserName"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"负责人联系电话",prop:"contactTel"}},[t("el-input",{attrs:{clearable:""},model:{value:a.reqDiaData.contactTel,callback:function(e){a.$set(a.reqDiaData,"contactTel","string"==typeof e?e.trim():e)},expression:"reqDiaData.contactTel"}})],1)],1)],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"固定电话",prop:"landlineTel"}},[t("el-input",{attrs:{clearable:""},model:{value:a.reqDiaData.landlineTel,callback:function(e){a.$set(a.reqDiaData,"landlineTel","string"==typeof e?e.trim():e)},expression:"reqDiaData.landlineTel"}})],1)],1)],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"楼层",prop:"floors"}},[t("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:a.reqDiaData.floors,callback:function(e){a.$set(a.reqDiaData,"floors",e)},expression:"reqDiaData.floors"}},a._l(a.floorList,function(a,e){return t("el-option",{key:a.floorNum,attrs:{label:a.floorName,value:a.floorNum,disabled:a.disabled}})}))],1)],1),a._v(" "),t("el-col",{attrs:{span:12,xs:24}},[t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("el-switch",[t("el-radio-group",{model:{value:a.reqDiaData.status,callback:function(e){a.$set(a.reqDiaData,"status",e)},expression:"reqDiaData.status"}},[t("el-radio",{attrs:{label:!0}},[a._v("启用")]),a._v(" "),t("el-radio",{attrs:{label:!1}},[a._v("禁用")])],1)],1)],1)],1)],1),a._v(" "),t("el-row",{staticClass:"u-area-input"},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"商场地址",prop:"address"}},[t("el-input",{attrs:{type:"textarea"},model:{value:a.reqDiaData.address,callback:function(e){a.$set(a.reqDiaData,"address","string"==typeof e?e.trim():e)},expression:"reqDiaData.address"}})],1)],1)],1)],1),a._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"btn-save",attrs:{type:"primary"},on:{click:function(e){a.handleSave("reqDiaData")}}},[a._v("保存")]),a._v(" "),t("el-button",{staticClass:"btn-reset",attrs:{type:"primary"},on:{click:a.reset}},[a._v("取消")])],1)],1),a._v(" "),t("div",{staticClass:"c-table-wrap"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:a.itemList,align:"center",height:"500",stripe:""}},[t("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50",index:a.indexMethod}}),a._v(" "),t("el-table-column",{attrs:{align:"center",prop:"marketName",label:"商场名称"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("p",{staticClass:"u-color",on:{click:function(t){a.checkInfo(e.row)}}},[a._v(a._s(e.row.marketName))])]}}])}),a._v(" "),t("el-table-column",{attrs:{align:"center",prop:"marketCode","min-width":"160",label:"商场编码"}}),a._v(" "),t("el-table-column",{attrs:{align:"center",prop:"areaCodeName",label:"所在省市"}}),a._v(" "),t("el-table-column",{attrs:{align:"center",prop:"status",label:"状态"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n          "+a._s(1==e.row.status?"启用":"禁用")+"\n        ")]}}])}),a._v(" "),t("el-table-column",{attrs:{align:"center",prop:"responsibleUserName",label:"负责人"}}),a._v(" "),t("el-table-column",{attrs:{align:"center",prop:"contactTel","min-width":"120",label:"负责人联系电话"}}),a._v(" "),t("el-table-column",{attrs:{align:"center",prop:"address",label:"商场地址"}}),a._v(" "),t("el-table-column",{attrs:{align:"center",prop:"createUserName",label:"登记人"}}),a._v(" "),t("el-table-column",{attrs:{align:"center",prop:"createTime","min-width":"165",label:"登记时间"}}),a._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作",fixed:"right","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{staticClass:"btn-handle",attrs:{type:"primary",disabled:!a.rightControl("mallsMain_info")},on:{click:function(t){a.addcontract_type(e.row)}}},[a._v("\n            修改\n          ")])]}}])})],1),a._v(" "),t("el-dialog",{staticClass:"m-dialog",attrs:{title:"区域-修改",visible:a.dialogFormVisibleM},on:{"update:visible":function(e){a.dialogFormVisibleM=e}}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"u-unit"},[a._v("商场名称")]),a._v(" "),t("span",{staticClass:"u-value"},[a._v(a._s(a.marketInfo.marketName))])]),a._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"u-unit"},[a._v("所在省市")]),a._v(" "),t("span",{staticClass:"u-value"},[a._v(a._s(a.marketInfo.areaCodeName))])])],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"u-unit"},[a._v("负责人")]),a._v(" "),t("span",{staticClass:"u-value"},[a._v(a._s(a.marketInfo.responsibleUserName))])]),a._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"u-unit"},[a._v("负责人联系电话")]),a._v(" "),t("span",{staticClass:"u-value"},[a._v(a._s(a.marketInfo.contactTel))])])],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"u-unit"},[a._v("楼层")]),a._v(" "),t("el-tooltip",{attrs:{effect:"light",content:a.marketInfo.floors,placement:"bottom"}},[t("span",{staticClass:"u-value"},[a._v(a._s(a.marketInfo.floors||"--"))])])],1),a._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"u-unit"},[a._v("区域")]),a._v(" "),t("el-tooltip",{attrs:{effect:"light",content:a.marketInfo.marketPartitionName,placement:"bottom"}},[t("span",{staticClass:"u-value"},[a._v(a._s(a.marketInfo.marketPartitionName||"--"))])])],1)],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"u-unit"},[a._v("状态")]),a._v(" "),t("span",{staticClass:"u-value"},[a._v(a._s(1==a.marketInfo.status?"启用":"禁用"))])]),a._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"u-unit"},[a._v("商场地址")]),a._v(" "),t("el-tooltip",{attrs:{effect:"light",content:a.marketInfo.address,placement:"bottom"}},[t("span",{staticClass:"u-value"},[a._v(a._s(a.marketInfo.address))])])],1)],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"u-unit"},[a._v("登记人")]),a._v(" "),t("span",{staticClass:"u-value"},[a._v(a._s(a.marketInfo.createUserName))])]),a._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"u-unit"},[a._v("登记时间")]),a._v(" "),t("el-tooltip",{attrs:{effect:"light",content:a.marketInfo.createTime,placement:"bottom"}},[t("span",{staticClass:"u-value"},[a._v(a._s(a.marketInfo.createTime))])])],1)],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"u-unit"},[a._v("商场固定电话")]),a._v(" "),t("span",{staticClass:"u-value"},[a._v(a._s(a.marketInfo.landlineTel))])])],1),a._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"btn-close",attrs:{type:"primary"},on:{click:function(e){a.dialogFormVisibleM=!1}}},[a._v("关闭")])],1)],1)],1),a._v(" "),t("pagenation",{attrs:{pageparams:a.pageparams,itemList:a.itemList},on:{handlePage:a.handlePage}})],1)},staticRenderFns:[]};var u=t("VU/8")(c,m,!1,function(a){t("D6f/"),t("+WQF")},"data-v-5e63ad4b",null);e.default=u.exports}});
//# sourceMappingURL=41.7745a217ae9ca5a87081.js.map