webpackJsonp([56],{"7Jx8":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("4YfN"),l=a.n(r),n=a("lC5x"),i=a.n(n),o=a("J0Oq"),s=a.n(o),c=a("IHPB"),p=a.n(c),m=a("rVsN"),u=a.n(m),d=a("hm3b"),g=a("FTcF"),h=a("hVDB"),b={name:"boothInfoSearch",components:{Pagenation:d.a,selectMarket:g.a},data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},pageDefault:{totalRecords:0,currentPage:1,pageSize:20},expectPayTime:[],payTime:[],pageParams:{merchantCode:"",merchantName:"",marketCode:"",transactionType:"",payMode:"",status:"",expectPayTimeStart:"",expectPayTimeEnd:"",payTimeStart:"",payTimeEnd:"",currentPage:1},exportParams:{currentPage:1,pageSize:1e4},tableList:[],typeOption:[],storeNameOption:[],incomeType:[{label:"日常款项",value:1},{label:"合同款项",value:2}],payMode:[{label:"银行转账",value:4},{label:"POS机刷卡",value:3},{label:"现金",value:5}],status:[{label:"已交款",value:0},{label:"已退款",value:1},{label:"退款失败",value:2}]}},methods:{getOptionData:function(){var e=this,t=this.$http.get(h.a.allBoothType),a=this.$http.get(h.a.allStore);u.a.all([t,a]).then(function(t){0===t[0].code&&(e.typeOption=[],e.typeOption=[].concat(p()(t[0].data))),0===t[1].code&&(e.storeNameOption=[],e.storeNameOption=[].concat(p()(t[1].data)))})},getPageList:function(e){var t=this;return s()(i.a.mark(function a(){var r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.pageParams.currentPage=e||1,t.pageDefault.currentPage=e||1,a.next=4,t.$http.get(h.a.inComeList,{params:t.pageParams});case 4:0===(r=a.sent).code&&(t.pageDefault.totalRecords=r.page.totalRecords,t.tableList=[],t.tableList=[].concat(p()(r.data)));case 6:case"end":return a.stop()}},a,t)}))()},indexMethod:function(e){return e+20*(this.pageParams.currentPage-1)+1},download:function(e,t){if(e){var a=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,"收款信息-"+this.currentTime()+"_"+(t+1)+".xls");else{var r=document.createElement("a"),l=window.URL.createObjectURL(a);r.href=l,r.download="收款信息-"+this.currentTime()+"_"+(t+1)+".xls",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(l)}}},exportData:function(){var e=this,t=l()({},this.pageParams,this.exportParams),a=new u.a(function(e,t){e()}),r=function(a){return function(){return new u.a(function(r,l){t.currentPage=a+1,e.$http({method:"get",url:""+h.a.exportIncomeList,params:t,responseType:"blob",showLoading:!1}).then(function(t){e.download(t.data,a),r()})})}};if(this.pageDefault.totalRecords>=0)for(var n=this.pageDefault.totalRecords,i=t.pageSize,o=0===Math.ceil(n/i)?1:Math.ceil(n/i),s=0;s<o;s++)a=a.then(r(s))},currentTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),l=e.getHours(),n=e.getMinutes(),i=e.getSeconds();return t+"-"+(a<10?"0"+a:a)+"-"+(r<10?"0"+r:r)+" "+(l<10?"0"+l:l)+"-"+(n<10?"0"+n:n)+"-"+(i<10?"0"+i:i)}},beforeMount:function(){this.getOptionData(),this.getPageList()},watch:{expectPayTime:function(e,t){null!==e?(this.pageParams.expectPayTimeStart=e[0],this.pageParams.expectPayTimeEnd=e[1]):(this.pageParams.expectPayTimeStart="",this.pageParams.expectPayTimeEnd="")},payTime:function(e,t){null!==e?(this.pageParams.payTimeStart=e[0],this.pageParams.payTimeEnd=e[1]):(this.pageParams.payTimeStart="",this.pageParams.payTimeEnd="")}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contract-receipts boothinfo-search"},[a("el-form",{ref:"pageParams",staticClass:"c-search-form",attrs:{model:e.pageParams,"label-width":"125px",inline:!0,"label-position":"right"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商户编号",prop:"itemCode"}},[a("el-input",{attrs:{clearable:""},model:{value:e.pageParams.merchantCode,callback:function(t){e.$set(e.pageParams,"merchantCode","string"==typeof t?t.trim():t)},expression:"pageParams.merchantCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商户名称",prop:"itemCode"}},[a("el-input",{attrs:{clearable:""},model:{value:e.pageParams.merchantName,callback:function(t){e.$set(e.pageParams,"merchantName","string"==typeof t?t.trim():t)},expression:"pageParams.merchantName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商场名称",prop:"itemCode"}},[a("selectMarket",{attrs:{reqData:e.pageParams}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"款项类型",prop:"skuCode"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.pageParams.transactionType,callback:function(t){e.$set(e.pageParams,"transactionType","string"==typeof t?t.trim():t)},expression:"pageParams.transactionType"}},e._l(e.incomeType,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款方式",prop:"skuCode"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.pageParams.payMode,callback:function(t){e.$set(e.pageParams,"payMode","string"==typeof t?t.trim():t)},expression:"pageParams.payMode"}},e._l(e.payMode,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"状态",prop:"skuCode"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.pageParams.status,callback:function(t){e.$set(e.pageParams,"status","string"==typeof t?t.trim():t)},expression:"pageParams.status"}},e._l(e.status,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"预定收款起止日期",prop:"itemName"}},[a("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",align:"right"},model:{value:e.expectPayTime,callback:function(t){e.expectPayTime="string"==typeof t?t.trim():t},expression:"expectPayTime"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交款起止日期",prop:"itemName"}},[a("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",align:"right"},model:{value:e.payTime,callback:function(t){e.payTime="string"==typeof t?t.trim():t},expression:"payTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"c-footer-btn"},[a("el-button",{staticClass:"btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.getPageList(1)}}},[e._v("查询")])],1)])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.$store.getters.getPermission("boothInfoSearch_2"),expression:"$store.getters.getPermission('boothInfoSearch_2')"}]},[a("el-button",{staticClass:"btn-search btn-add",attrs:{type:"primary"},on:{click:e.exportData}},[e._v("导出")])],1),e._v(" "),a("div",{staticClass:"c-table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList,align:"center",stripe:"",height:"500"}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号","min-width":"50",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"costName","min-width":"150",label:"费用名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"costType","min-width":"150",label:"费用类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"contractBatchNum","min-width":"160",label:"合同编号"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"150",align:"center",prop:"merchantCode",label:"商户编号"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"merchantName",label:"商户名称"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"marketName",label:"商场名称"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",prop:"manager",align:"center",label:"楼层经理"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"costTypeName",label:"款项类型"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",prop:"paymentStatus.desc",align:"center",label:"收款状态"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",prop:"refundStatus.desc",align:"center",label:"退款状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"165",prop:"expectPayTime",label:"预定收款日期"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"transactionAmount",label:"金额"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"payMode.desc",label:"付款方式"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"orderNo","min-width":"200",label:"第三方交易流水号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"165",prop:"transactionTime",label:"交款日期"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"transactionAmount",label:"交款金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"paySuccessTime","min-width":"165",label:"收款成功时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"payOptUserName","min-width":"110",label:"收款操作人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"165",prop:"payOptTime",label:"收款操作时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundSuccessTime","min-width":"165",label:"退款成功时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundOptUserName","min-width":"110",label:"退款操作人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundOptTime","min-width":"165",label:"退款操作时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundErrorMsg","min-width":"110",label:"退款失败原因"}})],1)],1),e._v(" "),a("Pagenation",{attrs:{pageparams:e.pageDefault,itemList:e.tableList},on:{handlePage:e.getPageList}})],1)},staticRenderFns:[]};var f=a("vSla")(b,v,!1,function(e){a("y9lh"),a("ahTh")},"data-v-3a550d50",null);t.default=f.exports},ahTh:function(e,t){},y9lh:function(e,t){}});
//# sourceMappingURL=56.08bb39b13df62a6c312b.js.map