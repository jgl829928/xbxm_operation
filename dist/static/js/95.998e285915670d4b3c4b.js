webpackJsonp([95],{HqLE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("lC5x"),s=a.n(r),n=a("J0Oq"),l=a.n(n),i={props:{itemList:{type:Array}},methods:{getSummaries:function(t){var e=t.columns,a=t.data,r=[];return e.forEach(function(t,e){if(0!==e){var s=a.map(function(e){return Number(e[t.property])});s.every(function(t){return isNaN(t)})?r[e]="--":(r[e]=s.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),r[e]+="")}else r[e]="总价"}),r}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.itemList,align:"center",stripe:"","show-summary":"","summary-method":t.getSummaries}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"costProperty",label:"费用类型"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"cumulativePaidAmount",label:"金额"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"单位"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      元\n    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"收入性质"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.incomeProperty?e.row.incomeProperty.desc:""))])]}}])})],1)},staticRenderFns:[]},c=a("vSla")(i,o,!1,null,null,null).exports,m=a("YH6z"),u=a("pazF"),p=a("vsZy"),f={name:"contractApplyRef",mixins:[p.b,p.a],data:function(){var t=this;return{name:"",pageStatus:"",contractBatchNum:"",itemData:{conclusion:4,comment:"",contractBatchNum:"",refundId:""},submitData:{contractBatchNum:"",refundAmount:""},rules:{refundAmount:[{required:!0,validator:function(e,a,r){if(!(a=a.toString())||!a.trim())return r(new Error("请输入大于零的数字值"));setTimeout(function(){!/^\d+(\.\d+)?$/.test(a.trim())||a.trim()<=0?r(new Error("请输入正确的的数字值")):a.trim()>t.itemListInfo.noRefundAmount?r(new Error("退款金额不得大于收款金额")):r()},100)},trigger:"blur"}]},rules2:{comment:[{required:!0,message:"请输入备注内容",trigger:"blur"}]},itemDetail:{}}},computed:{cTitle:function(){var t="";switch(this.pageStatus){case"apply":t="退款申请";break;case"review":t="退款审核";break;case"refunds":t="退款";break;default:t="--"}return t},cBtnName:function(){var t="";switch(this.pageStatus){case"apply":t="提交";break;case"review":t="保存";break;case"refunds":t="退款";break;default:t="--"}return t}},components:{curTable:c,detailDialog:u.a},mounted:function(){this.contractBatchNum=this.$route.params.contractBatchNum||"",this.pageStatus=this.$route.meta.type,this.getDetailData(this.contractBatchNum)},methods:{cancel:function(){this.$router.push({path:"/finance/contractRefunds"})},getDetailData:function(t){var e=this;this.ajaxGet({url:m.a.contractRefunds+"/"+t,callBack:function(t){e.merchant=t.data.merchant,e.itemListInfo=t.data}})},submit:function(){var t=this;"apply"===this.pageStatus?(this.submitData.contractBatchNum=this.contractBatchNum,this.ajaxPost({url:m.a.contractRefund,data:this.submitData,validateModel:"submitData",callBack:function(){t.$router.push("/finance/contractRefunds")}})):"review"===this.pageStatus?(this.itemData.refundId=this.itemListInfo.refundId,this.itemData.contractBatchNum=this.contractBatchNum,this.ajaxPost({url:m.a.contractAudit,data:this.itemData,validateModel:"itemData",callBack:function(){t.$message.success("成功"),t.$router.push("/finance/contractRefunds")}})):"refunds"===this.pageStatus&&this.ajaxPost({url:m.a.contractCostsRefund,data:{contractBatchNum:this.contractBatchNum,refundId:this.itemListInfo.refundId},callBack:function(){t.$router.push("/finance/contractRefunds")}})},viewContract:function(){var t=this;return l()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(m.a.contractDetail+"/"+t.contractBatchNum);case 2:(a=e.sent)&&(t.itemDetail=a.data,t.$refs.detailDialog.showDialog());case 4:case"end":return e.stop()}},e,t)}))()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-detail-container c-financial-detail action-handle-wrap"},[a("p",{staticClass:"tips"},[t._v("合同-"+t._s(t.cTitle))]),t._v(" "),a("el-form",{staticClass:"c-detail-form",attrs:{"label-width":"120px","label-position":"right"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商户名称"}},[a("span",[t._v(t._s(t.merchant.merchantName))])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负责人"}},[a("span",[t._v(t._s(t.merchant.leaderName))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},["review"===t.pageStatus?[a("el-form-item",{attrs:{label:"商场名称"}},[a("span",[t._v(t._s(t.merchant.marketName))])])]:[a("el-form-item",{attrs:{label:"负责人联系电话"}},[a("span",[t._v(t._s(t.merchant.leaderTel))])])]],2),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"摊位号"}},[a("span",[t._v(t._s(t.merchant.boothId))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"营业执照号"}},[a("span",[t._v(t._s(t.merchant.loginNumber))])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同签订时间"}},[a("span",[t._v(t._s(t.merchant.createTime))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同开始日期"}},[a("span",[t._v(t._s(t.merchant.rentBeginTime))])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同结束日期"}},[a("span",[t._v(t._s(t.merchant.rentEndTime))])])],1)],1),t._v(" "),a("p",{staticClass:"tips"},[t._v("\n      费用列表\n      ")]),t._v(" "),a("div",{staticClass:"c-table-wrap"},[a("curTable",{attrs:{itemList:t.itemListInfo.refundDTO}})],1),t._v(" "),a("el-form",{ref:"submitData",staticClass:"handle-form",attrs:{"label-width":"110px",model:t.submitData,inline:!0,rules:t.rules,"label-position":"right"}},["apply"===t.pageStatus?[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"未退金额"}},[a("span",[t._v(t._s(t.itemListInfo.noRefundAmount)+"元")])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"已退金额"}},[a("span",[t._v(t._s(t.itemListInfo.retiredAmount)+"元")])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"选择退款金额"}},[a("span",[t._v(t._s(t.itemListInfo.noRefundAmount)+"元")])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"退款金额",prop:"refundAmount"}},[a("el-input",{attrs:{clearable:""},model:{value:t.submitData.refundAmount,callback:function(e){t.$set(t.submitData,"refundAmount","string"==typeof e?e.trim():e)},expression:"submitData.refundAmount"}})],1)],1)],1)]:t._e(),t._v(" "),"review"===t.pageStatus?[a("el-form",{ref:"itemData",attrs:{model:t.itemData,rules:t.rules2,"label-width":"120px",inline:!0,"label-position":"right"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"未退金额"}},[a("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.noRefundAmount)+"元")])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"已退金额"}},[a("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.retiredAmount)+"元")])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"退款金额"}},[a("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.refundAmount)+"元")])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"退款人"}},[a("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.createUserName))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"退款时间"}},[a("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.createTime))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审核结果"}},[a("el-radio-group",{model:{value:t.itemData.conclusion,callback:function(e){t.$set(t.itemData,"conclusion","string"==typeof e?e.trim():e)},expression:"itemData.conclusion"}},[a("el-radio",{attrs:{label:4}},[t._v("通过")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("不通过")])],1)],1)],1)],1),t._v(" "),3===t.itemData.conclusion?a("el-row",[a("el-col",{staticClass:"input-textarea-box",attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注",prop:"comment"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.itemData.comment,callback:function(e){t.$set(t.itemData,"comment","string"==typeof e?e.trim():e)},expression:"itemData.comment"}})],1)],1)],1):t._e()],1)]:t._e(),t._v(" "),"refunds"===t.pageStatus?[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"未退金额"}},[a("span",[t._v(t._s(t.itemListInfo.noRefundAmount)+"元")])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"已退金额"}},[a("span",[t._v(t._s(t.itemListInfo.retiredAmount)+"元")])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"退款金额"}},[a("span",[t._v(t._s(t.itemListInfo.refundAmount)+"元")])])],1)],1)]:t._e()],2),t._v(" "),a("div",{staticClass:"c-detail-footer-box"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v(t._s(t.cBtnName))]),t._v(" "),a("el-button",{staticClass:"cancel-btn",on:{click:t.cancel}},[t._v("取消")])],1),t._v(" "),a("detailDialog",{ref:"detailDialog",attrs:{curType:2,itemDetail:t.itemDetail}})],1)],1)},staticRenderFns:[]},v=a("vSla")(f,d,!1,null,null,null);e.default=v.exports}});
//# sourceMappingURL=95.998e285915670d4b3c4b.js.map