webpackJsonp([85],{"7eqO":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("4YfN"),l=a.n(n),r=a("2A+d"),i=a("eMGh"),s=a("FTcF"),o=a("hm3b"),c=a("TIfe"),p={name:"device",data:function(){return{changeOnSelect:!0,reqData:{equipmentCode:"",marketCode:"",orderStage:"",searchCount:""},pageparams:{currentPage:1},itemList:[],runStatusMap:{0:{text:"正常运行中"},1:{text:"故障维修中"},2:{text:"停止运行"},3:{text:"报废"}},props:{value:"rankId",label:"rankName",children:"data"},options:[],selectedOptions:["",""]}},components:{selectMarket:s.a,pagenation:o.a},created:function(){this.getData(),this.handleItemChange([])},methods:{rightControl:function(e){return this.$store.getters.getPermission(e)},search:function(){this.getData()},getData:function(e){e=e||"";if(this.selectedOptions[1])t=this.selectedOptions[1];else var t=this.selectedOptions[0];var a=l()({},this.reqData,{rankId:t,currentPage:e});Object(c.b)(e,a,r.a.estateDevice,this)},handleItemChange:function(e){var t=this,a=e[e.length-1];this.$http({url:i.b.deviceCategory,method:"get",params:{parentId:a}}).then(function(a){a&&0==a.code&&(e&&0===e.length?(t.options=a.data,t.options.map(function(e,a){return t.$set(e,"data",[])})):e&&1===e.length&&0!=a.data.length&&t.options.filter(function(e,t){e.rankId===a.data[0].parentId&&0===e.data.length&&(e.data=a.data)}))}),this.selectedOptions=e},handlePage:function(e){this.getData(e)}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"g-device-manage"},[a("el-form",{ref:"reqData",staticClass:"c-search-form",attrs:{model:e.reqData,"label-width":"102px",inline:!0,"label-position":"right"}},[a("el-row",[a("el-col",{attrs:{span:8,xs:24}},[a("el-form-item",{attrs:{label:"商场",prop:"marketCode"}},[a("select-market",{attrs:{reqData:e.reqData}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8,xs:24}},[a("el-form-item",{attrs:{label:"设备分类"}},[a("el-cascader",{attrs:{options:e.options,props:e.props,placeholder:"请选择","change-on-select":e.changeOnSelect,clearable:""},on:{change:e.handleItemChange,"active-item-change":e.handleItemChange}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8,xs:24}},[a("el-form-item",{attrs:{label:"设备编号",prop:"equipmentCode"}},[a("el-input",{attrs:{clearable:"",placeholder:"设备唯一标识"},model:{value:e.reqData.equipmentCode,callback:function(t){e.$set(e.reqData,"equipmentCode","string"==typeof t?t.trim():t)},expression:"reqData.equipmentCode"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8,offset:16}},[a("div",{staticClass:"c-footer-btn"},[a("el-button",{staticClass:"btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)])],1),e._v(" "),a("el-row",[a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.rightControl("device_add"),expression:"rightControl('device_add')"}],attrs:{span:8}},[a("router-link",{attrs:{to:{name:"addDevice"}}},[a("el-button",{staticClass:"btn-search btn-add",attrs:{type:"primary"}},[e._v("\n                添加物业设备\n                ")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"c-table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.itemList,align:"center",height:"500",stripe:""}},[a("el-table-column",{attrs:{align:"center",prop:"equipmentId","min-width":"160",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"marketName",label:"所属商场"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"rankName",label:"一级分类"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"rankSecName",label:"二级分类"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"equipmentModel",label:"设备型号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"equipmentName",label:"设备名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"equipmentCode",label:"设备编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"location",label:"安装位置"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"maintenanceNumber",label:"维保次数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"maintenanceCost",label:"维保金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"运行状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.runStatusMap[t.row.runStatus].text)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createName",label:"登记人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"登记时间","min-width":"165"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"165",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{directives:[{name:"show",rawName:"v-show",value:e.rightControl("device_edit"),expression:"rightControl('device_edit')"}],attrs:{to:{name:"editDevice",params:{equipmentCode:t.row.equipmentCode}}}},[a("el-button",{staticClass:"btn-handle",attrs:{type:"primary"}},[e._v("\n                修改\n            ")])],1)]}}])})],1)],1),e._v(" "),a("pagenation",{attrs:{pageparams:e.pageparams,itemList:e.itemList},on:{handlePage:e.handlePage}})],1)},staticRenderFns:[]};var m=a("vSla")(p,d,!1,function(e){a("n7DC")},null,null);t.default=m.exports},n7DC:function(e,t){}});
//# sourceMappingURL=85.f638dbb30fb710b0a1b5.js.map