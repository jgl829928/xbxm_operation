webpackJsonp([94],{"93ui":function(e,t){},Mnbo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("lC5x"),r=a.n(l),n=a("J0Oq"),s=a.n(n),c=a("YH6z"),i=a("pazF"),o=a("vsZy"),u=a("FTcF"),d={name:"contractRefunds",mixins:[o.d],data:function(){return{scheduleDialog:!1,reqData:{merchantName:"",contractBatchNum:"",leaderName:"",refundAuditStatus:"",marketCode:"",leaderTel:"",currentPage:1},payWay:[{label:"微信",value:1},{label:"支付宝",value:2},{label:"POS机刷卡",value:3}],refundAuditStatusList:[{label:"未发生",value:0},{label:"退款待审核",value:1},{label:"审核中",value:2},{label:"审核不通过",value:3},{label:"审核通过",value:4}],paymentStatusList:[{label:"已交款",value:4},{label:"部分交款",value:2}],refundStatusList:[{label:"未发生",value:0},{label:"待退款",value:5},{label:"退款中",value:6},{label:"已退款",value:7},{label:"退款失败",value:8}],itemDetail:{},reviewProgress:[]}},computed:{curProgressActive:function(){for(var e=this.reviewProgress.length;e>0;e--)if(this.reviewProgress[e-1].conclusion&&4===this.reviewProgress[e-1].conclusion.code)return e;return 0}},mounted:function(){this.getList(c.a.contractRefund)},methods:{toPage:function(e,t){this.$router.push({name:e,params:{contractBatchNum:t}})},btnCheck:function(e,t){var a=t.refundAuditStatus.code,l=t.refundStatus.code;return"apply"===e?!!this.checkKey("contractRefunds_2")&&(0===a||3===a):"review"===e?!!this.checkKey("contractRefunds_3")&&(1===a||2===a):"refund"===e?!!this.checkKey("contractRefunds_4")&&(4===a&&6!==l&&7!==l):"schedule"===e?!!this.checkKey("contractRefunds_5")&&(0!==a||7===l):void 0},viewSchedule:function(e){var t=this;return s()(r.a.mark(function a(){var l,n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l={contractBatchNum:e.contractBatchNum,contractCostId:e.contractCostId,refundId:e.refundId},a.next=3,t.$http.get(c.a.refundPlan,{params:l});case 3:(n=a.sent)&&(t.reviewProgress=n.data,t.scheduleDialog=!0);case 5:case"end":return a.stop()}},a,t)}))()},viewContract:function(e){var t=this;return s()(r.a.mark(function a(){var l;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get(c.a.contractDetail+"/"+e);case 2:(l=a.sent)&&(t.itemDetail=l.data,t.$refs.detailDialog.showDialog());case 4:case"end":return a.stop()}},a,t)}))()},search:function(){this.reqData.currentPage=1,this.getList(c.a.contractRefund)}},components:{detailDialog:i.a,selectMarket:u.a}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contract-refunds"},[a("el-form",{ref:"reqData",staticClass:"c-search-form",attrs:{model:e.reqData,"label-width":"102px",inline:!0,"label-position":"right"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商场名称"}},[a("selectMarket",{attrs:{reqData:e.reqData}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商户名称"}},[a("el-input",{attrs:{clearable:""},model:{value:e.reqData.merchantName,callback:function(t){e.$set(e.reqData,"merchantName","string"==typeof t?t.trim():t)},expression:"reqData.merchantName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同批次号"}},[a("el-input",{attrs:{clearable:""},model:{value:e.reqData.contractBatchNum,callback:function(t){e.$set(e.reqData,"contractBatchNum","string"==typeof t?t.trim():t)},expression:"reqData.contractBatchNum"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"缴费状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.reqData.paymentStatus,callback:function(t){e.$set(e.reqData,"paymentStatus","string"==typeof t?t.trim():t)},expression:"reqData.paymentStatus"}},e._l(e.paymentStatusList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"退款审核状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.reqData.refundAuditStatus,callback:function(t){e.$set(e.reqData,"refundAuditStatus","string"==typeof t?t.trim():t)},expression:"reqData.refundAuditStatus"}},e._l(e.refundAuditStatusList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"退款状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.reqData.refundStatus,callback:function(t){e.$set(e.reqData,"refundStatus","string"==typeof t?t.trim():t)},expression:"reqData.refundStatus"}},e._l(e.refundStatusList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"负责人"}},[a("el-input",{attrs:{clearable:""},model:{value:e.reqData.leaderName,callback:function(t){e.$set(e.reqData,"leaderName","string"==typeof t?t.trim():t)},expression:"reqData.leaderName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{clearable:""},model:{value:e.reqData.leaderTel,callback:function(t){e.$set(e.reqData,"leaderTel","string"==typeof t?t.trim():t)},expression:"reqData.leaderTel"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"c-footer-btn"},[a("el-button",{staticClass:"btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)])],1)],1),e._v(" "),a("div",{staticClass:"c-table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.itemList,align:"center",height:"500",stripe:""}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"合同批次号","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{on:{click:function(a){e.viewContract(t.row.contractBatchNum)}}},[e._v(e._s(t.row.contractBatchNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"merchantName",label:"商户名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"leaderName",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"leaderTel",label:"负责人联系电话","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"marketName",label:"商场名称","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"合同生成时间","min-width":"165"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"缴费状态","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.paymentStatus?t.row.paymentStatus.desc:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"退款审核状态","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.refundAuditStatus?t.row.refundAuditStatus.desc:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"退款状态","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.refundStatus?t.row.refundStatus.desc:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundAmount",label:"退款金额"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundApplyTime",label:"退款申请时间","min-width":"165"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundApplyUserName",label:"申请人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundOptTime",label:"退款操作时间","min-width":"165"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundOptUserName",label:"退款操作人","min-width":"90"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundTime",label:"退款成功时间","min-width":"165"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"refundMessage",label:"备注","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"380",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn-handle",attrs:{type:"primary",disabled:!e.btnCheck("apply",t.row)},on:{click:function(a){e.toPage("contractApplyRef",t.row.contractBatchNum)}}},[e._v("\n            退款申请\n          ")]),e._v(" "),a("el-button",{staticClass:"btn-handle",attrs:{type:"primary",disabled:!(e.btnCheck("review",t.row)&&t.row.canAudit)},on:{click:function(a){e.toPage("contractRefReview",t.row.contractBatchNum)}}},[e._v("\n            审核\n          ")]),e._v(" "),a("el-button",{staticClass:"btn-handle",attrs:{type:"primary",disabled:!e.btnCheck("refund",t.row)},on:{click:function(a){e.toPage("contractRef",t.row.contractBatchNum)}}},[e._v("\n            退款\n          ")]),e._v(" "),a("el-button",{staticClass:"btn-handle",attrs:{type:"primary",disabled:!e.btnCheck("schedule",t.row)},on:{click:function(a){e.viewSchedule(t.row)}}},[e._v("查看进度")])]}}])})],1)],1),e._v(" "),a("pagenation",{attrs:{pageparams:e.pageInfo,itemList:e.itemList},on:{handlePage:e.handlePage}}),e._v(" "),a("el-dialog",{staticClass:"m-dialog el-steps-dialog",attrs:{title:"退款审核进度",visible:e.scheduleDialog,width:"30%"},on:{"update:visible":function(t){e.scheduleDialog=t}}},[a("el-steps",{attrs:{space:200,active:e.curProgressActive,"align-center":""}},e._l(e.reviewProgress,function(e,t){return a("el-step",{key:t,attrs:{title:e.auditRoles,description:e.auditorName}})})),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-save",attrs:{type:"primary"},on:{click:function(t){e.scheduleDialog=!1}}},[e._v("关闭")])],1)],1),e._v(" "),a("detailDialog",{ref:"detailDialog",attrs:{curType:2,itemDetail:e.itemDetail}})],1)},staticRenderFns:[]};var p=a("vSla")(d,m,!1,function(e){a("93ui")},"data-v-0480c062",null);t.default=p.exports}});
//# sourceMappingURL=94.232a6537ab5b3acebd8c.js.map