{"version":3,"sources":["webpack:///src/views/engineering_manage/engineering_logs/index.vue","webpack:///./src/views/engineering_manage/engineering_logs/index.vue?c451","webpack:///./src/views/engineering_manage/engineering_logs/index.vue","webpack:///./src/api/engineering.js"],"names":["engineering_logs","data","defineProperty_default","rules","dialogFormVisible","pickerOptions","shortcuts","text","onClick","picker","end","Date","start","setTime","getTime","$emit","pageparams","time","reqData","creater","followEndDate","followStartDate","engineeringName","pageSize","currentPage","itemList","engNameList","add_data","completePercent","description","followDate","required","message","trigger","max","pattern","components","pagenation","name","methods","percent_valid","this","isNaN","parseInt","indexMethod","index","getEngName","_this","$http","get","engineering","engName","params","then","res","code","getListData","_this2","logList","page","search","handlePage","val","add","_this3","setTimeout","$refs","resetFields","save","_this4","validate","valid","post","addLog","$message","type","cancel","created","engineering_manage_engineering_logs","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","inline","label-position","span","xs","label","prop","min-width","clearable","value","callback","$$v","$set","trim","expression","_v","picker-options","range-separator","start-placeholder","default-time","end-placeholder","align","value-format","icon","on","click","directives","rawName","$store","getters","getPermission","staticStyle","width","stripe","height","title","visible","update:visible","$event","gutter","placeholder","_l","item","key","blur","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","ApiSetting","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","maintainList","addmaintain"],"mappings":"yLAwGAA,GACAC,KADA,WAEA,OAAAC,KACAC,SACAC,mBAAA,EACAC,eACAC,YAEAC,KAAA,OACAC,QAFA,SAEAC,GACA,IAAAC,EAAA,IAAAC,KACAC,EAAA,IAAAD,KACAC,EAAAC,QAAAD,EAAAE,UAAA,QACAL,EAAAM,MAAA,QAAAH,EAAAF,OAIAH,KAAA,QACAC,QAFA,SAEAC,GACA,IAAAC,EAAA,IAAAC,KACAC,EAAA,IAAAD,KACAC,EAAAC,QAAAD,EAAAE,UAAA,QACAL,EAAAM,MAAA,QAAAH,EAAAF,OAIAH,KAAA,QACAC,QAFA,SAEAC,GACA,IAAAC,EAAA,IAAAC,KACAC,EAAA,IAAAD,KACAC,EAAAC,QAAAD,EAAAE,UAAA,QACAL,EAAAM,MAAA,QAAAH,EAAAF,QAKAM,cACAC,QACAC,SACAC,QAAA,GACAC,cAAA,GACAC,gBAAA,GACAC,gBAAA,GACAC,SAAA,GACAC,YAAA,GAEAC,YAEAC,eAEAC,UACAC,gBAAA,EACAC,YAAA,GACAP,gBAAA,GACAQ,WAAA,KApDA,SAuDAR,kBACAS,UAAA,EAAAC,QAAA,UAAAC,QAAA,SAEAJ,cACAE,UAAA,EAAAE,QAAA,SAEAC,IAAA,IACAF,QAAA,mBACAC,QAAA,SAGAL,kBACAG,UAAA,EAAAC,QAAA,UAAAC,QAAA,SACAE,QAAA,+BAAAH,QAAA,aAAAC,QAAA,SAEAH,aACAC,UAAA,EAAAC,QAAA,UAAAC,QAAA,YAKAG,YAAAC,qBAAA,GACAC,KAAA,kBACAC,SAEAC,cAFA,WAGAC,KAAAd,SAAAC,kBACAc,MAAAD,KAAAd,SAAAC,iBACAa,KAAAd,SAAAC,gBAAA,IAEAa,KAAAd,SAAAC,gBAAAe,SACAF,KAAAd,SAAAC,mBAKAgB,YAbA,SAaAC,GACA,WAAAJ,KAAAvB,QAAAM,YAAA,GAAAqB,EAAA,GAGAC,WAjBA,WAiBA,IAAAC,EAAAN,KACAA,KAAAO,MAAAC,IAAAC,EAAA,EAAAC,SAAAC,OAAAX,KAAAvB,UAAAmC,KAAA,SAAAC,GACAA,GAAA,GAAAA,EAAAC,MAAAD,EAAArD,KACA8C,EAAArB,YAAA4B,EAAArD,KAEA8C,EAAArB,kBAMA8B,YA5BA,WA4BA,IAAAC,EAAAhB,KACAA,KAAAO,MAAAC,IAAAC,EAAA,EAAAQ,SAAAN,OAAAX,KAAAvB,UAAAmC,KAAA,SAAAC,GACAA,GAAA,GAAAA,EAAAC,MAAAD,EAAArD,MACAwD,EAAAhC,SAAA6B,EAAArD,KACAwD,EAAAzC,WAAAsC,EAAAK,MAEAF,EAAAhC,eAIAmC,OAtCA,WAuCAnB,KAAAvB,QAAAM,YAAA,EACAiB,KAAAvB,QAAAG,gBAAAoB,KAAAxB,KAAAwB,KAAAxB,KAAA,MACAwB,KAAAvB,QAAAE,cAAAqB,KAAAxB,KAAAwB,KAAAxB,KAAA,MACAwB,KAAAe,eAGAK,WA7CA,SA6CAC,GACArB,KAAAvB,QAAAM,YAAAsC,EACArB,KAAAe,eAGAO,IAlDA,WAkDA,IAAAC,EAAAvB,KACAA,KAAArC,mBAAA,EACA6D,WAAA,WACAD,EAAAE,MAAA,SAAAC,eACA,KAGAC,KAzDA,WAyDA,IAAAC,EAAA5B,KACAA,KAAAyB,MAAA,SAAAI,SAAA,SAAAC,GACAA,GACAF,EAAArB,MAAAwB,KAAAtB,EAAA,EAAAuB,OAAAJ,EAAA1C,UAAA0B,KAAA,SAAAC,GACAA,GAAA,GAAAA,EAAAC,OACAc,EAAAK,UACA1C,QAAA,OACA2C,KAAA,YAEAN,EAAAjE,mBAAA,EACAiE,EAAAb,oBAMAoB,OAzEA,WA0EAnC,KAAArC,mBAAA,IAGAyE,QA7JA,WA+JApC,KAAAe,cACAf,KAAAK,eCrQAgC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAvC,KAAawC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,sCAAgDF,EAAA,WAAgBG,IAAA,UAAAD,YAAA,gBAAAE,OAAiDC,MAAAR,EAAA9D,QAAAuE,cAAA,QAAAC,QAAA,EAAAC,iBAAA,WAAkFR,EAAA,UAAAA,EAAA,UAA4BI,OAAOK,KAAA,EAAAC,GAAA,MAAkBV,EAAA,gBAAqBI,OAAOO,MAAA,OAAAC,KAAA,kBAAAC,YAAA,SAA2Db,EAAA,YAAiBI,OAAOU,UAAA,IAAeT,OAAQU,MAAAlB,EAAA9D,QAAA,gBAAAiF,SAAA,SAAAC,GAA6DpB,EAAAqB,KAAArB,EAAA9D,QAAA,mCAAAkF,IAAAE,OAAAF,IAAqFG,WAAA,8BAAuC,OAAAvB,EAAAwB,GAAA,KAAArB,EAAA,UAAmCI,OAAOK,KAAA,EAAAC,GAAA,MAAkBV,EAAA,gBAAqBI,OAAOO,MAAA,MAAAC,KAAA,aAAgCZ,EAAA,YAAiBI,OAAOU,UAAA,IAAeT,OAAQU,MAAAlB,EAAA9D,QAAA,QAAAiF,SAAA,SAAAC,GAAqDpB,EAAAqB,KAAArB,EAAA9D,QAAA,2BAAAkF,IAAAE,OAAAF,IAA6EG,WAAA,sBAA+B,WAAAvB,EAAAwB,GAAA,KAAArB,EAAA,UAAAA,EAAA,UAAoDI,OAAOK,KAAA,MAAWT,EAAA,gBAAqBI,OAAOO,MAAA,SAAAC,KAAA,UAAgCZ,EAAA,kBAAuBI,OAAOZ,KAAA,YAAA8B,iBAAAzB,EAAA3E,cAAAqG,kBAAA,IAAAC,oBAAA,QAAAC,gBAAA,uBAAAC,kBAAA,QAAAC,MAAA,QAAAC,eAAA,cAAsNvB,OAAQU,MAAAlB,EAAA,KAAAmB,SAAA,SAAAC,GAA0CpB,EAAA/D,KAAAmF,GAAaG,WAAA,WAAoB,OAAAvB,EAAAwB,GAAA,KAAArB,EAAA,UAAmCI,OAAOK,KAAA,MAAWT,EAAA,OAAYE,YAAA,iBAA2BF,EAAA,aAAkBE,YAAA,aAAAE,OAAgCZ,KAAA,UAAAqC,KAAA,kBAAyCC,IAAKC,MAAAlC,EAAApB,UAAoBoB,EAAAwB,GAAA,sBAAAxB,EAAAwB,GAAA,KAAArB,EAAA,OAAAA,EAAA,aAAqEgC,aAAa7E,KAAA,OAAA8E,QAAA,SAAAlB,MAAAlB,EAAAqC,OAAAC,QAAAC,cAAA,oBAAAhB,WAAA,qDAAwJlB,YAAA,qBAAAE,OAA0CZ,KAAA,WAAiBsC,IAAKC,MAAAlC,EAAAjB,OAAiBiB,EAAAwB,GAAA,YAAAxB,EAAAwB,GAAA,KAAArB,EAAA,OAA2CE,YAAA,iBAA2BF,EAAA,YAAiBqC,aAAaC,MAAA,QAAelC,OAAQtF,KAAA+E,EAAAvD,SAAAqF,MAAA,SAAAY,OAAA,GAAAC,OAAA,SAAiExC,EAAA,mBAAwBI,OAAOuB,MAAA,SAAAnC,KAAA,QAAAmB,MAAA,KAAA2B,MAAA,KAAA5E,MAAAmC,EAAApC,eAAmFoC,EAAAwB,GAAA,KAAArB,EAAA,mBAAoCI,OAAOuB,MAAA,SAAAf,KAAA,kBAAAD,MAAA,UAA0Dd,EAAAwB,GAAA,KAAArB,EAAA,mBAAoCI,OAAOuB,MAAA,SAAAf,KAAA,SAAAD,MAAA,UAAiDd,EAAAwB,GAAA,KAAArB,EAAA,mBAAoCI,OAAOuB,MAAA,SAAAf,KAAA,aAAAD,MAAA,UAAqDd,EAAAwB,GAAA,KAAArB,EAAA,mBAAoCI,OAAOuB,MAAA,SAAAf,KAAA,kBAAAD,MAAA,WAA2Dd,EAAAwB,GAAA,KAAArB,EAAA,mBAAoCI,OAAOuB,MAAA,SAAAf,KAAA,cAAAD,MAAA,YAAwDd,EAAAwB,GAAA,KAAArB,EAAA,mBAAoCI,OAAOuB,MAAA,SAAAf,KAAA,aAAAD,MAAA,UAAqDd,EAAAwB,GAAA,KAAArB,EAAA,mBAAoCI,OAAOuB,MAAA,SAAAf,KAAA,UAAAD,MAAA,UAAiD,OAAAd,EAAAwB,GAAA,KAAArB,EAAA,OAAgCE,YAAA,mBAA6BF,EAAA,cAAmBI,OAAOvE,WAAAgE,EAAAhE,WAAAS,SAAAuD,EAAAvD,UAAoDwF,IAAKpD,WAAAmB,EAAAnB,eAA6B,GAAAmB,EAAAwB,GAAA,KAAArB,EAAA,aAAkCE,YAAA,sBAAAE,OAAyCqC,MAAA,UAAAC,QAAA7C,EAAA5E,mBAAkD6G,IAAKa,iBAAA,SAAAC,GAAkC/C,EAAA5E,kBAAA2H,MAA+B5C,EAAA,WAAgBG,IAAA,WAAAD,YAAA,gBAAAE,OAAkDC,MAAAR,EAAArD,SAAAxB,MAAA6E,EAAA7E,MAAAsF,cAAA,QAAAC,QAAA,EAAAC,iBAAA,WAAqGR,EAAA,UAAeI,OAAOyC,OAAA,MAAa7C,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,gBAAqBI,OAAOO,MAAA,OAAAC,KAAA,qBAAyCZ,EAAA,aAAkBI,OAAOU,UAAA,GAAAgC,YAAA,OAAmCzC,OAAQU,MAAAlB,EAAArD,SAAA,gBAAAwE,SAAA,SAAAC,GAA8DpB,EAAAqB,KAAArB,EAAArD,SAAA,kBAAAyE,IAA+CG,WAAA,6BAAwCvB,EAAAkD,GAAAlD,EAAA,qBAAAmD,EAAAtF,GAA+C,OAAAsC,EAAA,aAAuBiD,IAAAvF,EAAA0C,OAAiBO,MAAAqC,EAAAjC,MAAAiC,SAA6B,WAAAnD,EAAAwB,GAAA,KAAArB,EAAA,UAAwCI,OAAOyC,OAAA,MAAa7C,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,gBAAqBI,OAAOO,MAAA,OAAAC,KAAA,gBAAoCZ,EAAA,kBAAuBI,OAAOZ,KAAA,OAAAsD,YAAA,OAAAlB,eAAA,cAA+DvB,OAAQU,MAAAlB,EAAArD,SAAA,WAAAwE,SAAA,SAAAC,GAAyDpB,EAAAqB,KAAArB,EAAArD,SAAA,aAAAyE,IAA0CG,WAAA,0BAAmC,WAAAvB,EAAAwB,GAAA,KAAArB,EAAA,UAAuCI,OAAOyC,OAAA,MAAa7C,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,gBAAqBI,OAAOO,MAAA,QAAAC,KAAA,qBAA0CZ,EAAA,YAAiBI,OAAOU,UAAA,IAAegB,IAAKoB,KAAArD,EAAAxC,eAAyBgD,OAAQU,MAAAlB,EAAArD,SAAA,gBAAAwE,SAAA,SAAAC,GAA8DpB,EAAAqB,KAAArB,EAAArD,SAAA,mCAAAyE,IAAAE,OAAAF,IAAsFG,WAAA,+BAAwC,GAAAvB,EAAAwB,GAAA,KAAArB,EAAA,QAA6BE,YAAA,mBAA6BL,EAAAwB,GAAA,eAAAxB,EAAAwB,GAAA,KAAArB,EAAA,UAAiDI,OAAOyC,OAAA,MAAa7C,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,gBAAqBE,YAAA,qBAAAE,OAAwCO,MAAA,SAAAC,KAAA,iBAAuCZ,EAAA,YAAiBI,OAAOZ,KAAA,WAAAsB,UAAA,IAAiCT,OAAQU,MAAAlB,EAAArD,SAAA,YAAAwE,SAAA,SAAAC,GAA0DpB,EAAAqB,KAAArB,EAAArD,SAAA,+BAAAyE,IAAAE,OAAAF,IAAkFG,WAAA,2BAAoC,eAAAvB,EAAAwB,GAAA,KAAArB,EAAA,OAAwCE,YAAA,gBAAAE,OAAmC+C,KAAA,UAAgBA,KAAA,WAAenD,EAAA,aAAkBE,YAAA,WAAAE,OAA8BZ,KAAA,WAAiBsC,IAAKC,MAAAlC,EAAAZ,QAAkBY,EAAAwB,GAAA,QAAAxB,EAAAwB,GAAA,KAAArB,EAAA,aAA6CE,YAAA,YAAAE,OAA+BZ,KAAA,WAAiBsC,IAAKC,MAAAlC,EAAAJ,UAAoBI,EAAAwB,GAAA,qBAE78K+B,oBCEjB,IAcAC,EAdAC,EAAA,OAcAC,CACA1I,EACA8E,GATA,EAXA,SAAA6D,GACAF,EAAA,QACAA,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA,2DCXMK,QAAAC,OAZFC,8CAEAC,6CAEAtF,oCAEAe,mCAEAtB,mDAKJyF,EAAA","file":"static/js/13.b7ecdd6793ebd185ccff.js","sourcesContent":["<template>\r\n  <div class=\"contract-receipts g-engineer-main\">\r\n    <el-form class=\"c-search-form\" :model=\"reqData\" ref=\"reqData\" label-width=\"102px\" :inline=\"true\" label-position=\"right\">\r\n      <el-row >\r\n        <el-col :span=\"8\" :xs=\"24\">\r\n          <el-form-item label=\"工程名称\" prop=\"engineeringName\" min-width=\"120\">\r\n            <el-input clearable v-model.trim=\"reqData.engineeringName\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\" :xs=\"24\">\r\n          <el-form-item label=\"添加人\" prop=\"creater\">\r\n            <el-input clearable v-model.trim=\"reqData.creater\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row >\r\n        <el-col :span=\"12\">\r\n          <el-form-item label=\"跟进起止时间\" prop=\"time\">\r\n            <el-date-picker v-model=\"time\" type=\"daterange\" :picker-options=\"pickerOptions\" range-separator=\"至\" start-placeholder=\"年/月/日\"\r\n              :default-time=\"['00:00:00', '23:59:59']\" end-placeholder=\"年/月/日\" align=\"right\" value-format=\"yyyy-MM-dd\">\r\n            </el-date-picker>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n          <div class=\"c-footer-btn\">\r\n            <el-button class=\"btn-search\" type=\"primary\" icon=\"el-icon-search\" @click=\"search\">查询</el-button>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n    <div>\r\n      <el-button class=\"btn-search btn-add\" v-show=\"$store.getters.getPermission('engineeringLog_2')\" type=\"primary\" @click=\"add\">添加</el-button>\r\n    </div>\r\n    <div class=\"c-table-wrap\">\r\n      <el-table :data=\"itemList\" style=\"width: 100%\" align=\"center\" stripe height=\"500\">\r\n        <el-table-column align=\"center\" type=\"index\" label=\"序号\" width=\"50\" :index=\"indexMethod\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"engineeringName\" label=\"工程名称\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"market\" label=\"商场名称\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"followDate\" label=\"跟进日期\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"completePercent\" label=\"完成百分比\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"description\" label=\"工程进度描述\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"createTime\" label=\"登记日期\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"creater\" label=\"登记人\">\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <div class=\"pagination-box\">\r\n      <pagenation :pageparams=\"pageparams\" :itemList=\"itemList\" @handlePage=\"handlePage\"></pagenation>\r\n    </div>\r\n\r\n    <el-dialog title=\"工程日志-添加\" :visible.sync=\"dialogFormVisible\" class=\"m-dialog log_dialog\">\r\n      <el-form class=\"c-search-form\" :model=\"add_data\" ref=\"add_form\" :rules=\"rules\" label-width=\"110px\" :inline=\"true\" label-position=\"right\">\r\n        <el-row :gutter=\"32\">\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"工程名称\" prop=\"engineeringName\">\r\n              <el-select v-model=\"add_data.engineeringName\" clearable placeholder=\"请选择\">\r\n                <el-option v-for=\"(item, index) in engNameList\" :key=\"index\" :label=\"item\" :value=\"item\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"32\">\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"跟进日期\" prop=\"followDate\">\r\n              <el-date-picker v-model=\"add_data.followDate\" type=\"date\" placeholder=\"选择日期\" value-format=\"yyyy-MM-dd\">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"32\">\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"完成百分比\" prop=\"completePercent\">\r\n              <el-input clearable v-model.trim=\"add_data.completePercent\" @blur=\"percent_valid\"></el-input>\r\n            </el-form-item>\r\n            <span class=\"u-special-unit\">%</span>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"32\">\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"工程进度描述\" prop=\"description\" class=\"u-special-textarea\">\r\n              <el-input type=\"textarea\" clearable v-model.trim=\"add_data.description\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button class=\"btn-save\" type=\"primary\" @click=\"save\">保存</el-button>\r\n        <el-button class=\"btn-reset\" type=\"primary\" @click=\"cancel\">取消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ApiSetting from \"../../../api/engineering\";\r\n  import pagenation from \"@/components/pagenation\";\r\n  export default {\r\n    data() {\r\n      return {\r\n        rules: {},\r\n        dialogFormVisible: false,\r\n        pickerOptions: {\r\n          shortcuts: [\r\n            {\r\n              text: \"最近一周\",\r\n              onClick(picker) {\r\n                const end = new Date();\r\n                const start = new Date();\r\n                start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n                picker.$emit(\"pick\", [start, end]);\r\n              }\r\n            },\r\n            {\r\n              text: \"最近一个月\",\r\n              onClick(picker) {\r\n                const end = new Date();\r\n                const start = new Date();\r\n                start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n                picker.$emit(\"pick\", [start, end]);\r\n              }\r\n            },\r\n            {\r\n              text: \"最近三个月\",\r\n              onClick(picker) {\r\n                const end = new Date();\r\n                const start = new Date();\r\n                start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n                picker.$emit(\"pick\", [start, end]);\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        pageparams: {},\r\n        time: [],\r\n        reqData: {\r\n          creater: \"\",\r\n          followEndDate: \"\",\r\n          followStartDate: \"\",\r\n          engineeringName: \"\",\r\n          pageSize: 20,\r\n          currentPage: 1\r\n        },\r\n        itemList: [],\r\n        // 工程名称\r\n        engNameList: [],\r\n        // 添加表单数据\r\n        add_data: {\r\n          completePercent: 0,\r\n          description: \"\",\r\n          engineeringName: \"\",\r\n          followDate: \"\"\r\n        },\r\n        rules: {\r\n          engineeringName: [\r\n            { required: true, message: \"请选择工程名称\", trigger: \"blur\" }\r\n          ],\r\n          description: [\r\n            { required: false, trigger: \"blur\" },\r\n            {\r\n              max: 100,\r\n              message: \"工程进度描述不能多于100个字符\",\r\n              trigger: \"blur\"\r\n            }\r\n          ],\r\n          completePercent: [\r\n            { required: true, message: \"请输入工程进度\", trigger: \"blur\" },\r\n            {pattern:/(^[1-9][0-9]$|^[0-9]$|^100$)/, message: '请输入正确的工程进度', trigger: 'blur'},\r\n          ],\r\n          followDate: [\r\n            { required: true, message: \"请选择跟进日期\", trigger: \"blur\" }\r\n          ]\r\n        }\r\n      };\r\n    },\r\n    components: { pagenation },\r\n    name: \"engineeringLogs\",\r\n    methods: {\r\n      // 完成百分比校验\r\n      percent_valid() {\r\n        if (this.add_data.completePercent) {\r\n          if (isNaN(this.add_data.completePercent)) {\r\n            this.add_data.completePercent = \"0\";\r\n          } else {\r\n            this.add_data.completePercent = parseInt(\r\n              this.add_data.completePercent\r\n            );\r\n          }\r\n        }\r\n      },\r\n      indexMethod(index) {\r\n        return (this.reqData.currentPage - 1) * 20 + index + 1;\r\n      },\r\n      // 获取工程名称\r\n      getEngName() {\r\n        this.$http.get(ApiSetting.engName, { params: this.reqData }).then(res => {\r\n          if (res && res.code == 0 && res.data) {\r\n            this.engNameList = res.data;\r\n          } else {\r\n            this.engNameList = [];\r\n          }\r\n        });\r\n      },\r\n\r\n      // 获取列表数据\r\n      getListData() {\r\n        this.$http.get(ApiSetting.logList, { params: this.reqData }).then(res => {\r\n          if (res && res.code == 0 && res.data) {\r\n            this.itemList = res.data;\r\n            this.pageparams = res.page;\r\n          } else {\r\n            this.itemList = [];\r\n          }\r\n        });\r\n      },\r\n      search() {\r\n        this.reqData.currentPage = 1;\r\n        this.reqData.followStartDate = this.time ? this.time[0] : \"\";\r\n        this.reqData.followEndDate = this.time ? this.time[1] : \"\";\r\n        this.getListData();\r\n      },\r\n      // 翻页\r\n      handlePage(val) {\r\n        this.reqData.currentPage = val;\r\n        this.getListData();\r\n      },\r\n      // 添加弹窗\r\n      add() {\r\n        this.dialogFormVisible = true;\r\n        setTimeout(() => {\r\n          this.$refs[\"add_form\"].resetFields();\r\n        }, 50);\r\n      },\r\n      // 保存\r\n      save() {\r\n        this.$refs[\"add_form\"].validate(valid => {\r\n          if (valid) {\r\n            this.$http.post(ApiSetting.addLog, this.add_data).then(res => {\r\n              if (res && res.code == 0) {\r\n                this.$message({\r\n                  message: \"保存成功\",\r\n                  type: \"success\"\r\n                });\r\n                this.dialogFormVisible = false;\r\n                this.getListData();\r\n              }\r\n            });\r\n          }\r\n        });\r\n      },\r\n      cancel() {\r\n        this.dialogFormVisible = false;\r\n      }\r\n    },\r\n    created() {\r\n      // 获取列表信息\r\n      this.getListData();\r\n      this.getEngName();\r\n    }\r\n  };\r\n</script>\r\n<style scoped lang=\"less\">\r\n  .g-engineer-main {\r\n    .u-add-btn {\r\n      margin-left: 20px;\r\n    }\r\n    .u-special-unit {\r\n      display: inline-block;\r\n      margin-top: 10px;\r\n    }\r\n    \r\n  }\r\n</style>\r\n<style lang=\"less\">\r\n  .u-special-textarea .el-form-item__content {\r\n    width: 300px;\r\n  }\r\n  .g-engineer-main {\r\n    .el-range-editor .el-range-input{\r\n      line-height:30px;\r\n    }\r\n  }\r\n  .log_dialog {\r\n    .el-date-editor .el-input__inner {\r\n      width: 170px !important;\r\n    }\r\n    .el-textarea__inner{\r\n      width:300px  !important;\r\n    }\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/engineering_manage/engineering_logs/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"contract-receipts g-engineer-main\"},[_c('el-form',{ref:\"reqData\",staticClass:\"c-search-form\",attrs:{\"model\":_vm.reqData,\"label-width\":\"102px\",\"inline\":true,\"label-position\":\"right\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"工程名称\",\"prop\":\"engineeringName\",\"min-width\":\"120\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.reqData.engineeringName),callback:function ($$v) {_vm.$set(_vm.reqData, \"engineeringName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.engineeringName\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"添加人\",\"prop\":\"creater\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.reqData.creater),callback:function ($$v) {_vm.$set(_vm.reqData, \"creater\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.creater\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"跟进起止时间\",\"prop\":\"time\"}},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"picker-options\":_vm.pickerOptions,\"range-separator\":\"至\",\"start-placeholder\":\"年/月/日\",\"default-time\":['00:00:00', '23:59:59'],\"end-placeholder\":\"年/月/日\",\"align\":\"right\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.time),callback:function ($$v) {_vm.time=$$v},expression:\"time\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"c-footer-btn\"},[_c('el-button',{staticClass:\"btn-search\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")])],1)])],1)],1),_vm._v(\" \"),_c('div',[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$store.getters.getPermission('engineeringLog_2')),expression:\"$store.getters.getPermission('engineeringLog_2')\"}],staticClass:\"btn-search btn-add\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.add}},[_vm._v(\"添加\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"c-table-wrap\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.itemList,\"align\":\"center\",\"stripe\":\"\",\"height\":\"500\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"type\":\"index\",\"label\":\"序号\",\"width\":\"50\",\"index\":_vm.indexMethod}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"engineeringName\",\"label\":\"工程名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"market\",\"label\":\"商场名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"followDate\",\"label\":\"跟进日期\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"completePercent\",\"label\":\"完成百分比\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"description\",\"label\":\"工程进度描述\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"createTime\",\"label\":\"登记日期\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"creater\",\"label\":\"登记人\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination-box\"},[_c('pagenation',{attrs:{\"pageparams\":_vm.pageparams,\"itemList\":_vm.itemList},on:{\"handlePage\":_vm.handlePage}})],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"m-dialog log_dialog\",attrs:{\"title\":\"工程日志-添加\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"add_form\",staticClass:\"c-search-form\",attrs:{\"model\":_vm.add_data,\"rules\":_vm.rules,\"label-width\":\"110px\",\"inline\":true,\"label-position\":\"right\"}},[_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":\"工程名称\",\"prop\":\"engineeringName\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.add_data.engineeringName),callback:function ($$v) {_vm.$set(_vm.add_data, \"engineeringName\", $$v)},expression:\"add_data.engineeringName\"}},_vm._l((_vm.engNameList),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item,\"value\":item}})}))],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":\"跟进日期\",\"prop\":\"followDate\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.add_data.followDate),callback:function ($$v) {_vm.$set(_vm.add_data, \"followDate\", $$v)},expression:\"add_data.followDate\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":\"完成百分比\",\"prop\":\"completePercent\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},on:{\"blur\":_vm.percent_valid},model:{value:(_vm.add_data.completePercent),callback:function ($$v) {_vm.$set(_vm.add_data, \"completePercent\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"add_data.completePercent\"}})],1),_vm._v(\" \"),_c('span',{staticClass:\"u-special-unit\"},[_vm._v(\"%\")])],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{staticClass:\"u-special-textarea\",attrs:{\"label\":\"工程进度描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"clearable\":\"\"},model:{value:(_vm.add_data.description),callback:function ($$v) {_vm.$set(_vm.add_data, \"description\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"add_data.description\"}})],1)],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"btn-save\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-reset\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5e2dec0c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/engineering_manage/engineering_logs/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5e2dec0c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5e2dec0c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5e2dec0c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5e2dec0c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/engineering_manage/engineering_logs/index.vue\n// module id = null\n// module chunks = ","\r\n\r\nconst serviceModule = {\r\n    // 工程维护\r\n    maintainList:`/business/engineering/maintain`,\r\n    // 工程维护操作\r\n    addmaintain:`/business/engineering/maintain`,\r\n    // 工程日志\r\n    logList:`/business/engineering/log`,\r\n    // 添加工程日志\r\n    addLog:`/business/engineering/log`,\r\n    // 获取工程名称\r\n    engName:`/business/engineering/maintain/engname`,\r\n\r\n\r\n}\r\nconst ApiSetting = { ...serviceModule }\r\nexport default ApiSetting\n\n\n// WEBPACK FOOTER //\n// ./src/api/engineering.js"],"sourceRoot":""}