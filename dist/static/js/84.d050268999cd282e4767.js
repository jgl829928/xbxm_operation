webpackJsonp([84],{RTLv:function(e,t){},nTAk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),s=a("Gu7T"),l=a.n(s),c=a("//Fk"),o=a.n(c),i=a("exGp"),m=a.n(i),p=a("hm3b"),d=a("FTcF"),u=a("hVDB"),g={name:"merchantManage",components:{Pagenation:p.a,selectMarket:d.a},data:function(){return{pageDefault:{totalRecords:0,currentPage:1,pageSize:20},pageParams:{marketCode:"",merchantCode:"",merchantName:"",brandCode:"",merchantNature:"",status:!0,currentPage:1},storeNameOption:[],brandOption:[],merchantNatureList:[{code:1,desc:"个人"},{code:2,desc:"企业"}],tableList:[]}},methods:{getOptionData:function(){var e=this;return m()(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$http.get(u.a.allStore),t.next=3,e.$http.get(u.a.allBrand);case 3:r=t.sent,o.a.all([a,r]).then(function(t){0===t[0].code&&(e.storeNameOption=[],e.storeNameOption=[].concat(l()(t[0].data))),0===t[1].code&&(e.brandOption=[],e.brandOption=[].concat(l()(t[1].data)))});case 5:case"end":return t.stop()}},t,e)}))()},getPageList:function(e){var t=this;return m()(n.a.mark(function a(){var r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.pageParams.currentPage=e||1,t.pageDefault.currentPage=e||1,a.next=4,t.$http.get(u.a.merchants,{params:t.pageParams});case 4:0===(r=a.sent).code&&(t.pageDefault.totalRecords=r.page.totalRecords,t.tableList=[],t.tableList=[].concat(l()(r.data)));case 6:case"end":return a.stop()}},a,t)}))()},deleteMerchant:function(e){var t=this;return m()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.delete(u.a.merchants+"/"+e).then(function(e){0===e.code&&(t.$message.success("删除成功"),t.getPageList())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})});case 1:case"end":return a.stop()}},a,t)}))()},modify:function(e){this.$router.push({name:"editMerchant",params:{id:e}})},indexMethod:function(e){return e+20*(this.pageParams.currentPage-1)+1}},beforeMount:function(){this.getOptionData(),this.getPageList()}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contract-receipts"},[a("el-form",{ref:"reqData",staticClass:"c-search-form",attrs:{model:e.pageParams,"label-width":"102px","label-position":"right",inline:!0}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商场",prop:"skuCode"}},[a("selectMarket",{attrs:{reqData:e.pageParams}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商户编号"}},[a("el-input",{attrs:{clearable:""},model:{value:e.pageParams.merchantCode,callback:function(t){e.$set(e.pageParams,"merchantCode","string"==typeof t?t.trim():t)},expression:"pageParams.merchantCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商户名称"}},[a("el-input",{attrs:{clearable:""},model:{value:e.pageParams.merchantName,callback:function(t){e.$set(e.pageParams,"merchantName","string"==typeof t?t.trim():t)},expression:"pageParams.merchantName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"经营品牌"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.pageParams.brandCode,callback:function(t){e.$set(e.pageParams,"brandCode","string"==typeof t?t.trim():t)},expression:"pageParams.brandCode"}},e._l(e.brandOption,function(e,t){return a("el-option",{key:t,attrs:{label:e.brandName,value:e.brandCode}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商户性质"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.pageParams.merchantNature,callback:function(t){e.$set(e.pageParams,"merchantNature","string"==typeof t?t.trim():t)},expression:"pageParams.merchantNature"}},e._l(e.merchantNatureList,function(e,t){return a("el-option",{key:t,attrs:{label:e.desc,value:e.code}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"c-footer-btn"},[a("el-button",{staticClass:"btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.getPageList(1)}}},[e._v("查询")])],1)])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.$store.getters.getPermission("merchantManage_2"),expression:"$store.getters.getPermission('merchantManage_2')"}]},[a("router-link",{attrs:{to:{name:"addMerchant"}}},[a("el-button",{staticClass:"btn-search btn-add",attrs:{type:"primary"}},[e._v("添加商户")])],1)],1),e._v(" "),a("div",{staticClass:"c-table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList,align:"center",stripe:"",height:"500"}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号","min-width":"50",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"merchantCode","min-width":"140",label:"商户编号"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",label:"商户名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$store.getters.getPermission("merchantManage_5")?a("router-link",{attrs:{to:{name:"merchantInfo",params:{id:t.row.merchantCode}}}},[e._v(e._s(t.row.merchantName))]):a("span",[e._v(e._s(t.row.merchantName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"marketName",label:"商场"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"mainBrandName",label:"经营品牌"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"managementTypeName",label:"经营类别"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"merchantNature.desc",label:"商户性质"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"leaderName",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"120",align:"center",prop:"leaderTel",label:"负责人联系电话"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime","min-width":"165",label:"登记时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","min-width":"190",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn-handle",attrs:{disabled:!e.$store.getters.getPermission("merchantManage_3"),type:"primary"},on:{click:function(a){e.modify(t.row.merchantCode)}}},[e._v("修改")]),e._v(" "),a("el-button",{staticClass:"btn-handle btn-add",attrs:{disabled:!e.$store.getters.getPermission("merchantManage_4"),type:"primary"},on:{click:function(a){e.deleteMerchant(t.row.merchantCode)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("Pagenation",{attrs:{pageparams:e.pageDefault,itemList:e.tableList},on:{handlePage:e.getPageList}})],1)},staticRenderFns:[]};var b=a("VU/8")(g,h,!1,function(e){a("RTLv")},"data-v-3b748014",null);t.default=b.exports}});
//# sourceMappingURL=84.d050268999cd282e4767.js.map