{"version":3,"sources":["webpack:///src/views/estate_manage/device_manage/add_device/index.vue","webpack:///./src/views/estate_manage/device_manage/add_device/index.vue?b896","webpack:///./src/views/estate_manage/device_manage/add_device/index.vue"],"names":["add_device","name","data","checkEdit","dialogFormVisibleFir","reqData","equipmentCode","marketCode","equipmentModel","equipmentId","equipmentName","location","rankId","runStatus","firstId","categotyListFir","uploadUrl","basicApi_estateApi","imageUpload","categotyListSec","deviceStatus","value","label","rules","required","message","trigger","max","form","parentId","rankName","fileList","secFormShow","dialogRules","marketSearch","role","components","selectMarket","created","this","handleCategory","computed","gTicket","$store","state","methods","handleRemove","file","handleList","res","code","push","handleExceed","files","$message","warning","length","beforeRemove","$confirm","beforeLogoUpload","isJPG","type","isLt2M","size","error","showAdd","index","submitForm","formName","_this","$refs","validate","valid","Object","auth","imgArr","forEach","item","imgUrl","indexOf","extends_default","imageUrl","handleSave","method","_this2","$http","url","estateDevice","then","success","msg","$router","commit","$route","firCategoryAdd","_this3","post","apiSetting","deviceCategory","changeSec","reset","_this4","resetFields","$nextTick","clearValidate","val","list","_this5","params","showLoading","device_manage_add_device","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","label-position","inline","gutter","span","xs","prop","_v","clearable","placeholder","on","change","callback","$$v","$set","expression","_l","key","click","$event","trim","action","defaults","baseURL","before-remove","multiple","limit","on-exceed","on-success","file-list","headers","on-remove","before-upload","offset","title","visible","update:visible","close","_e","auto-complete","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/67.0dcdf88e33e699b876be.js","sourcesContent":["<template>\r\n  <div class=\"g-add-device\">\r\n  \t<el-form  class=\"c-search-form\" :model=\"reqData\" ref=\"reqData\" :rules=\"rules\" label-width=\"110px\"\r\n              label-position=\"right\" :inline=\"true\">\r\n         <el-row :gutter=\"32\">\r\n        <el-col :span=\"11\" :xs=\"24\">\r\n          <el-form-item label=\"所属商场\" prop=\"marketCode\">\r\n       <select-market :reqData=\"reqData\"></select-market>\r\n </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\">\r\n      \t<el-col :span=\"12\">\r\n          <el-form-item label=\"一级分类\" prop=\"firstId\">\r\n              <el-select v-model=\"reqData.firstId\" clearable placeholder=\"请选择\"\r\n              @change=\"changeSec\">\r\n                <el-option\r\n                  v-for=\"(item, index) in categotyListFir\"\r\n                  :key=\"index\"\r\n                  :label=\"item.rankName\"\r\n                  :value=\"item.rankId\"\r\n                  >\r\n                </el-option>\r\n              </el-select>\r\n          </el-form-item>\r\n          <el-button class=\"btn-handle\" @click=\"showAdd(0)\">添加</el-button>\r\n        </el-col>\r\n        <el-col :span=\"12\" class=\"u-margin-6\">\r\n          <el-form-item label=\"二级分类\" prop=\"rankId\" label-width=\"110px\">\r\n              <el-select v-model=\"reqData.rankId\" placeholder=\"请选择\"\r\n              >\r\n                <el-option\r\n                  v-for=\"(item, index) in categotyListSec\"\r\n                  :key=\"index\"\r\n                  :label=\"item.rankName\"\r\n                  :value=\"item.rankId\">\r\n                </el-option>\r\n              </el-select>\r\n          </el-form-item>\r\n          <el-button class=\"btn-handle\" @click=\"showAdd(1)\">添加</el-button>\r\n        </el-col>\r\n      </el-row>\r\n       <el-row :gutter=\"32\">\r\n        <el-col :span=\"12\" :xs=\"24\">\r\n          <el-form-item label='设备名称' prop=\"equipmentName\">\r\n            <el-input clearable v-model.trim=\"reqData.equipmentName\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n         <el-col :span=\"11\" class=\"u-margin-6\">\r\n          <el-form-item label=\"运行状态\" prop=\"runStatus\">\r\n              <el-select v-model=\"reqData.runStatus\" clearable placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"(item, index) in deviceStatus\"\r\n                  :key=\"index\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n       <el-row :gutter=\"32\">\r\n        <el-col :span=\"12\" :xs=\"24\">\r\n          <el-form-item label='设备型号' prop=\"equipmentModel\">\r\n            <el-input clearable v-model.trim=\"reqData.equipmentModel\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"11\" class=\"u-margin-6\">\r\n          <el-form-item label=\"设备编号\r\n\" prop=\"equipmentCode\">\r\n            <el-input clearable v-model.trim=\"reqData.equipmentCode\" ></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\">\r\n      \t<el-col :span=\"12\" :xs=\"24\">\r\n          <el-form-item label=\"安装位置\r\n\" prop=\"location\">\r\n            <el-input clearable v-model.trim=\"reqData.location\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\">\r\n      \t<el-col :span=\"12\" :xs=\"24\">\r\n          <el-form-item label=\"设备检验标识\r\n\" prop=\"skuCode\" >\r\n\r\n            <el-upload\r\n  class=\"upload-demo\"\r\n  :action=\"$http.defaults.baseURL+uploadUrl\"\r\n  :before-remove=\"beforeRemove\"\r\n  multiple\r\n  :limit=\"10\"\r\n  :on-exceed=\"handleExceed\"\r\n  :on-success=\"handleList\"\r\n  :file-list=\"fileList\"\r\n   :headers=\"{gTicket:gTicket}\"\r\n  :on-remove=\"handleRemove\"\r\n  :before-upload=\"beforeLogoUpload\">\r\n  <el-button size=\"small\" type=\"primary\" class=\"btn-80 btn-upload\">浏览</el-button>\r\n</el-upload>\r\n\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\" class=\"u-button\">\r\n        <el-col :span=\"8\" :offset=\"16\">\r\n            <el-button class=\"btn-save-big\" type=\"primary\" @click=\"submitForm('reqData')\">保存</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n <el-dialog title=\"分类-添加\" :visible.sync=\"dialogFormVisibleFir\" class=\"s-dialog\" @close=\"reset\">\r\n  <el-form :model=\"form\" :rules=\"dialogRules\" ref=\"form\" label-width=\"80px\">\r\n    <el-form-item label=\"一级分类\" prop=\"parentId\" v-if=\"secFormShow\">\r\n              <el-select v-model=\"form.parentId\" clearable placeholder=\"请选择\">\r\n                <el-option\r\n                  v-for=\"(item, index) in categotyListFir\"\r\n                  :key=\"index\"\r\n                  :label=\"item.rankName\"\r\n                  :value=\"item.rankId\"\r\n                  >\r\n                </el-option>\r\n              </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"名称\"  prop=\"rankName\">\r\n      <el-input v-model.trim=\"form.rankName\" auto-complete=\"off\" clearable></el-input>\r\n    </el-form-item>\r\n  </el-form>\r\n  <div slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button @click=\"reset('form')\" class=\"btn-reset\">取 消</el-button>\r\n    <el-button type=\"primary\" @click=\"firCategoryAdd('form')\" class=\"btn-save\">确 定</el-button>\r\n  </div>\r\n</el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApiSettingCom from \"@/api/apiSetting\";\r\nimport ApiSetting from \"@/api/basicApi-estateApi\";\r\nimport { keysFilter, getCookie } from \"@/utils/auth\";\r\nimport selectMarket from '@/components/selectMarket'\r\nexport default {\r\n  name:'addDevice',\r\n  data() {\r\n    return {\r\n      checkEdit: \"\",\r\n      dialogFormVisibleFir: false,\r\n      reqData: {\r\n        equipmentCode: \"\",\r\n        marketCode: \"\",\r\n        equipmentModel: \"\",\r\n        equipmentId: \"\",\r\n        equipmentName: \"\",\r\n        location: \"\",\r\n        rankId: \"\",\r\n        runStatus: \"\",\r\n        firstId: \"\"\r\n      },\r\n      categotyListFir: [],\r\n      uploadUrl: ApiSetting.imageUpload,\r\n      categotyListSec: [],\r\n      deviceStatus: [\r\n        { value: 0, label: \"正常运行中\" },\r\n        { value: 1, label: \"故障维修中\" },\r\n        { value: 2, label: \"停止运行\" },\r\n        { value: 3, label: \"报废\" }\r\n      ],\r\n      rules: {\r\n        marketCode: [\r\n          { required: true, message: \"请选择商场\", trigger: \"change\" }\r\n        ],\r\n        firstId: [{ required: true, message: \"请选择分类\", trigger: \"change\" }],\r\n        equipmentName: [\r\n          { required: true, message: \"请输入设备名称\", trigger: \"blur\" },\r\n          { max: 30, message: \"最多输入30个字\", trigger: \"blur\" }\r\n        ],\r\n        equipmentModel: [\r\n          { required: true, message: \"请输入设备型号\", trigger: \"blur\" },\r\n          { max: 30, message: \"最多输入30个字\", trigger: \"blur\" }\r\n        ],\r\n        runStatus: [\r\n          { required: true, message: \"请选择运行状态\", trigger: \"blur\" }\r\n        ],\r\n        equipmentCode: [\r\n          { required: true, message: \"请选择设备编号\", trigger: \"blur\" },\r\n          { max: 50, message: \"最多输入50个字\", trigger: \"blur\" }\r\n        ],\r\n        location: [\r\n          {\r\n            max: 50,\r\n            message: \"最多输入50个字\",\r\n            trigger: \"blur\"\r\n          }\r\n        ]\r\n      },\r\n\r\n      form: {\r\n        parentId: \"\",\r\n        rankName: \"\"\r\n      },\r\n      fileList: [],\r\n      secFormShow: false,\r\n      dialogRules: {\r\n        rankName: [\r\n          { required: true, message: \"请输入名称\", trigger: \"blur\" },\r\n          { max: 20, message: \"最多输入20个字\", trigger: \"blur\" }\r\n        ],\r\n        parentId: [{ required: true, message: \"请输入名称\", trigger: \"blur\" }]\r\n      },\r\n      marketSearch: [],\r\n      role: false\r\n    };\r\n  },\r\n  components:{selectMarket},\r\n  created() {\r\n    this.handleCategory(\"-1\", \"categotyListFir\");\r\n  },\r\n  computed: {\r\n    gTicket: function() {\r\n      return this.$store.state.gTicket;\r\n    }\r\n  },\r\n  methods: {\r\n    handleRemove(file, fileList) {\r\n      this.fileList = fileList;\r\n    },\r\n    handleList(res, file, fileList) {\r\n      if (res && res.code == 0 && res.data) {\r\n        this.fileList.push(res.data);\r\n      }\r\n    },\r\n    handleExceed(files, fileList) {\r\n      this.$message.warning(\r\n        `当前限制选择 3 个文件，本次选择了 ${\r\n          files.length\r\n        } 个文件，共选择了 ${files.length + this.fileList.length} 个文件`\r\n      );\r\n    },\r\n    beforeRemove(file, fileList) {\r\n      return this.$confirm(`确定移除 ${file.name}？`);\r\n    },\r\n    // 上传图片前限制\r\n    beforeLogoUpload(file) {\r\n      const isJPG =\r\n        file.type === \"image/jpeg\" || \"image/png\" || \"image/jpg\" || \"image/bmp\";\r\n      const isLt2M = file.size / 1024 / 1024 < 5;\r\n      if (!isJPG) {\r\n        this.$message.error(\"上传图片只能是 jpg、png、jpeg、bmp格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传图片大小不能超过5MB!\");\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n    //显示添加分类\r\n    showAdd(index) {\r\n      this.dialogFormVisibleFir = true;\r\n      if (index == 0) {\r\n        this.secFormShow = false;\r\n      } else {\r\n        this.secFormShow = true;\r\n      }\r\n    },\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          let reqData = keysFilter(this.reqData, true, [\"firstId\", \"rankId\"]);\r\n          if (this.reqData.rankId == \"\") {\r\n            this.reqData.rankId = this.reqData.firstId;\r\n          }\r\n\r\n          let imgArr = [];\r\n          if (this.fileList.length != 0) {\r\n            this.fileList.forEach(item => {\r\n              let imgUrl = {};\r\n              imgUrl[\"name\"] = item[\"name\"];\r\n              imgUrl[\"url\"] = item[\"url\"];\r\n              if (imgArr.indexOf(item) == -1) {\r\n                imgArr.push(imgUrl);\r\n              }\r\n            });\r\n          }\r\n          let data = {\r\n            ...reqData,\r\n            imageUrl: imgArr,\r\n            rankId: this.reqData.rankId\r\n          };\r\n            this.handleSave(\"post\", data);\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    //保存的函数\r\n    handleSave(method, data) {\r\n      this.$http({\r\n        url: ApiSetting.estateDevice,\r\n        method: method,\r\n        data: data\r\n      }).then(res => {\r\n        if (res) {\r\n            this.$message.success(res.msg);\r\n            this.$router.push({ name: \"device\" });\r\n            this.$store.commit(\"delete_tabs\", this.$route);\r\n        }\r\n      });\r\n    },\r\n    //添加分类\r\n    firCategoryAdd(form) {\r\n      this.$refs[form].validate(valid => {\r\n        if (valid) {\r\n          this.$http\r\n            .post(ApiSettingCom.deviceCategory, {\r\n              ...this.form\r\n            })\r\n            .then(res => {\r\n              if (res) {\r\n                if (res.code == 0) {\r\n                  this.$message.success(res.msg);\r\n                  this.handleCategory(\"\", \"categotyListFir\");\r\n                 this.changeSec()\r\n                  this.dialogFormVisibleFir = false;\r\n                } else {\r\n                  return this.$message.error(res.msg);\r\n                }\r\n              }\r\n            });\r\n        } else {\r\n        }\r\n      });\r\n    },\r\n    //删除分类\r\n    reset() {\r\n      this.dialogFormVisibleFir = false;\r\n      this.$refs[\"form\"].resetFields();\r\n      this.$nextTick(() => {\r\n        this.$refs[\"form\"].clearValidate();\r\n      });\r\n    },\r\n    //联动\r\n    handleCategory(val, list) {\r\n      this.$http({\r\n        url: ApiSettingCom.deviceCategory,\r\n        method: \"get\",\r\n        params: { parentId: val },\r\n        showLoading: false\r\n      }).then(res => {\r\n        if (res) {\r\n          if (res.code == 0) {\r\n            if (res.data.length > 0) {\r\n              this[list] = res.data;\r\n              if(list == 'categotyListSec'){\r\n               this.reqData.rankId = res.data[0].rankId;\r\n              }\r\n            } else {\r\n              this[list] = [];\r\n              this.reqData.rankId = \"\";\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    changeSec() {\r\n      if(this.reqData.firstId != \"\"){\r\n        this.handleCategory(this.reqData.firstId, \"categotyListSec\");\r\n      }else{\r\n        this.categotyListSec = []\r\n        this.reqData.rankId = \"\";\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped lang=\"less\">\r\n.g-add-device {\r\n  padding: 50px;\r\n  padding-right: 20px;\r\n  .btn-handle {\r\n    background: #ff7623;\r\n    color: #fff;\r\n    border: none;\r\n    margin-top: 5px;\r\n    margin-left: 4px;\r\n  }\r\n  .u-margin-6 {\r\n    text-align: left;\r\n  }\r\n  .btn-80 {\r\n    line-height: 31px;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\">\r\n.g-add-device {\r\n  .el-col-offset-16 {\r\n    margin-left: 35%;\r\n    margin-top: 60px;\r\n  }\r\n  .c-search-form .el-form-item__content {\r\n    text-align: left;\r\n  }\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/estate_manage/device_manage/add_device/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"g-add-device\"},[_c('el-form',{ref:\"reqData\",staticClass:\"c-search-form\",attrs:{\"model\":_vm.reqData,\"rules\":_vm.rules,\"label-width\":\"110px\",\"label-position\":\"right\",\"inline\":true}},[_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":11,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"所属商场\",\"prop\":\"marketCode\"}},[_c('select-market',{attrs:{\"reqData\":_vm.reqData}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"一级分类\",\"prop\":\"firstId\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},on:{\"change\":_vm.changeSec},model:{value:(_vm.reqData.firstId),callback:function ($$v) {_vm.$set(_vm.reqData, \"firstId\", $$v)},expression:\"reqData.firstId\"}},_vm._l((_vm.categotyListFir),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.rankName,\"value\":item.rankId}})}))],1),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-handle\",on:{\"click\":function($event){_vm.showAdd(0)}}},[_vm._v(\"添加\")])],1),_vm._v(\" \"),_c('el-col',{staticClass:\"u-margin-6\",attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"二级分类\",\"prop\":\"rankId\",\"label-width\":\"110px\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.reqData.rankId),callback:function ($$v) {_vm.$set(_vm.reqData, \"rankId\", $$v)},expression:\"reqData.rankId\"}},_vm._l((_vm.categotyListSec),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.rankName,\"value\":item.rankId}})}))],1),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-handle\",on:{\"click\":function($event){_vm.showAdd(1)}}},[_vm._v(\"添加\")])],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":12,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"设备名称\",\"prop\":\"equipmentName\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.reqData.equipmentName),callback:function ($$v) {_vm.$set(_vm.reqData, \"equipmentName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.equipmentName\"}})],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"u-margin-6\",attrs:{\"span\":11}},[_c('el-form-item',{attrs:{\"label\":\"运行状态\",\"prop\":\"runStatus\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.reqData.runStatus),callback:function ($$v) {_vm.$set(_vm.reqData, \"runStatus\", $$v)},expression:\"reqData.runStatus\"}},_vm._l((_vm.deviceStatus),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.label,\"value\":item.value}})}))],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":12,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"设备型号\",\"prop\":\"equipmentModel\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.reqData.equipmentModel),callback:function ($$v) {_vm.$set(_vm.reqData, \"equipmentModel\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.equipmentModel\"}})],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"u-margin-6\",attrs:{\"span\":11}},[_c('el-form-item',{attrs:{\"label\":\"设备编号\\n\",\"prop\":\"equipmentCode\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.reqData.equipmentCode),callback:function ($$v) {_vm.$set(_vm.reqData, \"equipmentCode\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.equipmentCode\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":12,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"安装位置\\n\",\"prop\":\"location\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.reqData.location),callback:function ($$v) {_vm.$set(_vm.reqData, \"location\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.location\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":12,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"设备检验标识\\n\",\"prop\":\"skuCode\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":_vm.$http.defaults.baseURL+_vm.uploadUrl,\"before-remove\":_vm.beforeRemove,\"multiple\":\"\",\"limit\":10,\"on-exceed\":_vm.handleExceed,\"on-success\":_vm.handleList,\"file-list\":_vm.fileList,\"headers\":{gTicket:_vm.gTicket},\"on-remove\":_vm.handleRemove,\"before-upload\":_vm.beforeLogoUpload}},[_c('el-button',{staticClass:\"btn-80 btn-upload\",attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"浏览\")])],1)],1)],1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"u-button\",attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":8,\"offset\":16}},[_c('el-button',{staticClass:\"btn-save-big\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('reqData')}}},[_vm._v(\"保存\")])],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"s-dialog\",attrs:{\"title\":\"分类-添加\",\"visible\":_vm.dialogFormVisibleFir},on:{\"update:visible\":function($event){_vm.dialogFormVisibleFir=$event},\"close\":_vm.reset}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.dialogRules,\"label-width\":\"80px\"}},[(_vm.secFormShow)?_c('el-form-item',{attrs:{\"label\":\"一级分类\",\"prop\":\"parentId\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.form.parentId),callback:function ($$v) {_vm.$set(_vm.form, \"parentId\", $$v)},expression:\"form.parentId\"}},_vm._l((_vm.categotyListFir),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.rankName,\"value\":item.rankId}})}))],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"rankName\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"clearable\":\"\"},model:{value:(_vm.form.rankName),callback:function ($$v) {_vm.$set(_vm.form, \"rankName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.rankName\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"btn-reset\",on:{\"click\":function($event){_vm.reset('form')}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-save\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.firCategoryAdd('form')}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-16884882\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/estate_manage/device_manage/add_device/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-16884882\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-16884882\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-16884882\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-16884882\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/estate_manage/device_manage/add_device/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}