webpackJsonp([21],{"2i+P":function(e,t){},HY2P:function(e,t){},T2Q4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Gu7T"),i=r.n(a),l=r("//Fk"),s=r.n(l),o=r("Dd8w"),n=r.n(o),c=r("hVDB"),m=r("FTcF"),u=r("NYxO"),d={name:"addAdsense",components:{selectMarket:m.a},computed:n()({},Object(u.d)(["gTicket"])),data:function(){return{uploadUrl:"",uploadHeaders:{gTicket:""},pickerOptions:{disabledDate:function(e){},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},rules:{marketCode:[{required:!0,message:"请选择所属商场",trigger:"change"}],bdType:[{required:!0,message:"请选择广告位类型",trigger:"change"}],bdName:[{required:!0,message:"请输入广告位名称",trigger:"blur"},{min:1,max:20,message:"长度1-20 个字符",trigger:"blur"}],coCode:[{required:!0,message:"请输入广告位方位号",trigger:"blur"},{min:1,max:20,message:"长度1-20 个字符",trigger:"blur"}],location:[{required:!0,message:"请输入所处位置",trigger:"blur"},{min:1,max:30,message:"长度1-30 个字符",trigger:"blur"}],initialTime:[{required:!0,message:"请选择上架时间",trigger:"change"}],imageUrl:[{required:!0,message:"请上传封面图片",trigger:"change"}],bdSize:[{required:!0,message:"请输入面积/尺寸",trigger:"blur"},{trigger:"blur",pattern:/^\d+(?:\.\d{1,2})?$/,message:"请输入大于等于零的数字，最多保留两位小数"}],describtion:[{min:1,max:120,message:"长度1-120 个字符",trigger:"blur"}]},storeNameOption:[],ruleForm:{marketCode:"",bdType:"",bdName:"",coCode:"",location:"",initialTime:"",imageUrl:"",bdSize:"",describtion:""},payWay:[{label:"微信",value:1},{label:"支付宝",value:2},{label:"POS机刷卡",value:3}],bdTypeOption:[{id:1,desc:"内墙广告"},{id:2,desc:"外墙广告"}]}},methods:{getOptionData:function(){var e=this,t=this.$http.get(c.a.allStore);s.a.all([t]).then(function(t){0===t[0].code&&(e.storeNameOption=[],e.storeNameOption=[].concat(i()(t[0].data)))})},beforeImgUpload:function(e){var t=e.size/1024/1024<=20;return t||this.$message.error("上传头像图片大小不能超过20MB!"),t},handleAvatarSuccess:function(e){this.ruleForm.imageUrl=e.data},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$http.post(c.a.advertiseList,t.ruleForm).then(function(e){0===e.code?(t.$message.success(e.msg),t.$store.commit("delete_tabs",t.$route),t.$router.push("/operation/adsense")):t.$message.error(e.msg)})})},resetForm:function(e){this.$refs[e].resetFields()}},beforeMount:function(){this.getOptionData(),this.uploadUrl=this.$http.defaults.baseURL+"/business/operation/image/upload",this.uploadHeaders.gTicket=this.gTicket}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"contract-receipts add-advertise"},[r("div",{staticClass:"main-title"},[e._v("\n    添加广告位")]),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"c-search-form",attrs:{rules:e.rules,model:e.ruleForm,"label-width":"145px",inline:!0,"label-position":"right"}},[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"所属商场",prop:"marketCode"}},[r("selectMarket",{attrs:{reqData:e.ruleForm}})],1)],1),e._v(" "),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"广告位类型",prop:"bdType"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.bdType,callback:function(t){e.$set(e.ruleForm,"bdType","string"==typeof t?t.trim():t)},expression:"ruleForm.bdType"}},e._l(e.bdTypeOption,function(e,t){return r("el-option",{key:t,attrs:{label:e.desc,value:e.id}})}))],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"广告位名称",prop:"bdName"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.bdName,callback:function(t){e.$set(e.ruleForm,"bdName","string"==typeof t?t.trim():t)},expression:"ruleForm.bdName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"广告位编号(方位号)",prop:"coCode"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.coCode,callback:function(t){e.$set(e.ruleForm,"coCode","string"==typeof t?t.trim():t)},expression:"ruleForm.coCode"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"所处位置",prop:"location"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.location,callback:function(t){e.$set(e.ruleForm,"location","string"==typeof t?t.trim():t)},expression:"ruleForm.location"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"上架时间",prop:"initialTime"}},[r("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.ruleForm.initialTime,callback:function(t){e.$set(e.ruleForm,"initialTime","string"==typeof t?t.trim():t)},expression:"ruleForm.initialTime"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"封面图",prop:"imageUrl"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.uploadHeaders,action:e.uploadUrl,"show-file-list":!1,accept:"image/jpg,image/jpeg,image/png,image/bmp,image/gif","before-upload":e.beforeImgUpload,"on-success":e.handleAvatarSuccess}},[e.ruleForm.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.ruleForm.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),e._v(" "),r("div",[r("el-form-item",{staticClass:"area-size",attrs:{label:"面积/尺寸",prop:"bdSize"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.bdSize,callback:function(t){e.$set(e.ruleForm,"bdSize","string"==typeof t?t.trim():t)},expression:"ruleForm.bdSize"}})],1),e._v(" "),r("span",{staticClass:"unit"},[e._v("平米")])],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:20}},[r("el-form-item",{staticClass:"advertise-introduce",attrs:{label:"广告位介绍",prop:"describtion"}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.ruleForm.describtion,callback:function(t){e.$set(e.ruleForm,"describtion","string"==typeof t?t.trim():t)},expression:"ruleForm.describtion"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"save-btn"},[r("el-button",{staticClass:"btn-save-big",attrs:{type:"primary",icon:"el-icon-save"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var g=r("VU/8")(d,p,!1,function(e){r("HY2P"),r("2i+P")},"data-v-c8830606",null);t.default=g.exports}});
//# sourceMappingURL=21.e8e917cd3ecb35afeb6e.js.map