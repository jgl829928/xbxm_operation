webpackJsonp([35],{"1Dms":function(e,t){},"82cL":function(e,t){},phkc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("4YfN"),l=a.n(n),i=a("eMGh"),r=a("2A+d"),o=a("FTcF"),s=a("TIfe"),c=a("hm3b"),m={name:"maintenance",data:function(){return{dialogFormVisible1:!1,dialogFormVisible2:!1,categotyListFir:[],reqData:{marketCode:"",rankId:""},pageparams:{currentPage:""},itemList:[],fileList1:[],fileList2:[],title:""}},components:{selectMarket:o.a,pagenation:c.a},created:function(){this.handleCategory("-1","categotyListFir"),this.getData(1)},methods:{rightControl:function(e){return this.$store.getters.getPermission(e)},download_file:function(e,t){var a=this;this.$http({method:"get",url:"/business/download",params:{fileUrl:e},showLoading:!1,responseType:"arraybuffer"}).then(function(e){a.download(e.data,t)})},download:function(e,t){if(e){var a=new Blob([e]);if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,t);else{var n=window.URL.createObjectURL(new Blob([e])),l=document.createElement("a");l.style.display="none",l.href=n,l.setAttribute("download",t),document.body.appendChild(l),l.click()}}},search:function(){this.getData()},checkConstrck1:function(e,t){this.dialogFormVisible1=!0,e.imgContractUrl?this.fileList1=e.imgContractUrl:this.fileList1=[]},checkConstrck2:function(e,t){this.dialogFormVisible2=!0,e.imgAccessoryUrl?this.fileList2=e.imgAccessoryUrl:this.fileList2=[]},getData:function(e){e=e||"";var t=l()({},this.reqData,{currentPage:e});Object(s.b)(e,t,r.a.maintenance,this)},handleCategory:function(e,t){var a=this;this.$http({url:i.b.deviceCategory,method:"get",params:{parentId:e}}).then(function(e){e&&0==e.code&&(a[t]=e.data)})},handlePage:function(e){this.getData(e)},deleteData:function(e){var t=this;this.$confirm("此操作将永久删除该条, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.delete(r.a.maintenance+"/"+e,{params:{maintenance:e}}).then(function(e){e&&0==e.code&&(t.$message({type:"success",message:e.msg}),t.getData(t.pageparams.currentPage))})}).catch(function(){})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"g-reserve-manage"},[a("el-form",{ref:"reqData",staticClass:"c-search-form",attrs:{model:e.reqData,"label-width":"102px",inline:!0,"label-position":"right"}},[a("el-row",[a("el-col",{attrs:{span:8,xs:24}},[a("el-form-item",{attrs:{label:"商场",prop:"marketCode"}},[a("select-market",{attrs:{reqData:e.reqData}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8,xs:24}},[a("el-form-item",{attrs:{label:"一级分类",prop:"rankId"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.reqData.rankId,callback:function(t){e.$set(e.reqData,"rankId",t)},expression:"reqData.rankId"}},e._l(e.categotyListFir,function(e,t){return a("el-option",{key:t,attrs:{label:e.rankName,value:e.rankId}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8,xs:24}},[a("el-form-item",{attrs:{label:"手机号",prop:"equipmentCode"}},[a("el-input",{attrs:{clearable:"",placeholder:"设备唯一标识"},model:{value:e.reqData.equipmentCode,callback:function(t){e.$set(e.reqData,"equipmentCode","string"==typeof t?t.trim():t)},expression:"reqData.equipmentCode"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8,offset:16}},[a("div",{staticClass:"c-footer-btn"},[a("el-button",{staticClass:"btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1)])],1)],1),e._v(" "),a("div",{staticClass:"c-table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.itemList,align:"center",height:"500",stripe:""}},[a("el-table-column",{attrs:{align:"center",prop:"maintenanceId","min-width":"160",label:"业务编号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"marketName",label:"所属商场"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"rankName",label:"签约商户"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"equipmentName",label:"代表人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"equipmentCode","min-width":"160",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"maintenanceCompany",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"maintenancePerson",label:"签约摊位"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"maintenanceCost",label:"使用面积"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"maintenanceCost","min-width":"120",label:"计租面积"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"maintenanceCost",label:"设定摊位价格"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"maintenanceCost",label:"合同摊位价格"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"maintenanceCost",label:"设定优惠期(月)"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"maintenanceCost",label:"合同优惠期(月)"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"",label:"情况说明"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{directives:[{name:"show",rawName:"v-show",value:e.rightControl("maintenance_contractInfo"),expression:"rightControl('maintenance_contractInfo')"}],staticClass:"u-check",on:{click:function(a){e.checkConstrck1(t.row)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"maintenanceCost",label:"楼层经理"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"",label:"审核记录"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{directives:[{name:"show",rawName:"v-show",value:e.rightControl("maintenance_accessoryInfo"),expression:"rightControl('maintenance_accessoryInfo')"}],staticClass:"u-check",on:{click:function(a){e.checkConstrck2(t.row)}}},[e._v("查看")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createName",label:"登记人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime","min-width":"165",label:"登记时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",fixed:"right","min-width":"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{directives:[{name:"show",rawName:"v-show",value:e.rightControl("maintenance_edit"),expression:"rightControl('maintenance_edit')"}],attrs:{to:{name:"editMainRecord",params:{maintenanceId:t.row.maintenanceId}}}},[a("el-button",{staticClass:"btn-handle",attrs:{type:"primary"}},[e._v("\n              审核\n          ")])],1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.rightControl("maintenance_delete"),expression:"rightControl('maintenance_delete')"}],staticClass:"btn-handle btn-add",attrs:{type:"primary"},on:{click:function(a){e.deleteData(t.row.maintenanceId)}}},[e._v("\n              查看\n          ")])]}}])})],1)],1),e._v(" "),a("pagenation",{attrs:{pageparams:e.pageparams,itemList:e.itemList},on:{handlePage:e.handlePage}}),e._v(" "),a("el-dialog",{staticClass:"s-dialog",attrs:{title:"维保合同-查看",visible:e.dialogFormVisible1,center:""},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[a("div",[e._l(e.fileList1,function(t,n){return a("el-row",{key:n},[a("el-col",{staticClass:"u-left",attrs:{span:19,xs:24}},[a("span",[e._v(e._s(t.name))]),e._v(" "),0==e.fileList1.length?a("span",[e._v("（无）")]):e._e()]),e._v(" "),a("el-col",{staticClass:"u-center",attrs:{span:5,xs:24}},[a("a",{on:{click:function(a){e.download_file(t.url,t.name)}}},[e._v("下载")])])],1)}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-80",on:{click:function(t){e.dialogFormVisible1=!1}}},[e._v("关 闭")])],1)],2)]),e._v(" "),a("el-dialog",{staticClass:"s-dialog",attrs:{title:"维保附件-查看",visible:e.dialogFormVisible2,center:""},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("div",[e._l(e.fileList2,function(t,n){return a("el-row",{key:n},[a("el-col",{staticClass:"u-left",attrs:{span:19,xs:24}},[a("span",[e._v(e._s(t.name))]),e._v(" "),0==e.fileList2.length?a("span",[e._v("（无）")]):e._e()]),e._v(" "),a("el-col",{staticClass:"u-center",attrs:{span:5,xs:24}},[a("a",{on:{click:function(a){e.download_file(t.url,t.name)}}},[e._v("下载")])])],1)}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-80",on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("关 闭")])],1)],2)])],1)},staticRenderFns:[]};var p=a("vSla")(m,d,!1,function(e){a("82cL"),a("1Dms")},"data-v-606bac4c",null);t.default=p.exports}});
//# sourceMappingURL=35.8bb6f038191936de45bf.js.map