webpackJsonp([75],{"l/1d":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("Dd8w"),c=e.n(n),r=e("Xxa5"),o=e.n(r),s=e("exGp"),i=e.n(s),u=e("RhA+"),l={name:"viewContract",data:function(){return{itemData:[],tplData:{},contractBatchNum:""}},mounted:function(){var t=this.$route.params.contractBatchNum||"";t?(this.contractBatchNum=t,this.getData(t)):this.$router.go(-1)},methods:{closePage:function(){this.$router.push({path:"/contact/audit"})},getData:function(t){var a=this;return i()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$http.get(u.a.postContracts+"/"+t);case 2:(n=e.sent)&&(a.itemData=n.data);case 4:case"end":return e.stop()}},e,a)}))()},viewContract:function(t){var a=this;return i()(o.a.mark(function e(){var n,r,s,i,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.electronicContractcolUrl){e.next=4;break}window.open(t.electronicContractcolUrl,"_blank"),e.next=10;break;case 4:return n=t.contractTplEunm,r=t.contractBatchNum,s={contractTplEunm:n,contractBatchNum:r},e.next=8,a.$http.get(u.a.queryCheckContract,{params:s});case 8:(i=e.sent)&&(l=i.data,1===n?(l.contractPeriodCostList.map(function(t){t.costDetail=t.costDetail.replace(/\n/g,"<br/>")}),a.tplData=c()({contractPeriodCostList:l.contractPeriodCostList},l.contractShoot)):a.tplData=l,a.$refs.contractTpl.showDialog(n));case 10:case"end":return e.stop()}},e,a)}))()},reSign:function(t){var a=this;return i()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$http.get(u.a.contractsSeal+"?contractCode="+t);case 2:e.sent&&(a.$message.success("重签成功"),a.getData(a.contractBatchNum));case 4:case"end":return e.stop()}},e,a)}))()}},components:{contractTpl:e("2v3v").a}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"view-contract"},[e("h4",[t._v("查看合同")]),t._v(" "),e("table",{attrs:{border:"1"}},[t._m(0),t._v(" "),e("tbody",t._l(t.itemData,function(a,n){return e("tr",{key:n,staticClass:"only-word"},[e("td",[t._v(t._s(a.contractCode))]),t._v(" "),e("td",[t._v(t._s(a.contractName))]),t._v(" "),e("td",[t._v("\n          "+t._s(a.signReult?a.signReult.desc:"")+"\n        ")]),t._v(" "),e("td",[e("a",{staticClass:"a-view",on:{click:function(e){t.viewContract(a)}}},[t._v("查看合同")]),t._v(" "),a.signReult&&2===a.signReult.code?e("a",{on:{click:function(e){t.reSign(a.contractCode)}}},[t._v("重签")]):t._e()])])}))]),t._v(" "),e("div",{staticClass:"c-detail-footer-box"},[e("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:t.closePage}},[t._v("\n      关 闭\n    ")])],1),t._v(" "),e("contractTpl",{ref:"contractTpl",attrs:{tplData:t.tplData}})],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",{staticClass:"only-word"},[a("th",[this._v("序号")]),this._v(" "),a("th",[this._v("合同名称")]),this._v(" "),a("th",[this._v("签署结果")]),this._v(" "),a("th",[this._v("操作")])])])}]};var h=e("VU/8")(l,v,!1,function(t){e("tIxc")},"data-v-c95efae6",null);a.default=h.exports},tIxc:function(t,a){}});
//# sourceMappingURL=75.e44f0d5377f4cf25728a.js.map