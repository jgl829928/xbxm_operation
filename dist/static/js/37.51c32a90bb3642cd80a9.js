webpackJsonp([37],{"34ho":function(t,a){},TSqj:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("Xxa5"),s=e.n(n),r=e("exGp"),l=e.n(r),o=e("YH6z"),i=e("vsZy"),c={name:"dailyCostCashIn",mixins:[i.a,i.c],data:function(){return{itemList:[],costData:{},reqData:{payMode:3,payNumber:"",payAmount:0,costId:[]},noPayAmount:0,rules:{payNumber:[{required:!0,message:"请输入付款码",trigger:"blur"}]}}},mounted:function(){this.getData()},computed:{canInput:function(){return 1===this.reqData.costId.length}},methods:{cancel:function(){this.$router.push({path:"/finance/dailyCosthandling"})},getData:function(){var t=this;this.ajaxGet({url:o.a.contractExpenses+"/"+this.$route.params.merchantCode,callBack:function(a){t.costData=a.data,t.itemList=a.data.currentExpenseDTOList,setTimeout(function(){t.itemList&&t.itemList.forEach(function(a){t.$refs.receiptTable.toggleRowSelection(a),t.noPayAmount=t.noPayAmount+a.amount})},10)}})},submitData:function(){var t=this;if(this.reqData.costId.length<1)return this.$message.error("请勾选费用列表中费用项"),!1;this.ajaxPost({url:o.a.costsPayment,data:this.reqData,validateModel:"reqData",callBack:function(a){var e,n=a.data;n.num&&0===n.num.code?t.confirmBox({title:"操作提示",message:n.desc,btn:"确认,取消",callBack:(e=l()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.put(o.a.costsPayment+"/"+n.orderNo);case 2:a.sent&&(t.$message.success("支付成功"),t.$router.push("/finance/dailyCosthandling"));case 4:case"end":return a.stop()}},a,t)})),function(){return e.apply(this,arguments)})}):t.$router.push("/finance/dailyCosthandling")}})},handleSelectionChange:function(t){var a=this;this.reqData.costId=[],this.reqData.payAmount=0,t.forEach(function(t){a.reqData.costId.push(t.expenseId),a.reqData.payAmount+=t.amount}),this.reqData.payAmount=this.reqData.payAmount.toFixed(2)}}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"c-detail-container c-financial-detail receipts-wrap"},[e("p",{staticClass:"tips"},[t._v("日常费用-收款")]),t._v(" "),e("el-form",{staticClass:"c-detail-form",attrs:{"label-width":"120px",inline:!0,"label-position":"right"}},[e("div",[e("el-row",[e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"商户名称"}},[e("span",[t._v(t._s(t.costData.merchantName))])])],1),t._v(" "),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"商场名称"}},[e("span",[t._v(t._s(t.costData.marketName))])])],1),t._v(" "),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"商户编号"}},[e("span",[t._v(t._s(t.costData.merchantCode))])])],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:24}},[e("el-form-item",{staticClass:"span-boothId-box",attrs:{label:"在租摊位"}},[e("span",{staticClass:"span-boothId",attrs:{title:t.costData.boothId}},[t._v(t._s(t.costData.boothId))])])],1)],1)],1),t._v(" "),e("p",{staticClass:"tips"},[t._v("费用列表")]),t._v(" "),e("div",{staticClass:"c-table-wrap"},[e("el-table",{ref:"receiptTable",staticStyle:{width:"100%"},attrs:{data:t.itemList,align:"center",stripe:""},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"50"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"expenseName",label:"费用名称"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"expenseProperty",label:"费用类型"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"estimatedPayTime",label:"预计交款日期"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"amount",label:"交款金额（元）"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"createdTime",label:"录入时间"}}),t._v(" "),e("el-table-column",{attrs:{type:"selection",width:"50"}})],1)],1),t._v(" "),e("el-form",{ref:"reqData",staticClass:"handle-form",attrs:{model:t.reqData,rules:t.rules,"label-width":"106px",inline:!0,"label-position":"right"}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"交款金额",prop:"payAmount"}},[t.canInput?[e("el-input",{attrs:{clearable:""},model:{value:t.reqData.payAmount,callback:function(a){t.$set(t.reqData,"payAmount","string"==typeof a?a.trim():a)},expression:"reqData.payAmount"}}),t._v(" "),e("span",[t._v("元")])]:e("span",[t._v(t._s(t.reqData.payAmount)+"元")])],2)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"未交款金额"}},[e("span",[t._v(t._s(t.noPayAmount)+"元")])])],1)],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:14}},[e("el-form-item",{attrs:{label:"付款方式"}},[e("el-radio-group",{model:{value:t.reqData.payMode,callback:function(a){t.$set(t.reqData,"payMode","string"==typeof a?a.trim():a)},expression:"reqData.payMode"}},[e("el-radio",{attrs:{label:3}},[t._v("pos机刷卡")]),t._v(" "),e("el-radio",{attrs:{label:4}},[t._v("银行卡转账")]),t._v(" "),e("el-radio",{attrs:{label:5}},[t._v("现金")])],1)],1)],1),t._v(" "),1===t.reqData.payMode||2===t.reqData.payMode?e("el-col",{attrs:{span:10}},[e("el-form-item",{attrs:{label:"付款码",prop:"payNumber"}},[e("el-input",{attrs:{clearable:""},model:{value:t.reqData.payNumber,callback:function(a){t.$set(t.reqData,"payNumber","string"==typeof a?a.trim():a)},expression:"reqData.payNumber"}})],1)],1):t._e()],1)],1),t._v(" "),e("div",{staticClass:"c-detail-footer-box"},[e("el-button",{attrs:{type:"primary"},on:{click:t.submitData}},[t._v("收款")]),t._v(" "),e("el-button",{staticClass:"cancel-btn",on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var u=e("VU/8")(c,p,!1,function(t){e("34ho"),e("Xa8S")},"data-v-67e53d06",null);a.default=u.exports},Xa8S:function(t,a){}});
//# sourceMappingURL=37.51c32a90bb3642cd80a9.js.map