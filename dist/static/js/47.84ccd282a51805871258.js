webpackJsonp([47],{"/ALE":function(a,e){},"I0/x":function(a,e){},XEbR:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("4YfN"),n=t.n(r),i=t("lC5x"),s=t.n(i),l=t("IHPB"),o=t.n(l),d=t("J0Oq"),c=t.n(d),m=t("hVDB"),b={name:"brandMain",components:{Pagenation:t("hm3b").a},computed:{currentUser:function(){return this.$store.state.currentUser?(this.addBrandData.marketCode=this.$store.state.currentUser.marketCode,this.$store.state.currentUser):{marketCode:null}}},data:function(){return{centerDialogVisible:!1,modifyDialogVisible:!1,pageDefault:{totalRecords:0,currentPage:1,pageSize:20},pageParams:{brandName:"",brandCode:"",brandType:"",currentPage:""},addBrandData:{brandName:"",marketCode:"",brandStatus:1,brandType:""},modifyBrandData:{brandName:"",marketCode:"",brandStatus:"",brandType:""},rules:{brandName:[{required:!0,message:"请输入品牌名称",trigger:"blur"}],marketCode:[{required:!0,message:"请选择商场",trigger:"change"}],brandType:[{required:!0,message:"请选择品牌类型",trigger:"change"}]},rules1:{brandName:[{required:!0,message:"请输入品牌名称",trigger:"blur"}],marketCode:[{required:!0,message:"请选择商场",trigger:"change"}],brandType:[{required:!0,message:"请选择品牌类型",trigger:"change"}]},brandOption:[],marketOptionData:[],tableList:[],addBrandBtnDisabled:!1,editBrandBtnDisabled:!1}},methods:{getBrandOption:function(){var a=this;return c()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$http.get(m.a.brandTypeOption);case 2:0===(t=e.sent).code&&(a.brandOption=[].concat(o()(t.data)));case 4:case"end":return e.stop()}},e,a)}))()},marketOption:function(){var a=this;return c()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$http.get(m.a.marketOption);case 2:0===(t=e.sent).code&&(a.marketOptionData=[].concat(o()(t.data)));case 4:case"end":return e.stop()}},e,a)}))()},getPageList:function(a){var e=this;return c()(s.a.mark(function t(){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.pageParams.currentPage=a||1,e.pageDefault.currentPage=a||1,t.next=4,e.$http.get(m.a.brandList,{params:e.pageParams});case 4:0===(r=t.sent).code&&(e.pageDefault.totalRecords=r.page.totalRecords,e.tableList=[],e.tableList=[].concat(o()(r.data)));case 6:case"end":return t.stop()}},t,e)}))()},indexMethod:function(a){return a+20*(this.pageParams.currentPage-1)+1},openAddDialog:function(){var a=this;this.centerDialogVisible=!0,setTimeout(function(){a.resetForm("ruleForm")},100)},submitForm:function(a){var e=this;this.$refs[a].validate(function(a){if(!a)return!1;e.addBrandBtnDisabled=!0,e.$http({url:m.a.brandList,method:"post",data:e.addBrandData}).then(function(a){0===a.code&&(e.$message.success("添加成功"),e.centerDialogVisible=!1,e.getPageList()),e.addBrandBtnDisabled=!1})})},openModifyDialog:function(a){var e=this;this.$http.get(m.a.brandList+"/"+a).then(function(a){if(0===a.code){var t=n()({},a.data);e.modifyBrandData.brandName=t.brandName,e.modifyBrandData.brandCode=t.brandCode,e.modifyBrandData.brandStatus=t.brandStatus.code,e.modifyBrandData.brandType=t.brandType.code,e.modifyBrandData.marketCode=t.marketDTO.marketCode,e.modifyDialogVisible=!0}})},modifySubmit:function(a){var e=this;this.$refs[a].validate(function(a){if(!a)return!1;e.editBrandBtnDisabled=!0,e.$http.put(m.a.brandList,e.modifyBrandData).then(function(a){0===a.code&&(e.$message.success("修改成功"),e.getPageList(),e.modifyDialogVisible=!1),e.editBrandBtnDisabled=!1})})},resetForm:function(a){var e=this;this.$refs[a].resetFields(),setTimeout(function(){e.$refs[a].clearValidate()},100)}},beforeMount:function(){this.getBrandOption(),this.marketOption(),this.getPageList()}},p={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"contract-receipts brand-management"},[t("el-form",{ref:"pageParams",staticClass:"c-search-form",attrs:{model:a.pageParams,"label-position":"right",inline:!0}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"品牌名称",prop:"itemCode"}},[t("el-input",{attrs:{clearable:""},model:{value:a.pageParams.brandName,callback:function(e){a.$set(a.pageParams,"brandName","string"==typeof e?e.trim():e)},expression:"pageParams.brandName"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"品牌类型",prop:"skuCode"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:a.pageParams.brandType,callback:function(e){a.$set(a.pageParams,"brandType","string"==typeof e?e.trim():e)},expression:"pageParams.brandType"}},a._l(a.brandOption,function(a,e){return t("el-option",{key:e,attrs:{label:a.desc,value:a.code}})}))],1)],1),a._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"品牌编码",prop:"itemCode"}},[t("el-input",{attrs:{clearable:""},model:{value:a.pageParams.brandCode,callback:function(e){a.$set(a.pageParams,"brandCode","string"==typeof e?e.trim():e)},expression:"pageParams.brandCode"}})],1)],1)],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:8,offset:16}},[t("div",{staticClass:"c-footer-btn"},[t("el-button",{staticClass:"btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){a.getPageList(1)}}},[a._v("查询")])],1)])],1)],1),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.$store.getters.getPermission("brandMain_2"),expression:"$store.getters.getPermission('brandMain_2')"}]},[t("el-button",{staticClass:"btn-search btn-add",attrs:{type:"primary"},on:{click:a.openAddDialog}},[a._v("添加品牌")])],1),a._v(" "),t("div",{staticClass:"c-table-wrap"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tableList,align:"center",stripe:"",height:"500"}},[t("el-table-column",{attrs:{align:"center",type:"index",label:"序号","min-width":"50",index:a.indexMethod}}),a._v(" "),t("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"brandName",label:"品牌名称"}}),a._v(" "),t("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"marketName",label:"所属商场"}}),a._v(" "),t("el-table-column",{attrs:{"min-width":"150",align:"center",prop:"brandCode",label:"品牌编码"}}),a._v(" "),t("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"brandType.desc",label:"品牌类型"}}),a._v(" "),t("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"brandStatus.desc",label:"状态"}}),a._v(" "),t("el-table-column",{attrs:{align:"center",prop:"createTime","min-width":"165",label:"创建时间"}}),a._v(" "),t("el-table-column",{attrs:{"min-width":"110",align:"center",prop:"createUserName",label:"创建人"}}),a._v(" "),t("el-table-column",{attrs:{align:"center","min-width":"190",label:"操作",fixed:"right"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{staticClass:"btn-handle",attrs:{disabled:!a.$store.getters.getPermission("brandMain_3"),type:"primary"},on:{click:function(t){a.openModifyDialog(e.row.brandCode)}}},[a._v("修改")])]}}])})],1)],1),a._v(" "),t("Pagenation",{attrs:{pageparams:a.pageDefault,itemList:a.tableList},on:{handlePage:a.getPageList}}),a._v(" "),t("el-dialog",{staticClass:"s-dialog",attrs:{title:"品牌-添加",visible:a.centerDialogVisible},on:{"update:visible":function(e){a.centerDialogVisible=e}}},[t("div",[t("el-form",{ref:"ruleForm",attrs:{model:a.addBrandData,rules:a.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"品牌名称",prop:"brandName"}},[t("el-input",{model:{value:a.addBrandData.brandName,callback:function(e){a.$set(a.addBrandData,"brandName","string"==typeof e?e.trim():e)},expression:"addBrandData.brandName"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"所属商场",prop:"marketCode"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择",disabled:null!==a.currentUser.marketCode},model:{value:a.addBrandData.marketCode,callback:function(e){a.$set(a.addBrandData,"marketCode","string"==typeof e?e.trim():e)},expression:"addBrandData.marketCode"}},a._l(a.marketOptionData,function(a,e){return t("el-option",{key:e,attrs:{label:a.marketName,value:a.marketCode}})}))],1),a._v(" "),t("el-form-item",{attrs:{label:"品牌类型",prop:"brandType"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:a.addBrandData.brandType,callback:function(e){a.$set(a.addBrandData,"brandType","string"==typeof e?e.trim():e)},expression:"addBrandData.brandType"}},a._l(a.brandOption,function(a,e){return t("el-option",{key:e,attrs:{label:a.desc,value:a.code}})}))],1),a._v(" "),t("el-form-item",{attrs:{label:"品牌状态"}},[t("el-radio-group",{model:{value:a.addBrandData.brandStatus,callback:function(e){a.$set(a.addBrandData,"brandStatus","string"==typeof e?e.trim():e)},expression:"addBrandData.brandStatus"}},[t("el-radio",{attrs:{label:1}},[a._v("启用")]),a._v(" "),t("el-radio",{attrs:{label:2}},[a._v("停用")])],1)],1)],1)],1),a._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"btn-primary btn-save",attrs:{disabled:a.addBrandBtnDisabled,type:"primary"},on:{click:function(e){a.submitForm("ruleForm")}}},[a._v("保 存")]),a._v(" "),t("el-button",{staticClass:"btn-primary btn-reset",attrs:{type:"primary"},on:{click:function(e){a.centerDialogVisible=!1}}},[a._v("取 消")])],1)]),a._v(" "),t("el-dialog",{staticClass:"s-dialog",attrs:{title:"品牌-修改",visible:a.modifyDialogVisible},on:{"update:visible":function(e){a.modifyDialogVisible=e}}},[t("div",[t("el-form",{ref:"ruleForm1",attrs:{model:a.modifyBrandData,rules:a.rules1,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"品牌名称",prop:"brandName"}},[t("el-input",{attrs:{disabled:""},model:{value:a.modifyBrandData.brandName,callback:function(e){a.$set(a.modifyBrandData,"brandName","string"==typeof e?e.trim():e)},expression:"modifyBrandData.brandName"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"所属商场",prop:"marketCode"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择",disabled:""},model:{value:a.modifyBrandData.marketCode,callback:function(e){a.$set(a.modifyBrandData,"marketCode","string"==typeof e?e.trim():e)},expression:"modifyBrandData.marketCode"}},a._l(a.marketOptionData,function(a,e){return t("el-option",{key:e,attrs:{label:a.marketName,value:a.marketCode}})}))],1),a._v(" "),t("el-form-item",{attrs:{label:"品牌类型",prop:"brandType"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:a.modifyBrandData.brandType,callback:function(e){a.$set(a.modifyBrandData,"brandType",e)},expression:"modifyBrandData.brandType"}},a._l(a.brandOption,function(a,e){return t("el-option",{key:e,attrs:{label:a.desc,value:a.code}})}))],1),a._v(" "),t("el-form-item",{attrs:{label:"品牌状态"}},[t("el-radio-group",{model:{value:a.modifyBrandData.brandStatus,callback:function(e){a.$set(a.modifyBrandData,"brandStatus",e)},expression:"modifyBrandData.brandStatus"}},[t("el-radio",{attrs:{label:1}},[a._v("启用")]),a._v(" "),t("el-radio",{attrs:{label:2}},[a._v("停用")])],1)],1)],1)],1),a._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"btn-primary btn-save",attrs:{disabled:a.editBrandBtnDisabled,type:"primary"},on:{click:function(e){a.modifySubmit("ruleForm1")}}},[a._v("保 存")]),a._v(" "),t("el-button",{staticClass:"btn-primary btn-reset",attrs:{type:"primary"},on:{click:function(e){a.modifyDialogVisible=!1}}},[a._v("取 消")])],1)])],1)},staticRenderFns:[]};var u=t("vSla")(b,p,!1,function(a){t("I0/x"),t("/ALE")},"data-v-45581ebc",null);e.default=u.exports}});
//# sourceMappingURL=47.84ccd282a51805871258.js.map