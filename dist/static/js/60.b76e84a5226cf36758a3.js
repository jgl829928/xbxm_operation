webpackJsonp([60],{HqLE:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Xxa5"),r=e.n(s),n=e("exGp"),l=e.n(n),i={props:{itemList:{type:Array}},methods:{getSummaries:function(t){var a=t.columns,e=t.data,s=[];return a.forEach(function(t,a){if(0!==a){var r=e.map(function(a){return Number(a[t.property])});r.every(function(t){return isNaN(t)})?s[a]="--":(s[a]=r.reduce(function(t,a){var e=Number(a);return isNaN(e)?t:t+a},0),s[a]+="")}else s[a]="总价"}),s}}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.itemList,align:"center",stripe:"","show-summary":"","summary-method":t.getSummaries}},[e("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"costProperty",label:"费用类型"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"cumulativePaidAmount",label:"金额"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"单位"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n      元\n    ")]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"收入性质"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.incomeProperty?a.row.incomeProperty.desc:""))])]}}])})],1)},staticRenderFns:[]},c=e("VU/8")(i,o,!1,null,null,null).exports,u=e("YH6z"),m=e("pazF"),p=e("vsZy"),f={name:"contractApplyRef",mixins:[p.b,p.a],data:function(){var t=this;return{name:"",pageStatus:"",contractBatchNum:"",itemData:{conclusion:4,comment:"",contractBatchNum:"",refundId:""},submitData:{contractBatchNum:"",refundAmount:""},rules:{refundAmount:[{required:!0,validator:function(a,e,s){if(!(e=e.toString())||!e.trim())return s(new Error("请输入大于零的数字值"));setTimeout(function(){!/^\d+(\.\d+)?$/.test(e.trim())||e.trim()<=0?s(new Error("请输入正确的的数字值")):e.trim()>t.itemListInfo.noRefundAmount?s(new Error("退款金额不得大于收款金额")):s()},100)},trigger:"blur"}]},rules2:{comment:[{required:!0,message:"请输入备注内容",trigger:"blur"}]},itemDetail:{}}},computed:{cTitle:function(){var t="";switch(this.pageStatus){case"apply":t="退款申请";break;case"review":t="退款审核";break;case"refunds":t="退款";break;default:t="--"}return t},cBtnName:function(){var t="";switch(this.pageStatus){case"apply":t="提交";break;case"review":t="保存";break;case"refunds":t="退款";break;default:t="--"}return t}},components:{curTable:c,detailDialog:m.a},mounted:function(){this.contractBatchNum=this.$route.params.contractBatchNum||"",this.pageStatus=this.$route.meta.type,this.getDetailData(this.contractBatchNum)},methods:{cancel:function(){this.$router.push({path:"/finance/contractRefunds"})},getDetailData:function(t){var a=this;this.ajaxGet({url:u.a.contractRefunds+"/"+t,callBack:function(t){a.merchant=t.data.merchant,a.itemListInfo=t.data}})},submit:function(){var t=this;"apply"===this.pageStatus?(this.submitData.contractBatchNum=this.contractBatchNum,this.ajaxPost({url:u.a.contractRefund,data:this.submitData,validateModel:"submitData",callBack:function(a){t.$router.push("/finance/contractRefunds")}})):"review"===this.pageStatus?(this.itemData.refundId=this.itemListInfo.refundId,this.itemData.contractBatchNum=this.contractBatchNum,this.ajaxPost({url:u.a.contractAudit,data:this.itemData,validateModel:"itemData",callBack:function(a){t.$message.success("成功"),t.$router.push("/finance/contractRefunds")}})):"refunds"===this.pageStatus&&this.ajaxPost({url:u.a.contractCostsRefund,data:{contractBatchNum:this.contractBatchNum,refundId:this.itemListInfo.refundId},callBack:function(a){t.$router.push("/finance/contractRefunds")}})},viewContract:function(){var t=this;return l()(r.a.mark(function a(){var e;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get(u.a.contractDetail+"/"+t.contractBatchNum);case 2:(e=a.sent)&&(t.itemDetail=e.data,t.$refs.detailDialog.showDialog());case 4:case"end":return a.stop()}},a,t)}))()}}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-form",{staticClass:"action-handle-wrap",attrs:{"label-width":"120px",inline:!0,"label-position":"right"}},[e("p",{staticClass:"tips"},[t._v("合同-"+t._s(t.cTitle))]),t._v(" "),e("div",[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"商户名称"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.merchant.merchantName))])])],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"负责人"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.merchant.leaderName))])])],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},["review"===t.pageStatus?[e("el-form-item",{attrs:{label:"商场名称"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.merchant.marketName))])])]:[e("el-form-item",{attrs:{label:"负责人联系电话"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.merchant.leaderTel))])])]],2),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"摊位号"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.merchant.boothId))])])],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"营业执照号"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.merchant.loginNumber))])])],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"合同签订时间"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.merchant.createTime))])])],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"合同开始日期"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.merchant.rentBeginTime))])])],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"合同结束日期"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.merchant.rentEndTime))])])],1)],1)],1),t._v(" "),e("p",{staticClass:"tips"},[t._v("\n    费用列表\n    "),t._e()],1),t._v(" "),e("div",{staticClass:"c-table-wrap"},[e("curTable",{attrs:{itemList:t.itemListInfo.refundDTO}})],1),t._v(" "),e("div",[e("el-form",{ref:"submitData",attrs:{"label-width":"110px",model:t.submitData,inline:!0,rules:t.rules,"label-position":"right"}},["apply"===t.pageStatus?[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"未退金额"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.noRefundAmount)+"元")])])],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"已退金额"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.retiredAmount)+"元")])])],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"选择退款金额"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.noRefundAmount)+"元")])])],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"退款金额",prop:"refundAmount"}},[e("el-input",{staticClass:"c-el-input",attrs:{clearable:""},model:{value:t.submitData.refundAmount,callback:function(a){t.$set(t.submitData,"refundAmount","string"==typeof a?a.trim():a)},expression:"submitData.refundAmount"}})],1)],1)],1)]:t._e(),t._v(" "),"review"===t.pageStatus?[e("el-form",{ref:"itemData",staticClass:"action-handle-wrap",attrs:{model:t.itemData,rules:t.rules2,"label-width":"120px",inline:!0,"label-position":"right"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"未退金额"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.noRefundAmount)+"元")])])],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"已退金额"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.retiredAmount)+"元")])])],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"退款金额"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.refundAmount)+"元")])])],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"退款人"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.createUserName))])])],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:20}},[e("el-form-item",{attrs:{label:"退款时间"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.createTime))])])],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"审核结果"}},[e("el-radio-group",{model:{value:t.itemData.conclusion,callback:function(a){t.$set(t.itemData,"conclusion","string"==typeof a?a.trim():a)},expression:"itemData.conclusion"}},[e("el-radio",{attrs:{label:4}},[t._v("通过")]),t._v(" "),e("el-radio",{attrs:{label:3}},[t._v("不通过")])],1)],1)],1)],1),t._v(" "),3===t.itemData.conclusion?e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"input-textarea-box",attrs:{span:12}},[e("el-form-item",{attrs:{label:"备注",prop:"comment"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.itemData.comment,callback:function(a){t.$set(t.itemData,"comment","string"==typeof a?a.trim():a)},expression:"itemData.comment"}})],1)],1)],1):t._e()],1)]:t._e(),t._v(" "),"refunds"===t.pageStatus?[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"未退金额"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.noRefundAmount)+"元")])])],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"已退金额"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.retiredAmount)+"元")])])],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"退款金额"}},[e("span",{staticClass:"span-val"},[t._v(t._s(t.itemListInfo.refundAmount)+"元")])])],1)],1)]:t._e()],2)],1),t._v(" "),e("div",{staticClass:"footer-wrap"},[e("el-button",{staticClass:"btn-120",attrs:{type:"primary"},on:{click:t.submit}},[t._v(t._s(t.cBtnName))]),t._v(" "),e("el-button",{staticClass:"btn-120",attrs:{type:"default"},on:{click:t.cancel}},[t._v("\n      取消\n    ")])],1),t._v(" "),e("detailDialog",{ref:"detailDialog",attrs:{curType:2,itemDetail:t.itemDetail}})],1)},staticRenderFns:[]};var d=e("VU/8")(f,v,!1,function(t){e("NlZK"),e("RgwH")},"data-v-2aed5344",null);a.default=d.exports},NlZK:function(t,a){},RgwH:function(t,a){}});
//# sourceMappingURL=60.b76e84a5226cf36758a3.js.map