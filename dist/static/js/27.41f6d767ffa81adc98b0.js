webpackJsonp([27],{"5R5/":function(t,e){},QePu:function(t,e){},svPr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("HzJ8"),r=a.n(n),s=a("4YfN"),o=a.n(s),l=a("lC5x"),i=a.n(l),c=a("IHPB"),u=a.n(c),m=a("J0Oq"),p=a.n(m),d=a("hm3b"),b=a("hVDB"),f={name:"monthlyTask",components:{Pagenation:d.a},data:function(){return{pageDefault:{totalRecords:0,currentPage:1,pageSize:20},pageParams:{years:"",month:"",currentPage:1},monthList:[{id:1,desc:"1月"},{id:2,desc:"2月"},{id:3,desc:"3月"},{id:4,desc:"4月"},{id:5,desc:"5月"},{id:6,desc:"6月"},{id:7,desc:"7月"},{id:8,desc:"8月"},{id:9,desc:"9月"},{id:10,desc:"10月"},{id:11,desc:"11月"},{id:12,desc:"12月"}],provinceOption:[],storeNameOption:[],tableList:[],centerDialogVisible:!1,form:{passRaido:"",desc:""}}},methods:{getPageList:function(t){var e=this;return p()(i.a.mark(function a(){var n,r,s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.pageParams.currentPage=t||1,e.pageDefault.currentPage=t||1,a.next=4,e.$http.get(b.a.monthTaskTarget,{params:e.pageParams});case 4:if(0===(n=a.sent).code){for(e.pageDefault.totalRecords=n.page.totalRecords,e.tableList=[],r=[].concat(u()(n.data)),s=0;s<r.length;s++)r[s].editStatus=10;e.tableList=[].concat(u()(r))}case 6:case"end":return a.stop()}},a,e)}))()},indexMethod:function(t){return t+20*(this.pageParams.currentPage-1)+1},submitSingleData:function(t,e){var a=this,n=/^\d+(?:\.\d{1,2})?$/,s=/^(0|[1-9][0-9]*)$/,l=!1,i=!0,c=!1,u=void 0;try{for(var m,p=r()(["contractNumTask","contractNumRenewTask","collectionArrearTask","collectionDueTask","expectedOverdueAmountTask","monthExpectedAmountTask","emptyAreaLeaesTask"]);!(i=(m=p.next()).done);i=!0){var d=m.value;if("contractNumTask"===d&&!1===s.test(t[d])){this.$message.error("逾期未签户数任务只能输入大于等于零的整数"),l=!0;break}if("contractNumRenewTask"===d&&!1===s.test(t[d])){this.$message.error("本月应续签任务只能输入大于等于零的整数"),l=!0;break}if(!1===n.test(t[d])){this.$message.error("请输入大于等于零的数字，最多保留两位小数"),l=!0;break}}}catch(t){c=!0,u=t}finally{try{!i&&p.return&&p.return()}finally{if(c)throw u}}if(l)return!1;if("草稿"===e){var f=o()({},t);f.taskStatus=0,this.$http.post(b.a.monthTaskSubmit,f).then(function(e){0===e.code&&(a.$message.success("保存成功"),t.editStatus=10,a.getPageList())})}else{var g=o()({},t);g.taskStatus=1,this.$http.post(b.a.monthTaskSubmit,g).then(function(e){0===e.code&&(t.editStatus=10,a.$message.success("提交成功"),a.getPageList())})}}},beforeMount:function(){this.getPageList()}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contract-receipts monthly-task"},[a("el-form",{ref:"pageParams",staticClass:"c-search-form",attrs:{model:t.pageParams,"label-width":"",inline:!0,"label-position":"right"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"年度"}},[a("el-date-picker",{attrs:{"value-format":"yyyy",type:"year",placeholder:"选择年"},model:{value:t.pageParams.years,callback:function(e){t.$set(t.pageParams,"years","string"==typeof e?e.trim():e)},expression:"pageParams.years"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"月份"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.pageParams.month,callback:function(e){t.$set(t.pageParams,"month","string"==typeof e?e.trim():e)},expression:"pageParams.month"}},t._l(t.monthList,function(t,e){return a("el-option",{key:e,attrs:{label:t.desc,value:t.id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"c-footer-btn"},[a("el-button",{staticClass:"btn-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.getPageList(1)}}},[t._v("查询")])],1)])],1)],1),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"c-table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableList,align:"center",stripe:"",height:"500"}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50",index:t.indexMethod}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"年度","min-width":"110",prop:"quotaYear"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"月份","min-width":"110",prop:"quotaMonth"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"楼层经理","min-width":"110",prop:"floorManagerName"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"110",align:"center",label:"区域组名称",prop:"region"}}),t._v(" "),a("el-table-column",{attrs:{prop:"arrear",label:"本年度前期欠款总金额（含以往所有欠款金额）","min-width":"180",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"collectionArrearTask",label:"本月前期欠款收款任务","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[9===e.row.editStatus?a("el-input",{attrs:{type:"number"},model:{value:e.row.collectionArrearTask,callback:function(a){t.$set(e.row,"collectionArrearTask","string"==typeof a?a.trim():a)},expression:"scope.row.collectionArrearTask"}}):a("span",[t._v(t._s(e.row.collectionArrearTask))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"monthDue",label:"本月应收款总额","min-width":"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"collectionDueTask",label:"本月应收款任务","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[9===e.row.editStatus?a("el-input",{attrs:{type:"number"},model:{value:e.row.collectionDueTask,callback:function(a){t.$set(e.row,"collectionDueTask","string"==typeof a?a.trim():a)},expression:"scope.row.collectionDueTask"}}):a("span",[t._v(t._s(e.row.collectionDueTask))])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120",prop:"contractNumBeyondTimeLimit",label:"逾期未签户数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120",prop:"contractNumRenew",label:"本月应续签户数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contractNumTask",label:"逾期未签户数任务","min-width":"135",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[9===e.row.editStatus?a("el-input",{attrs:{type:"number"},model:{value:e.row.contractNumTask,callback:function(a){t.$set(e.row,"contractNumTask","string"==typeof a?a.trim():a)},expression:"scope.row.contractNumTask"}}):a("span",[t._v(t._s(e.row.contractNumTask))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"contractNumRenewTask",label:"本月应续签任务","min-width":"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[9===e.row.editStatus?a("el-input",{attrs:{type:"number"},model:{value:e.row.contractNumRenewTask,callback:function(a){t.$set(e.row,"contractNumRenewTask","string"==typeof a?a.trim():a)},expression:"scope.row.contractNumRenewTask"}}):a("span",[t._v(t._s(e.row.contractNumRenewTask))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"monthExpectedAmountReceipts",label:"当期续签预计逾期欠款金额","min-width":"120",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"monthExpectedAmount","min-width":"120",label:"当期续签预计本月应收金额",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"expectedOverdueAmountTask","min-width":"120",label:"当期续签预计逾期欠款任务",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[9===e.row.editStatus?a("el-input",{attrs:{type:"number"},model:{value:e.row.expectedOverdueAmountTask,callback:function(a){t.$set(e.row,"expectedOverdueAmountTask","string"==typeof a?a.trim():a)},expression:"scope.row.expectedOverdueAmountTask"}}):a("span",[t._v(t._s(e.row.expectedOverdueAmountTask))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"monthExpectedAmountTask","min-width":"120",label:"当期续签预计本月应收任务",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[9===e.row.editStatus?a("el-input",{attrs:{type:"number"},model:{value:e.row.monthExpectedAmountTask,callback:function(a){t.$set(e.row,"monthExpectedAmountTask","string"==typeof a?a.trim():a)},expression:"scope.row.monthExpectedAmountTask"}}):a("span",[t._v(t._s(e.row.monthExpectedAmountTask))])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120",prop:"emptyArea",label:"本区空场总面积",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"emptyAreaLeaesTask",label:"本月招商任务面积","min-width":"135",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[9===e.row.editStatus?a("el-input",{attrs:{type:"number"},model:{value:e.row.emptyAreaLeaesTask,callback:function(a){t.$set(e.row,"emptyAreaLeaesTask","string"==typeof a?a.trim():a)},expression:"scope.row.emptyAreaLeaesTask"}}):a("span",[t._v(t._s(e.row.emptyAreaLeaesTask))])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120",align:"center",prop:"taskStatus.desc",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(1===e.row.taskStatus.code?e.row.auditStatus.desc:e.row.taskStatus.desc))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"300",label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"btn-handle",attrs:{type:"primary",disabled:!t.$store.getters.getPermission("monthlyTask_4")||1===e.row.taskStatus.code},on:{click:function(t){e.row.editStatus=9}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"btn-handle",attrs:{type:"primary",disabled:!t.$store.getters.getPermission("monthlyTask_2")||1===e.row.taskStatus.code},on:{click:function(a){t.submitSingleData(e.row,"草稿")}}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"btn-handle",attrs:{type:"primary",disabled:!t.$store.getters.getPermission("monthlyTask_3")||1===e.row.taskStatus.code},on:{click:function(a){t.submitSingleData(e.row,"提交")}}},[t._v("提交")])]}}])})],1)],1),t._v(" "),a("Pagenation",{attrs:{pageparams:t.pageDefault,itemList:t.tableList},on:{handlePage:t.getPageList}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"unit-div"},[e("span",[this._v("单位")]),e("span",[this._v("元、平方米、户")])])}]};var k=a("vSla")(f,g,!1,function(t){a("QePu"),a("5R5/")},"data-v-74b77c51",null);e.default=k.exports}});
//# sourceMappingURL=27.41f6d767ffa81adc98b0.js.map