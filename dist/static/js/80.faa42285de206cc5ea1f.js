webpackJsonp([80],{"l/1d":function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=n("4YfN"),c=n.n(e),r=n("lC5x"),o=n.n(r),s=n("J0Oq"),i=n.n(s),l=n("RhA+"),u={name:"viewContract",data:function(){return{itemData:[],tplData:{},contractBatchNum:""}},mounted:function(){var t=this.$route.params.contractBatchNum||"";t?(this.contractBatchNum=t,this.getData(t)):this.$router.go(-1)},methods:{closePage:function(){this.$router.push({path:"/contact/audit"})},getData:function(t){var a=this;return i()(o.a.mark(function n(){var e;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.$http.get(l.a.postContracts+"/"+t);case 2:(e=n.sent)&&(a.itemData=e.data);case 4:case"end":return n.stop()}},n,a)}))()},viewContract:function(t){var a=this;return i()(o.a.mark(function n(){var e,r,s,i,u;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.electronicContractcolUrl){n.next=4;break}window.open(t.electronicContractcolUrl,"_blank"),n.next=10;break;case 4:return e=t.contractTplEunm,r=t.contractBatchNum,s={contractTplEunm:e,contractBatchNum:r},n.next=8,a.$http.get(l.a.queryCheckContract,{params:s});case 8:(i=n.sent)&&(u=i.data,1===e?(u.contractPeriodCostList.map(function(t){t.costDetail=t.costDetail.replace(/\n/g,"<br/>")}),a.tplData=c()({contractPeriodCostList:u.contractPeriodCostList},u.contractShoot)):a.tplData=u,a.$refs.contractTpl.showDialog(e));case 10:case"end":return n.stop()}},n,a)}))()},reSign:function(t){var a=this;return i()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.$http.get(l.a.contractsSeal+"?contractCode="+t);case 2:n.sent&&(a.$message.success("重签成功"),a.getData(a.contractBatchNum));case 4:case"end":return n.stop()}},n,a)}))()}},components:{contractTpl:n("2v3v").a}},h={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"view-contract"},[n("h4",[t._v("查看合同")]),t._v(" "),n("table",{attrs:{border:"1"}},[t._m(0),t._v(" "),n("tbody",t._l(t.itemData,function(a,e){return n("tr",{key:e,staticClass:"only-word"},[n("td",[t._v(t._s(a.contractCode))]),t._v(" "),n("td",[t._v(t._s(a.contractName))]),t._v(" "),n("td",[t._v("\n          "+t._s(a.signReult?a.signReult.desc:"")+"\n        ")]),t._v(" "),n("td",{staticStyle:{width:"186px"}},[n("el-button",{staticClass:"btn-handle",attrs:{type:"primary"},on:{click:function(n){t.viewContract(a)}}},[t._v("\n            查看合同\n          ")]),t._v(" "),n("el-button",{staticClass:"btn-handle",attrs:{disabled:!(a.signReult&&2===a.signReult.code),type:"primary"},on:{click:function(n){t.reSign(a.contractCode)}}},[t._v("\n            重签\n          ")])],1)])}))]),t._v(" "),n("div",{staticClass:"c-detail-footer-box"},[n("el-button",{staticClass:"only-one-cancel",attrs:{type:"primary"},on:{click:t.closePage}},[t._v("\n      关 闭\n    ")])],1),t._v(" "),n("contractTpl",{ref:"contractTpl",attrs:{tplData:t.tplData}})],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",{staticClass:"only-word"},[a("th",[this._v("序号")]),this._v(" "),a("th",[this._v("合同名称")]),this._v(" "),a("th",[this._v("签署结果")]),this._v(" "),a("th",[this._v("操作")])])])}]};var v=n("vSla")(u,h,!1,function(t){n("z8qL")},"data-v-7ed8e720",null);a.default=v.exports},z8qL:function(t,a){}});
//# sourceMappingURL=80.faa42285de206cc5ea1f.js.map