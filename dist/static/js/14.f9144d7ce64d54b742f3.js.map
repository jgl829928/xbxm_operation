{"version":3,"sources":["webpack:///src/views/access_manage/role_maintenance/index.vue","webpack:///./src/views/access_manage/role_maintenance/index.vue?f2eb","webpack:///./src/views/access_manage/role_maintenance/index.vue"],"names":["role_maintenance","data","reqData","currentPage","pageSize","affiliation","available","name","itemList","pageparams","dialog_title","add_data","add_rules","required","message","trigger","max","edit_id","dialogFormVisible","access_dialogVisible","distribute_name","distribute_affiliation","distribute_id","distribute_app_merchant","distribute_app_operate","distribute_operate","distribute_operate_check","app_operate_check","app_merchant_check","tree_checked","accessInfo_dialog","accessInfo_id","accessInfo","menuTree","form","state","rules","formLabelWidth","defaultProps","children","label","components","pagenation","methods","getOtherData","num","_this","this","muens","access_manage","menus","$http","get","then","res","code","getListData","_this2","roleList","params","page","search","indexMethod","index","handlePage","val","add","_this3","setTimeout","$refs","resetFields","clean_data","assign_default","$options","edit","row","roleId","save_data","_this4","validate","valid","post","operate_role","$message","type","edit_data","put","distribute_access","_this5","desc","roleInfo","operate","length","operate_tree","setCheckedKeys","filterIds","app_operate","appOperate_tree","app_merchant","appMerchant_tree","_this6","forEach","item","menuType","push","menuId","list","distribute_save","_this7","node","getCheckedNodes","node1","node2","parentIds","set_default","a","processData","param","menuIds","from_default","success","_this8","searchId","addSearchData","menuNode","getNode","is_default","childNodes","cdl","parent","searchNode","filter","test","key","access_info","_this9","created","access_manage_role_maintenance","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","inline","label-position","span","xs","prop","min-width","clearable","value","callback","$$v","$set","trim","expression","_v","placeholder","offset","icon","on","click","directives","rawName","$store","getters","getPermission","staticStyle","width","align","stripe","height","scopedSlots","_u","fn","scope","_s","disabled","$event","$index","title","visible","update:visible","close","auto-complete","slot","gutter","default-checked-keys","show-checkbox","node-key","props","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"oPAqMAA,GACAC,KADA,WAEA,OACAC,SACAC,YAAA,EACAC,SAAA,GACAC,YAAA,GACAC,UAAA,GACAC,KAAA,IAEAC,YACAC,cACAC,aAAA,GACAC,UACAN,YAAA,EACAC,UAAA,EACAC,KAAA,IAEAK,WACAL,OACAM,UAAA,EAAAC,QAAA,UAAAC,QAAA,SACAC,IAAA,GAAAF,QAAA,gBAAAC,QAAA,UAGAE,QAAA,GACAC,mBAAA,EAEAC,sBAAA,EACAC,gBAAA,GACAC,uBAAA,GACAC,cAAA,GACAC,2BACAC,0BACAC,sBAEAC,4BACAC,qBACAC,sBAEAC,gBAEAC,mBAAA,EACAC,cAAA,GACAC,cACAC,YACAC,MACA3B,KAAA,GACA4B,OAAA,GAEAC,OACA7B,OAAAM,UAAA,EAAAC,QAAA,UAAAC,QAAA,UAEAsB,eAAA,QAEAC,cACAC,SAAA,OACAC,MAAA,UAIAC,YAAAC,qBAAA,GACAnC,KAAA,WACAoC,SAEAC,aAFA,SAEAC,GAAA,IAAAC,EAAAC,KACAC,EAAAC,EAAA,EAAAC,MAAA,IAAAL,EACAE,KAAAI,MAAAC,IAAAJ,GAAAK,KAAA,SAAAC,GACA,GAAAA,GAAA,IAAAA,EAAAC,MAAAD,EAAArD,KACA,OAAA4C,GACA,OACAC,EAAArB,mBAAA6B,EAAArD,KACA,MACA,OACA6C,EAAAtB,uBAAA8B,EAAArD,KACA,MACA,OACA6C,EAAAvB,wBAAA+B,EAAArD,SAUAuD,YAxBA,WAwBA,IAAAC,EAAAV,KACAA,KAAAI,MACAC,IAAAH,EAAA,EAAAS,UAAAC,OAAAZ,KAAA7C,UACAmD,KAAA,SAAAC,GACAA,GAAA,IAAAA,EAAAC,MAAAD,EAAArD,MACAwD,EAAAjD,SAAA8C,EAAArD,KACAwD,EAAAhD,WAAA6C,EAAAM,MAEAH,EAAAjD,eAIAqD,OApCA,WAqCAd,KAAA7C,QAAAC,YAAA,EACA4C,KAAAS,eAEAM,YAxCA,SAwCAC,GACA,OAAAA,EAAA,IAAAhB,KAAA7C,QAAAC,YAAA,MAGA6D,WA5CA,SA4CAC,GACAlB,KAAA7C,QAAAC,YAAA8D,EACAlB,KAAAS,eAGAU,IAjDA,WAiDA,IAAAC,EAAApB,KACAA,KAAA7B,mBAAA,EACA6B,KAAArC,aAAA,QACA0D,WAAA,WACAD,EAAAE,MAAA,SAAAC,eACA,KAEAC,WAxDA,WAyDAC,IAAAzB,KAAApC,SAAAoC,KAAA0B,SAAAxE,OAAAU,WAGA+D,KA5DA,SA4DAX,EAAAY,GACA5B,KAAA7B,mBAAA,EACA6B,KAAArC,aAAA,QACAqC,KAAA9B,QAAA0D,EAAAC,OACA7B,KAAApC,UACAN,YAAAsE,EAAAtE,YAAAkD,KACAjD,UAAAqE,EAAArE,UAAAiD,KACAhD,KAAAoE,EAAApE,OAIAsE,UAvEA,WAuEA,IAAAC,EAAA/B,KACAA,KAAAsB,MAAA,SAAAU,SAAA,SAAAC,GACA,GAAAA,EACA,aAAAF,EAAApE,aACAoE,EAAA3B,MACA8B,KAAAhC,EAAA,EAAAiC,aAAAJ,EAAAnE,UACA0C,KAAA,SAAAC,GACAA,GAAA,IAAAA,EAAAC,OACAuB,EAAAK,UACArE,QAAA,OACAsE,KAAA,YAEAN,EAAA5D,mBAAA,EACA4D,EAAAtB,qBAGA,CACA,IAAA6B,EAAAb,OAAAM,EAAAnE,UACA0E,EAAAT,OAAAE,EAAA7D,QACA6D,EAAA3B,MAAAmC,IAAArC,EAAA,EAAAiC,aAAAG,GAAAhC,KAAA,SAAAC,GACAA,GAAA,IAAAA,EAAAC,OACAuB,EAAAK,UACArE,QAAA,OACAsE,KAAA,YAEAN,EAAA5D,mBAAA,EACA4D,EAAAtB,qBASA+B,kBA1GA,SA0GAxB,EAAAY,GAAA,IAAAa,EAAAzC,KACAA,KAAA5B,sBAAA,EACA4B,KAAAzB,cAAAqD,EAAAC,OACA7B,KAAA3B,gBAAAuD,EAAApE,KACAwC,KAAA1B,uBAAAsD,EAAAtE,YAAAoF,KACA,IAAAC,EAAAzC,EAAA,EAAAiC,aAAA,IAAAP,EAAAC,OACA7B,KAAAI,MAAAC,IAAAsC,GAAArC,KAAA,SAAAC,GACAA,GAAA,IAAAA,EAAAC,MAAAD,EAAArD,OACAuF,EAAA3D,gBAEAyB,EAAArD,KAAAgC,UACAqB,EAAArD,KAAAgC,SAAA0D,SACA,IAAArC,EAAArD,KAAAgC,SAAA0D,QAAAC,QAEAJ,EAAAnB,MAAAwB,aAAAC,eACAN,EAAAO,UAAAzC,EAAArD,KAAAgC,SAAA0D,UAIArC,EAAArD,KAAAgC,UACAqB,EAAArD,KAAAgC,SAAA+D,aACA,IAAA1C,EAAArD,KAAAgC,SAAA+D,YAAAJ,QAEAJ,EAAAnB,MAAA4B,gBAAAH,eACAN,EAAAO,UAAAzC,EAAArD,KAAAgC,SAAA+D,cAIA1C,EAAArD,KAAAgC,UACAqB,EAAArD,KAAAgC,SAAAiE,cACA,IAAA5C,EAAArD,KAAAgC,SAAAiE,aAAAN,QAEAJ,EAAAnB,MAAA8B,iBAAAL,eACAN,EAAAO,UAAAzC,EAAArD,KAAAgC,SAAAiE,mBAOAH,UAlJA,SAkJA9F,GAAA,IAAAmG,EAAArD,KACA,GAAA9C,GAAA,IAAAA,EAAA2F,OAKA,OAJA3F,EAAAoG,QAAA,SAAAC,EAAAvC,GACA,GAAAuC,EAAAC,SAAAhD,KAAA6C,EAAAvE,aAAA2E,KAAAF,EAAAG,QACAL,EAAAL,UAAAO,EAAAI,QAEA3D,KAAAlB,cAKA8E,gBA7JA,WA6JA,IAAAC,EAAA7D,KACA8D,EAAA9D,KAAAsB,MAAAwB,aAAAiB,iBAAA,MACAC,EAAAhE,KAAAsB,MAAA4B,gBAAAa,iBAAA,MACAE,EAAAjE,KAAAsB,MAAA8B,iBAAAW,iBAAA,MACAG,EAAA,IAAAC,EAAAC,EACApE,KAAAqE,YAAAP,EAAAI,GACAlE,KAAAqE,YAAAL,EAAAE,GACAlE,KAAAqE,YAAAJ,EAAAC,GACA,IAAAI,GACAC,QAAAC,IAAAN,GACArC,OAAA7B,KAAAzB,eAEAyB,KAAAI,MAAA8B,KAAAhC,EAAA,EAAAsC,kBAAA8B,GAAAhE,KAAA,SAAAC,GACAA,GAAA,IAAAA,EAAAC,MAAAqD,EAAAzB,SAAAqC,QAAA,QACAZ,EAAAzF,sBAAA,EACAyF,EAAApD,iBAKA4D,YAjLA,SAiLAP,EAAAI,GAAA,IAAAQ,EAAA1E,KACA8D,EAAAR,QAAA,SAAAC,GACA,IAAAoB,EAAAD,EAAAE,cAAArB,EAAAG,QACAiB,GAAAT,EAAA/C,IAAAwD,GACAT,EAAA/C,IAAAoC,EAAAG,WAMAkB,cA3LA,SA2LAlB,GACA,IAAAmB,EAAA7E,KAAAsB,MAAAwB,aAAAgC,QAAApB,GACA,IAAAqB,IAAAF,EAAA,WAAAA,EAAAG,WAAAnC,OAAA,CACA,IAAAoC,EAAAJ,EAAAK,OAAAF,YAAAH,EAAAG,WACA,GAAAC,EAAApC,OAAA,GACA,IAAAsC,EAAAF,EAAAG,OAAA,SAAA7B,GAAA,MACA,uBAAA8B,KAAA9B,EAAA9D,SAEA,GAAA0F,KAAAtC,QAAA,SAAAsC,EAAA,GAAAG,OAMAC,YAzMA,SAyMAvE,EAAAY,GAAA,IAAA4D,EAAAxF,KACAA,KAAAjB,mBAAA,EACAiB,KAAAhB,cAAA4C,EAAAC,OACA,IAAAc,EAAAzC,EAAA,EAAAiC,aAAA,IAAAP,EAAAC,OACA7B,KAAAI,MAAAC,IAAAsC,GAAArC,KAAA,SAAAC,GACAA,GAAA,IAAAA,EAAAC,MAAAD,EAAArD,OACAsI,EAAAvG,WAAAsB,EAAArD,KACAsI,EAAAvG,WAAA3B,YAAAkI,EAAAvG,WAAA3B,YAAAoF,KACA8C,EAAAtG,SAAAqB,EAAArD,KAAAgC,kBAKAuG,QApRA,WAqRAzF,KAAAS,cAEAT,KAAAH,aAAA,GACAG,KAAAH,aAAA,GACAG,KAAAH,aAAA,KC3dA6F,GADiBC,OAFjB,WAA0B,IAAAC,EAAA5F,KAAa6F,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,sBAAgCF,EAAA,WAAgBG,IAAA,UAAAD,YAAA,gBAAAE,OAAiDC,MAAAR,EAAAzI,QAAAkJ,cAAA,QAAAC,QAAA,EAAAC,iBAAA,WAAkFR,EAAA,UAAAA,EAAA,UAA4BI,OAAOK,KAAA,EAAAC,GAAA,MAAkBV,EAAA,gBAAqBI,OAAO1G,MAAA,OAAAiH,KAAA,OAAAC,YAAA,SAAgDZ,EAAA,YAAiBI,OAAOS,UAAA,IAAeR,OAAQS,MAAAjB,EAAAzI,QAAA,KAAA2J,SAAA,SAAAC,GAAkDnB,EAAAoB,KAAApB,EAAAzI,QAAA,wBAAA4J,IAAAE,OAAAF,IAA0EG,WAAA,mBAA4B,OAAAtB,EAAAuB,GAAA,KAAApB,EAAA,UAAmCI,OAAOK,KAAA,EAAAC,GAAA,MAAkBV,EAAA,gBAAqBI,OAAO1G,MAAA,SAAAiH,KAAA,iBAAuCX,EAAA,aAAkBI,OAAOS,UAAA,GAAAQ,YAAA,OAAmChB,OAAQS,MAAAjB,EAAAzI,QAAA,YAAA2J,SAAA,SAAAC,GAAyDnB,EAAAoB,KAAApB,EAAAzI,QAAA,cAAA4J,IAA0CG,WAAA,yBAAmCnB,EAAA,aAAkBI,OAAO1G,MAAA,KAAAoH,MAAA,KAAwBjB,EAAAuB,GAAA,KAAApB,EAAA,aAA8BI,OAAO1G,MAAA,KAAAoH,MAAA,MAAwB,WAAAjB,EAAAuB,GAAA,KAAApB,EAAA,UAAuCI,OAAOK,KAAA,EAAAC,GAAA,MAAkBV,EAAA,gBAAqBI,OAAO1G,MAAA,KAAAiH,KAAA,eAAiCX,EAAA,aAAkBI,OAAOS,UAAA,GAAAQ,YAAA,OAAmChB,OAAQS,MAAAjB,EAAAzI,QAAA,UAAA2J,SAAA,SAAAC,GAAuDnB,EAAAoB,KAAApB,EAAAzI,QAAA,YAAA4J,IAAwCG,WAAA,uBAAiCnB,EAAA,aAAkBI,OAAO1G,MAAA,KAAAoH,MAAA,OAA0BjB,EAAAuB,GAAA,KAAApB,EAAA,aAA8BI,OAAO1G,MAAA,KAAAoH,MAAA,QAA0B,eAAAjB,EAAAuB,GAAA,KAAApB,EAAA,UAAAA,EAAA,UAAwDI,OAAOK,KAAA,EAAAa,OAAA,MAAsBtB,EAAA,OAAYE,YAAA,iBAA2BF,EAAA,aAAkBE,YAAA,aAAAE,OAAgC9D,KAAA,UAAAiF,KAAA,kBAAyCC,IAAKC,MAAA5B,EAAA9E,UAAoB8E,EAAAuB,GAAA,sBAAAvB,EAAAuB,GAAA,KAAApB,EAAA,OAAAA,EAAA,aAAqE0B,aAAajK,KAAA,OAAAkK,QAAA,SAAAb,MAAAjB,EAAA+B,OAAAC,QAAAC,cAAA,cAAAX,WAAA,+CAA4IjB,YAAA,qBAAAE,OAA0C9D,KAAA,WAAiBkF,IAAKC,MAAA5B,EAAAzE,OAAiByE,EAAAuB,GAAA,YAAAvB,EAAAuB,GAAA,KAAApB,EAAA,OAA2CE,YAAA,iBAA2BF,EAAA,YAAiB+B,aAAaC,MAAA,QAAe5B,OAAQjJ,KAAA0I,EAAAnI,SAAAuK,MAAA,SAAAC,OAAA,GAAAC,OAAA,SAAiEnC,EAAA,mBAAwBI,OAAO6B,MAAA,SAAA3F,KAAA,QAAA5C,MAAA,KAAAsI,MAAA,KAAA/G,MAAA4E,EAAA7E,eAAmF6E,EAAAuB,GAAA,KAAApB,EAAA,mBAAoCI,OAAO6B,MAAA,SAAAtB,KAAA,OAAAjH,MAAA,UAA+CmG,EAAAuB,GAAA,KAAApB,EAAA,mBAAoCI,OAAO6B,MAAA,SAAAtB,KAAA,cAAAjH,MAAA,SAAAkH,YAAA,MAAwEwB,YAAAvC,EAAAwC,KAAsB9C,IAAA,UAAA+C,GAAA,SAAAC,GAAiC,OAAAvC,EAAA,KAAAH,EAAAuB,GAAAvB,EAAA2C,GAAAD,EAAA1G,IAAAtE,YAAAoF,gBAAkEkD,EAAAuB,GAAA,KAAApB,EAAA,mBAAoCI,OAAO6B,MAAA,SAAAtB,KAAA,YAAAjH,MAAA,MAAiD0I,YAAAvC,EAAAwC,KAAsB9C,IAAA,UAAA+C,GAAA,SAAAC,GAAiC,OAAAvC,EAAA,KAAAH,EAAAuB,GAAAvB,EAAA2C,GAAAD,EAAA1G,IAAArE,UAAAmF,gBAAgEkD,EAAAuB,GAAA,KAAApB,EAAA,mBAAoCI,OAAO6B,MAAA,SAAAtB,KAAA,aAAAjH,MAAA,OAAAkH,YAAA,SAAuEf,EAAAuB,GAAA,KAAApB,EAAA,mBAAoCI,OAAO6B,MAAA,SAAAtB,KAAA,UAAAjH,MAAA,SAAiDmG,EAAAuB,GAAA,KAAApB,EAAA,mBAAoCI,OAAO6B,MAAA,SAAAvI,MAAA,KAAAkH,YAAA,OAAgDwB,YAAAvC,EAAAwC,KAAsB9C,IAAA,UAAA+C,GAAA,SAAAC,GAAiC,OAAAvC,EAAA,aAAwBE,YAAA,aAAAE,OAAgC9D,KAAA,UAAAmG,UAAA5C,EAAA+B,OAAAC,QAAAC,cAAA,eAA4EN,IAAKC,MAAA,SAAAiB,GAAyB7C,EAAAjE,KAAA2G,EAAAI,OAAAJ,EAAA1G,SAAmCgE,EAAAuB,GAAA,kCAAAvB,EAAAuB,GAAA,KAAApB,EAAA,aAAuEE,YAAA,aAAAE,OAAgC9D,KAAA,UAAAmG,UAAA5C,EAAA+B,OAAAC,QAAAC,cAAA,eAA4EN,IAAKC,MAAA,SAAAiB,GAAyB7C,EAAApD,kBAAA8F,EAAAI,OAAAJ,EAAA1G,SAAgDgE,EAAAuB,GAAA,oCAAAvB,EAAAuB,GAAA,KAAApB,EAAA,aAAyEE,YAAA,aAAAE,OAAgC9D,KAAA,UAAAmG,UAAA5C,EAAA+B,OAAAC,QAAAC,cAAA,eAA4EN,IAAKC,MAAA,SAAAiB,GAAyB7C,EAAAL,YAAA+C,EAAAI,OAAAJ,EAAA1G,SAA0CgE,EAAAuB,GAAA,4CAAkD,OAAAvB,EAAAuB,GAAA,KAAApB,EAAA,OAAgCE,YAAA,mBAA6BF,EAAA,cAAmBI,OAAOzI,WAAAkI,EAAAlI,WAAAD,SAAAmI,EAAAnI,UAAoD8J,IAAKtG,WAAA2E,EAAA3E,eAA6B,GAAA2E,EAAAuB,GAAA,KAAApB,EAAA,aAAkCE,YAAA,WAAAE,OAA8BwC,MAAA/C,EAAAjI,aAAAiL,QAAAhD,EAAAzH,mBAAyDoJ,IAAKsB,iBAAA,SAAAJ,GAAkC7C,EAAAzH,kBAAAsK,GAA6BK,MAAAlD,EAAApE,cAAyBuE,EAAA,WAAgBG,IAAA,WAAAC,OAAsBC,MAAAR,EAAAhI,SAAAyB,MAAAuG,EAAA/H,aAA4CkI,EAAA,gBAAqBI,OAAO1G,MAAA,SAAA4G,cAAAT,EAAAtG,eAAAoH,KAAA,iBAAwEX,EAAA,aAAkBI,OAAOS,UAAA,GAAAQ,YAAA,OAAmChB,OAAQS,MAAAjB,EAAAhI,SAAA,YAAAkJ,SAAA,SAAAC,GAA0DnB,EAAAoB,KAAApB,EAAAhI,SAAA,cAAAmJ,IAA2CG,WAAA,0BAAoCnB,EAAA,aAAkBI,OAAO1G,MAAA,KAAAoH,MAAA,KAAwBjB,EAAAuB,GAAA,KAAApB,EAAA,aAA8BI,OAAO1G,MAAA,KAAAoH,MAAA,MAAwB,OAAAjB,EAAAuB,GAAA,KAAApB,EAAA,gBAAyCI,OAAO1G,MAAA,OAAA4G,cAAAT,EAAAtG,eAAAoH,KAAA,UAA+DX,EAAA,YAAiBI,OAAO4C,gBAAA,MAAAnC,UAAA,IAAqCR,OAAQS,MAAAjB,EAAAhI,SAAA,KAAAkJ,SAAA,SAAAC,GAAmDnB,EAAAoB,KAAApB,EAAAhI,SAAA,wBAAAmJ,IAAAE,OAAAF,IAA2EG,WAAA,oBAA6B,GAAAtB,EAAAuB,GAAA,KAAApB,EAAA,gBAAqCI,OAAO1G,MAAA,KAAA4G,cAAAT,EAAAtG,eAAAoH,KAAA,eAAkEX,EAAA,kBAAuBK,OAAOS,MAAAjB,EAAAhI,SAAA,UAAAkJ,SAAA,SAAAC,GAAwDnB,EAAAoB,KAAApB,EAAAhI,SAAA,YAAAmJ,IAAyCG,WAAA,wBAAkCnB,EAAA,YAAiBI,OAAO1G,MAAA,EAAAoH,MAAA,OAAuBjB,EAAAuB,GAAA,QAAAvB,EAAAuB,GAAA,KAAApB,EAAA,YAA4CI,OAAO1G,MAAA,EAAAoH,MAAA,OAAuBjB,EAAAuB,GAAA,oBAAAvB,EAAAuB,GAAA,KAAApB,EAAA,OAAmDE,YAAA,gBAAAE,OAAmC6C,KAAA,UAAgBA,KAAA,WAAejD,EAAA,aAAkBE,YAAA,WAAAE,OAA8B9D,KAAA,WAAiBkF,IAAKC,MAAA5B,EAAA9D,aAAuB8D,EAAAuB,GAAA,SAAAvB,EAAAuB,GAAA,KAAApB,EAAA,aAA8CE,YAAA,YAAAsB,IAA4BC,MAAA,SAAAiB,GAAyB7C,EAAAzH,mBAAA,MAAgCyH,EAAAuB,GAAA,iBAAAvB,EAAAuB,GAAA,KAAApB,EAAA,aAAsDE,YAAA,yBAAAE,OAA4CwC,MAAA,QAAAC,QAAAhD,EAAAxH,sBAAmDmJ,IAAKsB,iBAAA,SAAAJ,GAAkC7C,EAAAxH,qBAAAqK,MAAkC1C,EAAA,UAAeI,OAAO8C,OAAA,MAAalD,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,OAAYE,YAAA,oBAA8BF,EAAA,SAAAH,EAAAuB,GAAA,UAAAvB,EAAAuB,GAAA,KAAApB,EAAA,QAAAH,EAAAuB,GAAAvB,EAAA2C,GAAA3C,EAAAvH,wBAAAuH,EAAAuB,GAAA,KAAApB,EAAA,UAAyHI,OAAOK,KAAA,KAAUT,EAAA,OAAYE,YAAA,oBAA8BF,EAAA,SAAAH,EAAAuB,GAAA,YAAAvB,EAAAuB,GAAA,KAAApB,EAAA,QAAAH,EAAAuB,GAAAvB,EAAA2C,GAAA3C,EAAAtH,gCAAA,GAAAsH,EAAAuB,GAAA,KAAApB,EAAA,UAAsII,OAAO8C,OAAA,MAAalD,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,OAAYE,YAAA,iBAA2BL,EAAAuB,GAAA,cAAAvB,EAAAuB,GAAA,KAAApB,EAAA,gBAAsD+B,aAAaI,OAAA,WAAkBnC,EAAA,WAAgBG,IAAA,eAAAC,OAA0BjJ,KAAA0I,EAAAlH,mBAAAwK,uBAAAtD,EAAAjH,yBAAAwK,gBAAA,GAAAC,WAAA,SAAAC,MAAAzD,EAAArG,iBAAmJ,WAAAqG,EAAAuB,GAAA,KAAApB,EAAA,UAAuCI,OAAO8C,OAAA,MAAalD,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,OAAYE,YAAA,iBAA2BL,EAAAuB,GAAA,eAAAvB,EAAAuB,GAAA,KAAApB,EAAA,WAAkDG,IAAA,kBAAAC,OAA6BjJ,KAAA0I,EAAAnH,uBAAAyK,uBAAAtD,EAAAhH,kBAAAuK,gBAAA,GAAAC,WAAA,SAAAC,MAAAzD,EAAArG,iBAAgJ,OAAAqG,EAAAuB,GAAA,KAAApB,EAAA,UAAmCI,OAAO8C,OAAA,MAAalD,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,OAAYE,YAAA,iBAA2BL,EAAAuB,GAAA,eAAAvB,EAAAuB,GAAA,KAAApB,EAAA,WAAkDG,IAAA,mBAAAC,OAA8BjJ,KAAA0I,EAAApH,wBAAA0K,uBAAAtD,EAAA/G,mBAAAsK,gBAAA,GAAAC,WAAA,SAAAC,MAAAzD,EAAArG,iBAAkJ,OAAAqG,EAAAuB,GAAA,KAAApB,EAAA,OAAgCE,YAAA,gBAAAE,OAAmC6C,KAAA,UAAgBA,KAAA,WAAejD,EAAA,aAAkBE,YAAA,WAAAE,OAA8B9D,KAAA,WAAiBkF,IAAKC,MAAA5B,EAAAhC,mBAA6BgC,EAAAuB,GAAA,QAAAvB,EAAAuB,GAAA,KAAApB,EAAA,aAA6CE,YAAA,YAAAE,OAA+B9D,KAAA,WAAiBkF,IAAKC,MAAA,SAAAiB,GAAyB7C,EAAAxH,sBAAA,MAAmCwH,EAAAuB,GAAA,gBAAAvB,EAAAuB,GAAA,KAAApB,EAAA,aAAqDE,YAAA,yBAAAE,OAA4CwC,MAAA,QAAAC,QAAAhD,EAAA7G,mBAAgDwI,IAAKsB,iBAAA,SAAAJ,GAAkC7C,EAAA7G,kBAAA0J,MAA+B1C,EAAA,UAAeI,OAAO8C,OAAA,MAAalD,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,OAAYE,YAAA,oBAA8BF,EAAA,SAAAH,EAAAuB,GAAA,UAAAvB,EAAAuB,GAAA,KAAApB,EAAA,QAAAH,EAAAuB,GAAAvB,EAAA2C,GAAA3C,EAAA3G,WAAAzB,aAAAoI,EAAAuB,GAAA,KAAApB,EAAA,UAAyHI,OAAOK,KAAA,KAAUT,EAAA,OAAYE,YAAA,oBAA8BF,EAAA,SAAAH,EAAAuB,GAAA,YAAAvB,EAAAuB,GAAA,KAAApB,EAAA,QAAAH,EAAAuB,GAAAvB,EAAA2C,GAAA3C,EAAA3G,WAAA3B,qBAAA,GAAAsI,EAAAuB,GAAA,KAAApB,EAAA,UAAsII,OAAO8C,OAAA,MAAalD,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,OAAYE,YAAA,iBAA2BL,EAAAuB,GAAA,cAAAvB,EAAAuB,GAAA,KAAApB,EAAA,gBAAsD+B,aAAaI,OAAA,WAAkBnC,EAAA,WAAgBI,OAAOjJ,KAAA0I,EAAA1G,SAAA0D,QAAAwG,WAAA,SAAAC,MAAAzD,EAAArG,iBAA0E,WAAAqG,EAAAuB,GAAA,KAAApB,EAAA,UAAuCI,OAAO8C,OAAA,MAAalD,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,OAAYE,YAAA,iBAA2BL,EAAAuB,GAAA,eAAAvB,EAAAuB,GAAA,KAAApB,EAAA,WAAkDI,OAAOjJ,KAAA0I,EAAA1G,SAAA+D,YAAAmG,WAAA,SAAAC,MAAAzD,EAAArG,iBAA8E,OAAAqG,EAAAuB,GAAA,KAAApB,EAAA,UAAmCI,OAAO8C,OAAA,MAAalD,EAAA,UAAeI,OAAOK,KAAA,MAAWT,EAAA,OAAYE,YAAA,iBAA2BL,EAAAuB,GAAA,eAAAvB,EAAAuB,GAAA,KAAApB,EAAA,WAAkDI,OAAOjJ,KAAA0I,EAAA1G,SAAAiE,aAAAiG,WAAA,SAAAC,MAAAzD,EAAArG,iBAA+E,OAAAqG,EAAAuB,GAAA,KAAApB,EAAA,OAAgCE,YAAA,gBAAAE,OAAmC6C,KAAA,UAAgBA,KAAA,WAAejD,EAAA,aAAkBE,YAAA,WAAAE,OAA8B9D,KAAA,WAAiBkF,IAAKC,MAAA,SAAAiB,GAAyB7C,EAAA7G,mBAAA,MAAgC6G,EAAAuB,GAAA,qBAEt7SmC,oBCEjB,IAcAC,EAdAC,EAAA,OAcAC,CACAxM,EACAyI,GATA,EAXA,SAAAgE,GACAF,EAAA,QACAA,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/14.f9144d7ce64d54b742f3.js","sourcesContent":["<template>\r\n  <div class=\"contract-receipts\">\r\n    <el-form class=\"c-search-form\" :model=\"reqData\" ref=\"reqData\" label-width=\"102px\" :inline=\"true\" label-position=\"right\">\r\n      <el-row>\r\n        <el-col :span=\"8\" :xs=\"24\">\r\n          <el-form-item label=\"角色名称\" prop=\"name\" min-width=\"110\">\r\n            <el-input clearable v-model.trim=\"reqData.name\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\" :xs=\"24\">\r\n          <el-form-item label=\"所属组织架构\" prop=\"affiliation\">\r\n            <el-select v-model=\"reqData.affiliation\" clearable placeholder=\"请选择\">\r\n              <el-option label=\"总部\" :value=1></el-option>\r\n              <el-option label=\"商场\" :value=2>\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\" :xs=\"24\">\r\n          <el-form-item label=\"状态\" prop=\"available\">\r\n            <el-select v-model=\"reqData.available\" clearable placeholder=\"请选择\">\r\n              <el-option label=\"启用\" value=1></el-option>\r\n              <el-option label=\"停用\" value=0>\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col :span=\"8\" :offset=\"16\">\r\n          <div class=\"c-footer-btn\">\r\n            <el-button class=\"btn-search\" type=\"primary\" icon=\"el-icon-search\" @click=\"search\">查询</el-button>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n    <div>\r\n      <el-button class=\"btn-search btn-add\" type=\"primary\" v-show=\"$store.getters.getPermission('roleMain_2')\" @click=\"add\">添加</el-button>\r\n    </div>\r\n    <div class=\"c-table-wrap\">\r\n      <el-table :data=\"itemList\" style=\"width: 100%\" align=\"center\" stripe height=\"500\">\r\n        <el-table-column align=\"center\" type=\"index\" label=\"序号\" width=\"50\" :index=\"indexMethod\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"name\" label=\"角色名称\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"affiliation\" label=\"所属组织架构\" min-width=\"85\">\r\n          <template slot-scope=\"scope\">\r\n            <p>{{scope.row.affiliation.desc}}</p>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"available\" label=\"状态\">\r\n          <template slot-scope=\"scope\">\r\n            <p>{{scope.row.available.desc}}</p>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"createTime\" label=\"添加时间\" min-width=\"165\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" prop=\"creater\" label=\"添加人\">\r\n        </el-table-column>\r\n        <el-table-column align=\"center\" label=\"操作\" min-width=\"230\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button class=\"btn-handle\" type=\"primary\" :disabled=\"!$store.getters.getPermission('roleMain_3')\" @click=\"edit(scope.$index,scope.row)\">\r\n              修改\r\n            </el-button>\r\n            <el-button class=\"btn-handle\" type=\"primary\" :disabled=\"!$store.getters.getPermission('roleMain_5')\" @click=\"distribute_access(scope.$index,scope.row)\">\r\n              分配权限\r\n            </el-button>\r\n            <el-button class=\"btn-handle\" type=\"primary\" :disabled=\"!$store.getters.getPermission('roleMain_4')\" @click=\"access_info(scope.$index,scope.row)\">\r\n              权限详情\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <div class=\"pagination-box\">\r\n      <pagenation :pageparams=\"pageparams\" :itemList=\"itemList\" @handlePage=\"handlePage\"></pagenation>\r\n    </div>\r\n    <!-- 权限添加 -->\r\n    <el-dialog :title=\"dialog_title\" :visible.sync=\"dialogFormVisible\" class=\"s-dialog\" @close=\"clean_data\">\r\n      <el-form :model=\"add_data\" :rules=\"add_rules\" ref=\"add_form\">\r\n        <el-form-item label=\"所属组织架构\" :label-width=\"formLabelWidth\" prop=\"affiliation\">\r\n          <el-select v-model=\"add_data.affiliation\" clearable placeholder=\"请选择\">\r\n            <el-option label=\"总部\" :value=1></el-option>\r\n            <el-option label=\"商场\" :value=2></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色名称\" :label-width=\"formLabelWidth\" prop=\"name\">\r\n          <el-input v-model.trim=\"add_data.name\" auto-complete=\"off\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\" :label-width=\"formLabelWidth\" prop=\"available\">\r\n          <el-radio-group v-model=\"add_data.available\">\r\n            <el-radio :label=\"1\" value=1>启用</el-radio>\r\n            <el-radio :label=\"0\" value=0>停用</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"save_data\" class=\"btn-save\">保 存</el-button>\r\n        <el-button @click=\"dialogFormVisible = false\" class=\"btn-reset\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 权限分配弹框 -->\r\n    <el-dialog title=\"权限-分配\" :visible.sync=\"access_dialogVisible\" class=\"m-dialog access-dialog\">\r\n      <el-row :gutter=\"32\">\r\n        <el-col :span=\"16\">\r\n          <div class=\"u-roleInfo-item\">\r\n            <label>角色名称</label>\r\n            <span>{{distribute_name}}</span>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <div class=\"u-roleInfo-item\">\r\n            <label>所属组织架构</label>\r\n            <span>{{distribute_affiliation}}</span>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\">\r\n        <el-col :span=\"24\">\r\n          <div class=\"u-menu-title\">运营后台功能菜单</div>\r\n          <el-scrollbar style=\"height:400px\">\r\n            <el-tree :data=\"distribute_operate\" :default-checked-keys=\"distribute_operate_check\" show-checkbox node-key=\"menuId\"\r\n              :props=\"defaultProps\" ref=\"operate_tree\">\r\n            </el-tree>\r\n          </el-scrollbar>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\">\r\n        <el-col :span=\"24\">\r\n          <div class=\"u-menu-title\">APP运营功能菜单</div>\r\n            <el-tree :data=\"distribute_app_operate\" :default-checked-keys=\"app_operate_check\" show-checkbox node-key=\"menuId\"\r\n              :props=\"defaultProps\" ref=\"appOperate_tree\">\r\n            </el-tree>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\">\r\n        <el-col :span=\"24\">\r\n          <div class=\"u-menu-title\">APP商户功能菜单</div>\r\n            <el-tree :data=\"distribute_app_merchant\" :default-checked-keys=\"app_merchant_check\" show-checkbox node-key=\"menuId\"\r\n              :props=\"defaultProps\" ref=\"appMerchant_tree\">\r\n            </el-tree>\r\n        </el-col>\r\n      </el-row>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button class=\"btn-save\" type=\"primary\" @click=\"distribute_save\">保存</el-button>\r\n        <el-button class=\"btn-reset\" type=\"primary\" @click=\"access_dialogVisible = false\">取消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 权限详情弹窗 -->\r\n    <el-dialog title=\"权限-详情\" :visible.sync=\"accessInfo_dialog\" class=\"m-dialog access-dialog\">\r\n      <el-row :gutter=\"32\">\r\n        <el-col :span=\"16\">\r\n          <div class=\"u-roleInfo-item\">\r\n            <label>角色名称</label>\r\n            <span>{{accessInfo.name}}</span>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <div class=\"u-roleInfo-item\">\r\n            <label>所属组织架构</label>\r\n            <span>{{accessInfo.affiliation}}</span>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\">\r\n        <el-col :span=\"24\">\r\n          <div class=\"u-menu-title\">运营后台功能菜单</div>\r\n          <el-scrollbar style=\"height: 400px\">\r\n            <el-tree :data=\"menuTree.operate\" node-key=\"menuId\" :props=\"defaultProps\">\r\n            </el-tree>\r\n          </el-scrollbar>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\">\r\n        <el-col :span=\"24\">\r\n          <div class=\"u-menu-title\">APP运营功能菜单</div>\r\n            <el-tree :data=\"menuTree.app_operate\" node-key=\"menuId\" :props=\"defaultProps\">\r\n            </el-tree>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\">\r\n        <el-col :span=\"24\">\r\n          <div class=\"u-menu-title\">APP商户功能菜单</div>\r\n            <el-tree :data=\"menuTree.app_merchant\" node-key=\"menuId\" :props=\"defaultProps\">\r\n            </el-tree>\r\n        </el-col>\r\n      </el-row>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button class=\"btn-save\" type=\"primary\" @click=\"accessInfo_dialog = false\">关闭</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ApiSetting from \"../../../api/access-manage\";\r\n  import pagenation from \"@/components/pagenation\";\r\n  export default {\r\n    data() {\r\n      return {\r\n        reqData: {\r\n          currentPage: 1,\r\n          pageSize: 20,\r\n          affiliation: \"\",\r\n          available: \"\",\r\n          name: \"\"\r\n        },\r\n        itemList: [],\r\n        pageparams: {},\r\n        dialog_title: \"\",\r\n        add_data: {\r\n          affiliation: 1,\r\n          available: 1,\r\n          name: \"\"\r\n        },\r\n        add_rules: {\r\n          name: [\r\n            { required: true, message: \"请输入角色名称\", trigger: \"blur\" },\r\n            { max: 32, message: \"角色名称不能多于32个字符\", trigger: \"blur\" }\r\n          ]\r\n        },\r\n        edit_id: \"\",\r\n        dialogFormVisible: false,\r\n\r\n        access_dialogVisible: false,\r\n        distribute_name: \"\",\r\n        distribute_affiliation: \"\",\r\n        distribute_id: \"\",\r\n        distribute_app_merchant: [],\r\n        distribute_app_operate: [],\r\n        distribute_operate: [],\r\n\r\n        distribute_operate_check: [],\r\n        app_operate_check: [],\r\n        app_merchant_check: [],\r\n\r\n        tree_checked: [],\r\n\r\n        accessInfo_dialog: false,\r\n        accessInfo_id: \"\",\r\n        accessInfo: {},\r\n        menuTree: {},\r\n        form: {\r\n          name: \"\",\r\n          state: true\r\n        },\r\n        rules: {\r\n          name: [{ required: true, message: \"请输入活动名称\", trigger: \"blur\" }]\r\n        },\r\n        formLabelWidth: \"100px\",\r\n\r\n        defaultProps: {\r\n          children: \"list\",\r\n          label: \"name\"\r\n        }\r\n      };\r\n    },\r\n    components: { pagenation },\r\n    name: \"roleMain\",\r\n    methods: {\r\n      // 所有平台的所有权限\r\n      getOtherData(num) {\r\n        let muens = `${ApiSetting.menus}/${num}`;\r\n        this.$http.get(muens).then(res => {\r\n          if (res && res.code === 0 && res.data) {\r\n            switch (num) {\r\n              case 1:\r\n                this.distribute_operate = res.data;\r\n                break;\r\n              case 2:\r\n                this.distribute_app_operate = res.data;\r\n                break;\r\n              case 3:\r\n                this.distribute_app_merchant = res.data;\r\n                break;\r\n              default:\r\n                break;\r\n            }\r\n          } else {\r\n          }\r\n        });\r\n      },\r\n      // 列表信息\r\n      getListData() {\r\n        this.$http\r\n          .get(ApiSetting.roleList, { params: this.reqData })\r\n          .then(res => {\r\n            if (res && res.code === 0 && res.data) {\r\n              this.itemList = res.data;\r\n              this.pageparams = res.page;\r\n            } else {\r\n              this.itemList = [];\r\n            }\r\n          });\r\n      },\r\n      search() {\r\n        this.reqData.currentPage = 1;\r\n        this.getListData();\r\n      },\r\n      indexMethod(index) {\r\n        return index + (this.reqData.currentPage - 1) * 20 + 1;\r\n      },\r\n      // 翻页\r\n      handlePage(val) {\r\n        this.reqData.currentPage = val;\r\n        this.getListData();\r\n      },\r\n      // 添加角色\r\n      add() {\r\n        this.dialogFormVisible = true;\r\n        this.dialog_title = \"角色-添加\";\r\n        setTimeout(() => {\r\n          this.$refs[\"add_form\"].resetFields();\r\n        }, 50);\r\n      },\r\n      clean_data() {\r\n        Object.assign(this.add_data, this.$options.data().add_data);\r\n      },\r\n      // 编辑角色\r\n      edit(index, row) {\r\n        this.dialogFormVisible = true;\r\n        this.dialog_title = \"角色-修改\";\r\n        this.edit_id = row.roleId;\r\n        this.add_data = {\r\n          affiliation: row.affiliation.code,\r\n          available: row.available.code,\r\n          name: row.name\r\n        };\r\n      },\r\n      // 保存添加或修改的数据\r\n      save_data() {\r\n        this.$refs[\"add_form\"].validate(valid => {\r\n          if (valid) {\r\n            if (this.dialog_title === \"角色-添加\") {\r\n              this.$http\r\n                .post(ApiSetting.operate_role, this.add_data)\r\n                .then(res => {\r\n                  if (res && res.code === 0) {\r\n                    this.$message({\r\n                      message: \"保存成功\",\r\n                      type: \"success\"\r\n                    });\r\n                    this.dialogFormVisible = false;\r\n                    this.getListData();\r\n                  }\r\n                });\r\n            } else {\r\n              let edit_data = Object.assign({}, this.add_data);\r\n              edit_data.roleId = this.edit_id;\r\n              this.$http.put(ApiSetting.operate_role, edit_data).then(res => {\r\n                if (res && res.code === 0) {\r\n                  this.$message({\r\n                    message: \"保存成功\",\r\n                    type: \"success\"\r\n                  });\r\n                  this.dialogFormVisible = false;\r\n                  this.getListData();\r\n                }\r\n              });\r\n            }\r\n          }\r\n        });\r\n      },\r\n\r\n      // 分配权限\r\n      distribute_access(index, row) {\r\n        this.access_dialogVisible = true;\r\n        this.distribute_id = row.roleId;\r\n        this.distribute_name = row.name;\r\n        this.distribute_affiliation = row.affiliation.desc;\r\n        let roleInfo = `${ApiSetting.operate_role}/${row.roleId}`;\r\n        this.$http.get(roleInfo).then(res => {\r\n          if (res && res.code === 0 && res.data) {\r\n            this.tree_checked = [];\r\n            if (\r\n              res.data.menuTree &&\r\n              res.data.menuTree.operate &&\r\n              res.data.menuTree.operate.length !== 0\r\n            ) {\r\n              this.$refs.operate_tree.setCheckedKeys(\r\n                this.filterIds(res.data.menuTree.operate)\r\n              );\r\n            }\r\n            if (\r\n              res.data.menuTree &&\r\n              res.data.menuTree.app_operate &&\r\n              res.data.menuTree.app_operate.length !== 0\r\n            ) {\r\n              this.$refs.appOperate_tree.setCheckedKeys(\r\n                this.filterIds(res.data.menuTree.app_operate)\r\n              );\r\n            }\r\n            if (\r\n              res.data.menuTree &&\r\n              res.data.menuTree.app_merchant &&\r\n              res.data.menuTree.app_merchant.length !== 0\r\n            ) {\r\n              this.$refs.appMerchant_tree.setCheckedKeys(\r\n                this.filterIds(res.data.menuTree.app_merchant)\r\n              );\r\n            }\r\n          }\r\n        });\r\n      },\r\n\r\n      filterIds(data) {\r\n        if (data && data.length !== 0) {\r\n          data.forEach((item, index) => {\r\n            if (item.menuType.code == 4) this.tree_checked.push(item.menuId);\r\n            else this.filterIds(item.list);\r\n          });\r\n          return this.tree_checked;\r\n        }\r\n      },\r\n\r\n      // 权限分配保存数据\r\n      distribute_save() {\r\n        let node = this.$refs.operate_tree.getCheckedNodes(true, true);\r\n        let node1 = this.$refs.appOperate_tree.getCheckedNodes(true, true);\r\n        let node2 = this.$refs.appMerchant_tree.getCheckedNodes(true, true);\r\n        let parentIds = new Set();\r\n        this.processData(node, parentIds);\r\n        this.processData(node1, parentIds);\r\n        this.processData(node2, parentIds);\r\n        let param = {\r\n          menuIds: Array.from(parentIds),\r\n          roleId: this.distribute_id\r\n        };\r\n        this.$http.post(ApiSetting.distribute_access, param).then(res => {\r\n          if (res && res.code === 0) this.$message.success(\"保存成功\");\r\n          this.access_dialogVisible = false;\r\n          this.getListData();\r\n        });\r\n      },\r\n\r\n      //  提交数据处理\r\n      processData(node, parentIds) {\r\n        node.forEach(item => {\r\n          let searchId = this.addSearchData(item.menuId);\r\n          if (searchId) parentIds.add(searchId);\r\n          parentIds.add(item.menuId);\r\n          //   item.parentIds.forEach(i => parentIds.add(parseInt(i)))\r\n        });\r\n      },\r\n\r\n      // 添加查询功能\r\n      addSearchData(menuId) {\r\n        let menuNode = this.$refs.operate_tree.getNode(menuId);\r\n        if (!Object.is(menuNode, null) && menuNode.childNodes.length === 0) {\r\n          let cdl = menuNode.parent.childNodes || menuNode.childNodes;\r\n          if (cdl.length > 1) {\r\n            let searchNode = cdl.filter(item =>\r\n              /([\\u67e5][\\u8be2]*)/g.test(item.label)\r\n            );\r\n            if (searchNode && searchNode.length >= 1) return searchNode[0].key;\r\n          }\r\n        }\r\n      },\r\n\r\n      // 权限详情\r\n      access_info(index, row) {\r\n        this.accessInfo_dialog = true;\r\n        this.accessInfo_id = row.roleId;\r\n        let roleInfo = `${ApiSetting.operate_role}/${row.roleId}`;\r\n        this.$http.get(roleInfo).then(res => {\r\n          if (res && res.code === 0 && res.data) {\r\n            this.accessInfo = res.data;\r\n            this.accessInfo.affiliation = this.accessInfo.affiliation.desc;\r\n            this.menuTree = res.data.menuTree || [];\r\n          }\r\n        });\r\n      }\r\n    },\r\n    created() {\r\n      this.getListData();\r\n      // 获取不同平台的所有权限\r\n      this.getOtherData(1);\r\n      this.getOtherData(2);\r\n      this.getOtherData(3);\r\n    }\r\n  };\r\n</script>\r\n<style lang=\"less\" scoped>\r\n  @import url(\"./index.less\");\r\n\r\n  .access-dialog .el-tree-node__content .el-tree-node__label::before {\r\n    content: url(\"../../../assets/images/sdocument.png\") !important;\r\n  }\r\n</style>\r\n<style lang=\"less\">\r\n  @import url(\"./element-index.less\");\r\n\r\n  .access-dialog.el-tree>div .el-tree-node,\r\n  .access-dialog .el-tree>div {\r\n    display: block;\r\n  }\r\n\r\n  .add_dialog {\r\n    .el-checkbox:nth-child(1) {\r\n      margin-right: 30px;\r\n    }\r\n\r\n    .el-checkbox+.el-checkbox {\r\n      margin-left: 0;\r\n      margin-right: 30px;\r\n    }\r\n  }\r\n\r\n  .add_dialog .u-role-ckeckBox .el-form-item__content {\r\n    width: 480px;\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/access_manage/role_maintenance/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"contract-receipts\"},[_c('el-form',{ref:\"reqData\",staticClass:\"c-search-form\",attrs:{\"model\":_vm.reqData,\"label-width\":\"102px\",\"inline\":true,\"label-position\":\"right\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"name\",\"min-width\":\"110\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.reqData.name),callback:function ($$v) {_vm.$set(_vm.reqData, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.name\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"所属组织架构\",\"prop\":\"affiliation\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.reqData.affiliation),callback:function ($$v) {_vm.$set(_vm.reqData, \"affiliation\", $$v)},expression:\"reqData.affiliation\"}},[_c('el-option',{attrs:{\"label\":\"总部\",\"value\":1}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"商场\",\"value\":2}})],1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":\"available\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.reqData.available),callback:function ($$v) {_vm.$set(_vm.reqData, \"available\", $$v)},expression:\"reqData.available\"}},[_c('el-option',{attrs:{\"label\":\"启用\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"停用\",\"value\":\"0\"}})],1)],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":8,\"offset\":16}},[_c('div',{staticClass:\"c-footer-btn\"},[_c('el-button',{staticClass:\"btn-search\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")])],1)])],1)],1),_vm._v(\" \"),_c('div',[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$store.getters.getPermission('roleMain_2')),expression:\"$store.getters.getPermission('roleMain_2')\"}],staticClass:\"btn-search btn-add\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.add}},[_vm._v(\"添加\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"c-table-wrap\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.itemList,\"align\":\"center\",\"stripe\":\"\",\"height\":\"500\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"type\":\"index\",\"label\":\"序号\",\"width\":\"50\",\"index\":_vm.indexMethod}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"name\",\"label\":\"角色名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"affiliation\",\"label\":\"所属组织架构\",\"min-width\":\"85\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',[_vm._v(_vm._s(scope.row.affiliation.desc))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"available\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',[_vm._v(_vm._s(scope.row.available.desc))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"createTime\",\"label\":\"添加时间\",\"min-width\":\"165\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"creater\",\"label\":\"添加人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"min-width\":\"230\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticClass:\"btn-handle\",attrs:{\"type\":\"primary\",\"disabled\":!_vm.$store.getters.getPermission('roleMain_3')},on:{\"click\":function($event){_vm.edit(scope.$index,scope.row)}}},[_vm._v(\"\\n            修改\\n          \")]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-handle\",attrs:{\"type\":\"primary\",\"disabled\":!_vm.$store.getters.getPermission('roleMain_5')},on:{\"click\":function($event){_vm.distribute_access(scope.$index,scope.row)}}},[_vm._v(\"\\n            分配权限\\n          \")]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-handle\",attrs:{\"type\":\"primary\",\"disabled\":!_vm.$store.getters.getPermission('roleMain_4')},on:{\"click\":function($event){_vm.access_info(scope.$index,scope.row)}}},[_vm._v(\"\\n            权限详情\\n          \")])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination-box\"},[_c('pagenation',{attrs:{\"pageparams\":_vm.pageparams,\"itemList\":_vm.itemList},on:{\"handlePage\":_vm.handlePage}})],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"s-dialog\",attrs:{\"title\":_vm.dialog_title,\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event},\"close\":_vm.clean_data}},[_c('el-form',{ref:\"add_form\",attrs:{\"model\":_vm.add_data,\"rules\":_vm.add_rules}},[_c('el-form-item',{attrs:{\"label\":\"所属组织架构\",\"label-width\":_vm.formLabelWidth,\"prop\":\"affiliation\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.add_data.affiliation),callback:function ($$v) {_vm.$set(_vm.add_data, \"affiliation\", $$v)},expression:\"add_data.affiliation\"}},[_c('el-option',{attrs:{\"label\":\"总部\",\"value\":1}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"商场\",\"value\":2}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"label-width\":_vm.formLabelWidth,\"prop\":\"name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"clearable\":\"\"},model:{value:(_vm.add_data.name),callback:function ($$v) {_vm.$set(_vm.add_data, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"add_data.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"状态\",\"label-width\":_vm.formLabelWidth,\"prop\":\"available\"}},[_c('el-radio-group',{model:{value:(_vm.add_data.available),callback:function ($$v) {_vm.$set(_vm.add_data, \"available\", $$v)},expression:\"add_data.available\"}},[_c('el-radio',{attrs:{\"label\":1,\"value\":\"1\"}},[_vm._v(\"启用\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":0,\"value\":\"0\"}},[_vm._v(\"停用\")])],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"btn-save\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save_data}},[_vm._v(\"保 存\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-reset\",on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"m-dialog access-dialog\",attrs:{\"title\":\"权限-分配\",\"visible\":_vm.access_dialogVisible},on:{\"update:visible\":function($event){_vm.access_dialogVisible=$event}}},[_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":16}},[_c('div',{staticClass:\"u-roleInfo-item\"},[_c('label',[_vm._v(\"角色名称\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.distribute_name))])])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"u-roleInfo-item\"},[_c('label',[_vm._v(\"所属组织架构\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.distribute_affiliation))])])])],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":24}},[_c('div',{staticClass:\"u-menu-title\"},[_vm._v(\"运营后台功能菜单\")]),_vm._v(\" \"),_c('el-scrollbar',{staticStyle:{\"height\":\"400px\"}},[_c('el-tree',{ref:\"operate_tree\",attrs:{\"data\":_vm.distribute_operate,\"default-checked-keys\":_vm.distribute_operate_check,\"show-checkbox\":\"\",\"node-key\":\"menuId\",\"props\":_vm.defaultProps}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":24}},[_c('div',{staticClass:\"u-menu-title\"},[_vm._v(\"APP运营功能菜单\")]),_vm._v(\" \"),_c('el-tree',{ref:\"appOperate_tree\",attrs:{\"data\":_vm.distribute_app_operate,\"default-checked-keys\":_vm.app_operate_check,\"show-checkbox\":\"\",\"node-key\":\"menuId\",\"props\":_vm.defaultProps}})],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":24}},[_c('div',{staticClass:\"u-menu-title\"},[_vm._v(\"APP商户功能菜单\")]),_vm._v(\" \"),_c('el-tree',{ref:\"appMerchant_tree\",attrs:{\"data\":_vm.distribute_app_merchant,\"default-checked-keys\":_vm.app_merchant_check,\"show-checkbox\":\"\",\"node-key\":\"menuId\",\"props\":_vm.defaultProps}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"btn-save\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.distribute_save}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-reset\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.access_dialogVisible = false}}},[_vm._v(\"取消\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"m-dialog access-dialog\",attrs:{\"title\":\"权限-详情\",\"visible\":_vm.accessInfo_dialog},on:{\"update:visible\":function($event){_vm.accessInfo_dialog=$event}}},[_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":16}},[_c('div',{staticClass:\"u-roleInfo-item\"},[_c('label',[_vm._v(\"角色名称\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.accessInfo.name))])])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticClass:\"u-roleInfo-item\"},[_c('label',[_vm._v(\"所属组织架构\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.accessInfo.affiliation))])])])],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":24}},[_c('div',{staticClass:\"u-menu-title\"},[_vm._v(\"运营后台功能菜单\")]),_vm._v(\" \"),_c('el-scrollbar',{staticStyle:{\"height\":\"400px\"}},[_c('el-tree',{attrs:{\"data\":_vm.menuTree.operate,\"node-key\":\"menuId\",\"props\":_vm.defaultProps}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":24}},[_c('div',{staticClass:\"u-menu-title\"},[_vm._v(\"APP运营功能菜单\")]),_vm._v(\" \"),_c('el-tree',{attrs:{\"data\":_vm.menuTree.app_operate,\"node-key\":\"menuId\",\"props\":_vm.defaultProps}})],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":24}},[_c('div',{staticClass:\"u-menu-title\"},[_vm._v(\"APP商户功能菜单\")]),_vm._v(\" \"),_c('el-tree',{attrs:{\"data\":_vm.menuTree.app_merchant,\"node-key\":\"menuId\",\"props\":_vm.defaultProps}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticClass:\"btn-save\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.accessInfo_dialog = false}}},[_vm._v(\"关闭\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-f634c0c8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/access_manage/role_maintenance/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f634c0c8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f634c0c8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=1!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f634c0c8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f634c0c8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/access_manage/role_maintenance/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}