{"version":3,"sources":["webpack:///src/views/estate_manage/company_manage/edit_record/index.vue","webpack:///./src/views/estate_manage/company_manage/edit_record/index.vue?0255","webpack:///./src/views/estate_manage/company_manage/edit_record/index.vue"],"names":["edit_record","name","data","_this","this","pickerOptions","disabledDate","time","myDate","Date","getTime","getFullYear","getMonth","reqData","accountFor","amount","assess","companyId","contractValue","financeId","marketCode","payment","paymentMethod","remittee","amountPaid","rules","required","message","trigger","validator","rule","value","callback","test","Number","Error","pattern","max","companyList","fileList","uploadUrl","basicApi_estateApi","imageUpload","marketSearch","checkEdit","recode","role","components","selectMarket","created","getEditData","$route","params","computed","gTicket","$store","state","reMsg","get","methods","submitForm","formName","_this2","$refs","validate","valid","imgArr","length","forEach","item","imgUrl","indexOf","push","extends_default","totalDays","qualifiedDays","handleSave","method","_this3","$http","url","finance","then","res","$message","success","msg","$router","commit","_this4","getCompanyList","setTimeout","Object","auth","companyChange","handleRemove","file","handleList","code","handleExceed","files","warning","beforeRemove","$confirm","beforeLogoUpload","isJPG","type","isLt2M","size","error","getPay","getRecord","_this5","financeContract","_this6","financeCheck","_this7","showLoading","company_manage_edit_record","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","label-position","inline","gutter","span","xs","label","prop","checkMarket","_v","clearable","placeholder","on","change","$$v","$set","expression","_l","index","key","companyName","value-format","picker-options","disabled","trim","_s","action","defaults","baseURL","before-remove","multiple","limit","headers","on-exceed","file-list","on-success","before-upload","on-remove","offset","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/66.bb5bb0a5438ed8ef9bd1.js","sourcesContent":["<template>\r\n  <div class=\"g-add-record-two\">\r\n  \t<el-form  class=\"c-search-form\" :model=\"reqData\" ref=\"reqData\" :rules=\"rules\" label-width=\"110px\"\r\n              label-position=\"right\" :inline=\"true\">\r\n        <el-row :gutter=\"32\" class=\"u-bottom\">\r\n        <el-col :span=\"8\" :xs=\"24\">\r\n           <el-form-item label=\"所属商场\" prop=\"marketCode\">\r\n       <select-market :reqData=\"reqData\" :checkMarket=\"checkEdit\"></select-market>\r\n      </el-form-item>\r\n        </el-col>\r\n          <el-col :span=\"8\" :xs=\"24\">\r\n          <el-form-item label=\"物业公司\" prop=\"companyId\">\r\n              <el-select v-model=\"reqData.companyId\" clearable placeholder=\"请选择\" @change=\"companyChange\">\r\n                <el-option\r\n                  v-for=\"(item, index) in companyList\"\r\n                  :key=\"index\"\r\n                  :label=\"item.companyName\"\r\n                  :value=\"item.companyId\">\r\n                </el-option>\r\n              </el-select>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"8\" :xs=\"24\">\r\n          <el-form-item label='物业考核周期' prop=\"assess\">\r\n            <el-date-picker\r\n      v-model=\"reqData.assess\"\r\n      type=\"month\"\r\n      value-format=\"yyyy-MM\"\r\n      placeholder=\"选择月\"\r\n      :picker-options=\"pickerOptions\"\r\n      @change=\"getRecord\"\r\n      disabled>\r\n    </el-date-picker>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\" class=\"u-top\">\r\n         <el-col :span=\"8\" :xs=\"24\">\r\n          <el-form-item label='收款方' prop=\"remittee\">\r\n            <el-input clearable v-model.trim=\"reqData.remittee\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"11\" :xs=\"24\" class=\"u-tip\">\r\n          <el-form-item label='合同金额（应付)' prop=\"contractValue\" label-width=\"140px\">\r\n            {{reqData.contractValue||0.00}}\r\n          </el-form-item>\r\n          <span>收费标准*人事编制</span>\r\n        </el-col>\r\n      </el-row>\r\n        <el-row :gutter=\"32\">\r\n         <el-col :span=\"8\" :xs=\"24\">\r\n          <el-form-item label='扣款金额' prop=\"amount\">\r\n            <el-input clearable v-model.trim=\"reqData.amount\" placeholder=\"0.00\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n        <el-col :span=\"12\" :xs=\"24\" class=\"u-tip-down\">\r\n          <el-form-item label='实付金额' prop=\"amountPaid\" label-width=\"102px\">\r\n            {{reMsg || 0.00}}\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\">\r\n      \t <el-col :span=\"8\" :xs=\"24\">\r\n          <el-form-item label='说明' prop=\"accountFor\">\r\n            <el-input clearable v-model.trim=\"reqData.accountFor\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n       <el-col :span=\"11\" :xs=\"24\" class=\"u-tip-down\">\r\n          <el-form-item label='付款方' prop=\"payment\" label-width=\"102px\">\r\n            <el-input clearable v-model.trim=\"reqData.payment\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\">\r\n         <el-col :span=\"8\" :xs=\"24\">\r\n          <el-form-item label='付款方式' prop=\"paymentMethod\">\r\n            <el-input clearable v-model.trim=\"reqData.paymentMethod\"></el-input>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n        <el-row :gutter=\"32\">\r\n        <el-col :span=\"11\" :xs=\"24\">\r\n          <el-form-item label=\"凭证\r\n\" prop=\"skuCode\" >\r\n            <el-upload\r\n  class=\"upload-demo\"\r\n  :action=\"$http.defaults.baseURL+uploadUrl\"\r\n  :before-remove=\"beforeRemove\"\r\n  multiple\r\n  :limit=\"10\"\r\n  :headers=\"{gTicket:gTicket}\"\r\n  :on-exceed=\"handleExceed\"\r\n  :file-list=\"fileList\"\r\n  :on-success=\"handleList\"\r\n  :before-upload=\"beforeLogoUpload\"\r\n  :on-remove=\"handleRemove\">\r\n  <el-button size=\"small\" type=\"primary\" class=\"btn-80 btn-upload\">浏览</el-button>\r\n</el-upload>\r\n          </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"32\" class=\"u-button\">\r\n        <el-col :span=\"8\" :offset=\"16\">\r\n            <el-button class=\"btn-save-big\" type=\"primary\" @click=\"submitForm('reqData')\">保存</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApiSettingCom from '@/api/apiSetting'\r\nimport ApiSetting from '@/api/basicApi-estateApi'\r\nimport {keysFilter} from '@/utils/auth'\r\nimport selectMarket from '@/components/selectMarket'\r\nexport default {\r\n  name:'editRecord',\r\n  data() {\r\n    //验证数字\r\n    let checkAmount=(rule, value, callback) => {\r\n        if (/^\\d+(\\.\\d{1,2})?$/.test(value) == true && Number(value) > this.reqData.contractValue) {\r\n          callback(new Error('扣款金额不能超过合同金额'));\r\n        }else{\r\n          callback();\r\n        }\r\n      };\r\n    return {\r\n      pickerOptions: {\r\n          disabledDate(time) {\r\n            let myDate = new Date()\r\n            return time.getTime() > new Date(myDate.getFullYear(), myDate.getMonth(), 0, 0, 0, 0).getTime()\r\n   }\r\n },\r\n      reqData:{\r\n        accountFor:'',\r\n        amount:'',\r\n        assess:'',\r\n        companyId: '',\r\n        contractValue:'0.00',\r\n        financeId:\"\",\r\n        marketCode:'',\r\n        payment:'',\r\n        paymentMethod:'',\r\n        remittee:''\r\n      },\r\n      amountPaid:'',\r\n      rules:{\r\n\t\tmarketCode:[\r\n\t\t{ required: true, message: '请选择商场', trigger: 'change' }\r\n\t\t],\r\n\t\tcompanyId:[{ required: true, message: '请选择物业公司', trigger: 'change' }\r\n\t\t],\r\n\t\tassess: [\r\n            { required: true, message: '请选择考核周期', trigger: 'change' }\r\n          ],\r\n          amount:[\r\n          { validator: checkAmount, required: false,trigger: 'blur' },\r\n          {pattern: /^\\d+(\\.\\d{1,2})?$/, message: '请输入正确格式的金额(2位小数)',trigger: 'blur'},\r\n          ],\r\n          payment:[\r\n            { max: 50, message: '输入字数在50字以内', trigger: 'blur' }\r\n          ],\r\n          remittee:[\r\n            { max: 50, message: '输入字数在50字以内', trigger: 'blur' }\r\n          ],\r\n          accountFor:[\r\n            { max: 50, message: '输入字数在50字以内', trigger: 'blur' }\r\n          ],\r\n          paymentMethod:[\r\n            { max: 50, message: '输入字数在50字以内', trigger: 'blur' }\r\n          ],\r\n      },\r\n      companyList:[],\r\n      fileList:[],\r\n      uploadUrl:ApiSetting.imageUpload,\r\n      marketSearch:[],\r\n      checkEdit:true,\r\n      recode:{},\r\n      role:false\r\n    }\r\n\r\n  },\r\n  components:{selectMarket},\r\n  created(){\r\n    this.getEditData(this.$route.params.financeId)\r\n  },\r\n  computed: {\r\n    gTicket:function(){\r\n      return this.$store.state.gTicket\r\n    },\r\n     reMsg:{\r\n                get:function(){\r\n                        return this.reqData.contractValue-this.reqData.amount\r\n                    }\r\n              }\r\n  },\r\n  methods: {\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n          let imgArr = []\r\n          if(this.fileList.length != 0){\r\n            this.fileList.forEach(item => {\r\n             let imgUrl = {}\r\n            imgUrl['name'] = item['name']\r\n            imgUrl['url'] = item['url']\r\n            if(imgArr.indexOf(item) == -1){\r\n              imgArr.push(imgUrl)\r\n            }\r\n          })\r\n          }\r\n          var data = {\r\n            ...this.reqData,\r\n            imgUrl:imgArr,\r\n            amountPaid:this.reMsg,\r\n            totalDays:this.recode.totalDays||\"\",\r\n            qualifiedDays:this.recode.qualifiedDays||\"\"\r\n          }\r\n              this.handleSave('put',data)\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      //保存的函数\r\n      handleSave(method,data){\r\n        this.$http({\r\n              url:ApiSetting.finance,\r\n              method:method,\r\n              data:data\r\n            }).then(res => {\r\n              if(res){\r\n                  this.$message.success(res.msg)\r\n                  this.$router.push({name:\"expenditure\"})\r\n                  this.$store.commit(\"delete_tabs\", this.$route);\r\n              }\r\n            })\r\n      },\r\n      //获取编辑页内容\r\n      getEditData(params){\r\n        this.$http.get(ApiSetting.finance,{params:{financeId:params}}).then(res => {\r\n          if(res && res.data.length != 0){\r\n              this.getCompanyList(res.data[0].marketCode)\r\n              setTimeout(() => {\r\n                 this.reqData= keysFilter(res.data[0],true,['marketName','companyName','createUser','createName','createTime','year','month','totalDays'])   \r\n              this.companyChange()\r\n               if(res.data[0].imgUrl){\r\n                 this.fileList = res.data[0].imgUrl\r\n                }\r\n              },20)\r\n          }\r\n        })\r\n      },\r\n      handleRemove(file, fileList) {\r\n       this.fileList = fileList\r\n      },\r\n        handleList(res, file, fileList){\r\n      if(res && res.code == 0 && res.data){\r\n          this.fileList.push(res.data)\r\n        }\r\n    },\r\n     handleExceed(files, fileList) {\r\n        this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\r\n      },\r\n     beforeRemove(file, fileList) {\r\n        return this.$confirm(`确定移除 ${ file.name }？`);\r\n      },\r\n    // 上传图片前限制\r\nbeforeLogoUpload(file) {\r\nconst isJPG =\r\nfile.type === \"image/jpeg\" || \"image/png\" || \"image/jpg\" || \"image/bmp\";\r\nconst isLt2M = file.size / 1024 / 1024 < 5;\r\nif (!isJPG) {\r\nthis.$message.error(\"上传图片只能是 jpg、png、jpeg、bmp格式!\");\r\n}\r\nif (!isLt2M) {\r\nthis.$message.error(\"上传图片大小不能超过5MB!\");\r\n}\r\nreturn isJPG && isLt2M;\r\n},\r\n  companyChange(){\r\n    this.getPay()\r\n    this.getRecord()\r\n  },\r\n  getPay(){\r\n     this.$http.get(ApiSetting.financeContract,{params:{companyId:this.reqData.companyId}}).then(res => {\r\n      if(res && res.code == 0 && res.data){\r\n        this.reqData.contractValue = res.data.contractValue\r\n      }\r\n    })\r\n  },\r\n    //获取固定记录\r\n    getRecord(){\r\n      if(this.reqData.companyId != \"\" && this.reqData.assess!=\"\")\r\n        this.$http.get(ApiSetting.financeCheck,{params:{\r\n            companyId:this.reqData.companyId,\r\n            data:this.reqData.assess\r\n          }}).then(res => {\r\n            if(res && res.code == 0 && res.data){\r\n                this.recode = res.data\r\n            }else{\r\n              this.recode = {}\r\n            }\r\n          })\r\n    },\r\n     //获取所有物业公司\r\n    getCompanyList(marketCode) {\r\n      this.$http({\r\n        url:ApiSetting.companyList,\r\n        params:{marketCode:marketCode},\r\n        method:'get',\r\n        showLoading:false\r\n        }).then(res => {\r\n        if (res && res.code == 0 && res.data) {\r\n            this.companyList = res.data;     \r\n        }\r\n      });\r\n    },\r\n   }\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.g-add-record-two {\r\n  .el-col-5{\r\n    width: 20%;\r\n  }\r\n  .el-col-offset-16 {\r\n    margin-left: 35%;\r\n    margin-top: 60px;\r\n  }\r\n  .c-search-form .el-form-item__content {\r\n    text-align: left;\r\n  }\r\n  .u-textarea{\r\n    width: 100%;\r\n     .el-form-item__content {\r\n    width:93%;\r\n  }\r\n  }\r\n   .el-date-editor.el-input, .el-date-editor.el-input__inner {\r\n    width: 200px;\r\n  }\r\n  .c-search-form > .u-list > div {\r\n    text-align: center;\r\n  }\r\n  .u-tip-down,.u-tip{\r\n       .el-form-item__content {\r\n        width:auto;\r\n       }\r\n    }\r\n    .u-tip-down{\r\n      text-align: left !important;\r\n      padding-left: 88px !important;\r\n    } \r\n\r\n      .el-range-separator {\r\n    line-height: 29px;\r\n  }\r\n  .el-date-editor .el-range__icon {\r\n    line-height: 29px;\r\n  }\r\n}\r\n</style>\r\n<style scoped lang=\"less\">\r\n.u-tip {\r\n  text-align: left !important;\r\n  padding-left: 50px !important;\r\n  span{\r\n    display: inline-block;\r\n  margin-left: 10px;\r\n  line-height: 40px;\r\n  font-size: 12px;\r\n  color: #9B9B9B;\r\n  }\r\n\r\n}\r\n .u-bottom {\r\n    margin-bottom: 24px;\r\n  }\r\n  .u-top{\r\n    position:relative;\r\n    padding-top:50px;\r\n  }\r\n  .u-top:before {\r\n    content:\"\";\r\n    display:inline-block;\r\n    height: 1px;\r\n    width: 90%;\r\n    position:absolute;\r\n    left:50%;\r\n    margin-left: -45%;\r\n    top:0px;\r\n    background: #EBEBEB;\r\n  }\r\n   .btn-80 {\r\n    line-height: 31px;\r\n  }\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/estate_manage/company_manage/edit_record/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"g-add-record-two\"},[_c('el-form',{ref:\"reqData\",staticClass:\"c-search-form\",attrs:{\"model\":_vm.reqData,\"rules\":_vm.rules,\"label-width\":\"110px\",\"label-position\":\"right\",\"inline\":true}},[_c('el-row',{staticClass:\"u-bottom\",attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"所属商场\",\"prop\":\"marketCode\"}},[_c('select-market',{attrs:{\"reqData\":_vm.reqData,\"checkMarket\":_vm.checkEdit}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"物业公司\",\"prop\":\"companyId\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},on:{\"change\":_vm.companyChange},model:{value:(_vm.reqData.companyId),callback:function ($$v) {_vm.$set(_vm.reqData, \"companyId\", $$v)},expression:\"reqData.companyId\"}},_vm._l((_vm.companyList),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.companyName,\"value\":item.companyId}})}))],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"物业考核周期\",\"prop\":\"assess\"}},[_c('el-date-picker',{attrs:{\"type\":\"month\",\"value-format\":\"yyyy-MM\",\"placeholder\":\"选择月\",\"picker-options\":_vm.pickerOptions,\"disabled\":\"\"},on:{\"change\":_vm.getRecord},model:{value:(_vm.reqData.assess),callback:function ($$v) {_vm.$set(_vm.reqData, \"assess\", $$v)},expression:\"reqData.assess\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"u-top\",attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"收款方\",\"prop\":\"remittee\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.reqData.remittee),callback:function ($$v) {_vm.$set(_vm.reqData, \"remittee\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.remittee\"}})],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"u-tip\",attrs:{\"span\":11,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"合同金额（应付)\",\"prop\":\"contractValue\",\"label-width\":\"140px\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.reqData.contractValue||0.00)+\"\\n          \")]),_vm._v(\" \"),_c('span',[_vm._v(\"收费标准*人事编制\")])],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"扣款金额\",\"prop\":\"amount\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"0.00\"},model:{value:(_vm.reqData.amount),callback:function ($$v) {_vm.$set(_vm.reqData, \"amount\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.amount\"}})],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"u-tip-down\",attrs:{\"span\":12,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"实付金额\",\"prop\":\"amountPaid\",\"label-width\":\"102px\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.reMsg || 0.00)+\"\\n          \")])],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"说明\",\"prop\":\"accountFor\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.reqData.accountFor),callback:function ($$v) {_vm.$set(_vm.reqData, \"accountFor\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.accountFor\"}})],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"u-tip-down\",attrs:{\"span\":11,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"付款方\",\"prop\":\"payment\",\"label-width\":\"102px\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.reqData.payment),callback:function ($$v) {_vm.$set(_vm.reqData, \"payment\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.payment\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":8,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"付款方式\",\"prop\":\"paymentMethod\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.reqData.paymentMethod),callback:function ($$v) {_vm.$set(_vm.reqData, \"paymentMethod\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"reqData.paymentMethod\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":11,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"凭证\\n\",\"prop\":\"skuCode\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":_vm.$http.defaults.baseURL+_vm.uploadUrl,\"before-remove\":_vm.beforeRemove,\"multiple\":\"\",\"limit\":10,\"headers\":{gTicket:_vm.gTicket},\"on-exceed\":_vm.handleExceed,\"file-list\":_vm.fileList,\"on-success\":_vm.handleList,\"before-upload\":_vm.beforeLogoUpload,\"on-remove\":_vm.handleRemove}},[_c('el-button',{staticClass:\"btn-80 btn-upload\",attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"浏览\")])],1)],1)],1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"u-button\",attrs:{\"gutter\":32}},[_c('el-col',{attrs:{\"span\":8,\"offset\":16}},[_c('el-button',{staticClass:\"btn-save-big\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('reqData')}}},[_vm._v(\"保存\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-199c2299\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/estate_manage/company_manage/edit_record/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-199c2299\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-199c2299\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-199c2299\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-199c2299\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/estate_manage/company_manage/edit_record/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}